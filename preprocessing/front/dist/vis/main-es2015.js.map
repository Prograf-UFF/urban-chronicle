{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/charts/bar.ts","./src/app/charts/cmap.ts","./src/app/charts/line.ts","./src/app/charts/matrix.ts","./src/app/components/config/config.component.ts","./src/app/components/config/config.component.html","./src/app/components/filter/filter.component.ts","./src/app/components/filter/filter.component.html","./src/app/components/layers/layers.component.ts","./src/app/components/layers/layers.component.html","./src/app/components/legend/legend.component.ts","./src/app/components/legend/legend.component.html","./src/app/components/map/map.component.ts","./src/app/components/map/map.component.html","./src/app/components/menu/menu.component.ts","./src/app/components/menu/menu.component.html","./src/app/components/tooltip/tooltip.component.ts","./src/app/components/tooltip/tooltip.component.html","./src/app/components/vis/vis.component.ts","./src/app/components/vis/vis.component.html","./src/app/mapview/building-layer.ts","./src/app/mapview/camera.ts","./src/app/mapview/colormap.ts","./src/app/mapview/constants.ts","./src/app/mapview/data-api.ts","./src/app/mapview/data-loader.ts","./src/app/mapview/geoutils.ts","./src/app/mapview/heatmap-layer.ts","./src/app/mapview/key-events.ts","./src/app/mapview/layer-manager.ts","./src/app/mapview/layer.ts","./src/app/mapview/mapview.ts","./src/app/mapview/mouse-events.ts","./src/app/mapview/physical-layer.ts","./src/app/mapview/point-layer.ts","./src/app/mapview/polygon-layer.ts","./src/app/material/material.module.ts","./src/app/services/api.service.ts","./src/app/services/data.service.ts","./src/app/services/events.service.ts","./src/app/services/state.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\nimport { EventsService } from './services/events.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n})\nexport class AppComponent implements OnInit {\n  title = 'Pluto Vis';\n\n  constructor(public events: EventsService) { }\n\n  ngOnInit() {\n    this.events.root.initialized.emit();\n  }\n}\n","<!-- Mapview component -->\n<app-map></app-map>\n<!-- Visualization components -->\n<app-vis></app-vis>\n<app-filter></app-filter>\n<!-- Assessory components -->\n<app-menu></app-menu>\n<app-legend></app-legend>\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { MaterialModule } from './material/material.module';\n\nimport { AppComponent } from './app.component';\nimport { MapComponent } from './components/map/map.component';\nimport { VisComponent } from './components/vis/vis.component';\nimport { MenuComponent } from './components/menu/menu.component';\nimport { LegendComponent } from './components/legend/legend.component';\nimport { FilterComponent } from './components/filter/filter.component';\nimport { ConfigComponent } from './components/config/config.component';\nimport { TooltipComponent } from './components/tooltip/tooltip.component';\nimport { LayersComponent } from './components/layers/layers.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    MapComponent,\n    VisComponent,\n    MenuComponent,\n    LegendComponent,\n    FilterComponent,\n    ConfigComponent,\n    TooltipComponent,\n    LayersComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MaterialModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import * as d3 from 'd3';\nimport { min } from 'd3';\n\nexport class Bar {\n  // chart data\n  protected _data: any = null;\n\n  // Chart div\n  protected _chartDiv: HTMLElement = null;\n  // Svg element\n  protected _svgCanvas: any = null;\n  // Group element\n  protected _svgGroup: any = null;\n\n  // margin object\n  protected _margin = { top: 10, right: 15, bottom: 75, left: 70 };\n\n  // svg width\n  protected _width: number;\n  // charts height\n  protected _height: number;\n\n  // scales and axis\n  protected _xScale: any = null;\n  protected _yScale: any = null;\n  // ----\n  protected _xAxis: any = null;\n  protected _yAxis: any = null;\n\n  // brush object\n  protected _brush = d3.brushX();\n  protected _brushedBins = [];\n\n  // callbacks\n  protected _callbacks = null;\n  protected _key = null;\n\n  // label\n  protected labelFormat = (label) => {\n    let parts = label.split('-');\n\n    if (isNaN(+parts[0])) {\n      return label.split(',').join('-');\n    }\n\n    parts = parts.map(el => d3.format('.2s')(el));\n    return parts.join('-');\n  }\n\n  constructor(chartDiv: HTMLElement, callbacks: any, key: string) {\n    this._chartDiv = chartDiv;\n    this._callbacks = callbacks;\n    this._key = key;\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.initWindowEvents();\n    this.initBrush();\n  }\n\n  setData(data: any, brush: any) {\n    this._data = data;\n    this._brushedBins = brush;\n  }\n\n  render() {\n    this.updateScales();\n    this.updateAxes();\n    this.updateBars();\n    this.initBrush();\n  }\n\n  resize() {\n    this._svgCanvas.remove();\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.render();\n  }\n\n\n  initSvgAndGroups() {\n    // dimensions using margins convention\n    this._width = this._chartDiv.clientWidth - this._margin.left - this._margin.right;\n    this._height = this._chartDiv.clientHeight - this._margin.top - this._margin.bottom;\n\n    // creates the new canvas element\n    this._svgCanvas = d3.select(this._chartDiv)\n      .append('svg')\n      .attr('width', this._chartDiv.clientWidth)\n      .attr('height', this._chartDiv.clientHeight);\n\n    // creates the group\n    this._svgGroup = this._svgCanvas\n      .append('g')\n      .attr('class', 'svgGroup')\n      .attr('transform', 'translate(' + this._margin.left + ',' + this._margin.top + ')');\n\n    // axis groups\n    this._svgGroup\n      .append('g')\n      .attr('class', 'axis axis--x')\n      .attr('transform', 'translate(0,' + (this._height) + ')');\n\n    this._svgGroup\n      .append('g')\n      .attr('class', 'brush')\n\n    this._svgGroup\n      .append('g')\n      .attr('class', 'axis axis--y');\n\n    // text label for the x axis\n    this._svgGroup\n      .append(\"text\")\n      .attr('class', 'xaxis-label')\n      .attr(\"transform\", `translate(${\n        this._width / 2\n        }, ${\n        this._height + this._margin.top + 45\n        })`)\n      .style(\"text-anchor\", \"middle\")\n      .text(\"attribute bins\");\n\n    // text label for the y axis\n    this._svgGroup\n      .append(\"text\")\n      .attr('class', 'yaxis-label')\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", 0 - this._margin.left + 10)\n      .attr(\"x\", 0 - this._height / 2)\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"middle\")\n      .text(`frequency`);\n\n  }\n\n  initScalesAndAxes() {\n    this._xScale = d3.scaleBand().range([0, this._width]).padding(0.1);\n    this._xAxis = d3.axisBottom(this._xScale).tickFormat(this.labelFormat);\n\n    this._yScale = d3.scaleLinear().range([this._height, 0]);\n    this._yAxis = d3.axisLeft(this._yScale).ticks(10, \"~s\");\n  }\n\n  initWindowEvents() {\n    window.addEventListener('resize', this.resize.bind(this));\n  }\n\n  updateScales() {\n    const bins = this._data.map(obj => `${obj.bin}`);\n    const extent = d3.extent(this._data.map(obj => obj.count));\n\n    // sets the domains\n    this._xScale.domain(bins);\n    this._yScale.domain(extent);\n  }\n\n  updateAxes() {\n    const bins = this._data.map(obj => `${obj.bin}`);\n\n    this._xAxis.scale(this._xScale);\n    this._svgGroup.select('.axis--x').call(this._xAxis)\n      .selectAll('text')\n      .style('text-anchor', 'end')\n      .attr('font-size', () => {\n        if (bins.length > 20) {\n          return '8px'\n        }\n        return '10px';\n      })\n      .attr('dx', '-.8em')\n      .attr('dy', () => bins.length > 20 ? '-.8em' : '.15em')\n      .attr('transform', () => {\n        if (bins.length > 20) {\n          return 'rotate(-90)'\n        }\n        return 'rotate(-25)'\n      });\n\n    this._yAxis.scale(this._yScale);\n    this._svgGroup.select('.axis--y').call(this._yAxis);\n  }\n\n  updateBars() {\n    const barsGroup = this._svgGroup\n      .selectAll(\".line-group\")\n      .data([this._data])\n      .join(\"g\");\n\n    barsGroup\n      .attr('class', 'line-group');\n\n    const rects = barsGroup\n      .selectAll(\"rect\")\n      .data(d => d)\n      .join(\"rect\");\n\n    rects\n      .attr('class', 'bar')\n      .attr(\"x\", d => this._xScale(`${d.bin}`))\n      .attr(\"y\", d => this._yScale(d.count))\n      .attr(\"width\", this._xScale.bandwidth())\n      .attr(\"height\", d => this._height - this._yScale(d.count))\n      .attr(\"fill\", \"#673ab7\");\n  }\n\n  initBrush() {\n    this._brush\n      .on(\"start brush end\", this.barChartOnBrush.bind(this))\n      .extent([[0, 0], [this._width, this._height]]);\n\n    this._svgGroup.select('.brush').call(this._brush);\n\n    if (this._brushedBins.length) {\n      const first = this._brushedBins[0];\n      const final = this._brushedBins[this._brushedBins.length - 1];\n      const range = [this._xScale(first) - this._xScale.paddingInner(), this._xScale(final) + this._xScale.bandwidth()];\n\n      this._svgGroup.select(\".brush\").call(this._brush.move, range);\n    }\n  }\n\n  barChartOnBrush() {\n    const selection = d3.event.selection;\n\n    const rects = this._svgGroup\n      .selectAll(\".line-group\")\n      .selectAll(\".bar\")\n\n    if (selection) {\n      const range = this._xScale.domain().map(this._xScale);\n\n      const i0 = d3.bisectRight(range, selection[0]);\n      const i1 = d3.bisectRight(range, selection[1]);\n\n      this._brushedBins = this._xScale.domain().slice(i0, i1);\n    } else {\n      this._brushedBins = [];\n    }\n\n    rects.attr(\"fill\", d => this._brushedBins.includes(d.bin) ? \"#f44336\" : \"#673ab7\");\n\n    const event = { value: this._brushedBins };\n    this._callbacks.brush(this._key, event);\n  }\n}","import * as d3 from 'd3';\n\nexport class Cmap {\n  // chart data\n  protected _data: any = {};\n\n  // Chart div\n  protected _chartDiv: HTMLElement = null;\n  // Svg element\n  protected _svgCanvas: any = null;\n  // Group element\n  protected _svgGroup: any = null;\n\n  // margin object\n  protected _margin = { top: 0, right: 20, bottom: 30, left: 16 };\n\n  // svg width\n  protected _width: number;\n  // charts height\n  protected _height: number;\n\n  // scales and axis\n  protected _xScale: any = null;\n  protected _cScale: any = null;\n  protected _xAxis: any = null;\n\n  // number of colors\n  protected N_COLORS = 40;\n\n  // Is Alive : the lot existis in the selected year\n  // Is Active: the lot fits the filter condition \n  // Is Valid : the selected attribute is a valid value in the lot\n  protected ALIVE_COLOR = d3.color('#8f8f8f');\n  protected ACTVE_COLOR = d3.color('#afafaf');\n  protected VALID_COLOR = d3.color('#cfcfcf');\n\n  protected ALIVE_LABEL = 'A';\n  protected ACTVE_LABEL = 'F';\n  protected VALID_LABEL = 'V';\n\n  // format\n  protected tickFormat = (val) => {\n    if ( isNaN(val) ) {\n        return val;\n    }\n    else {\n        return d3.format('.2s')(val);\n    }\n  }\n\n\n  constructor(chartDiv: HTMLElement) {\n    this._chartDiv = chartDiv;\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.initWindowEvents();\n  }\n\n  initWindowEvents() {\n    window.addEventListener('resize', this.resize.bind(this));\n  }\n\n\n  setData(minMax: any) {\n\n    let zero = 0;\n\n    if (minMax[0] < 0 && minMax[1] > 0) {\n      zero = 0\n    } else if (minMax[0] >= 0 && minMax[1] > 0) {\n      zero = minMax[0];\n    } else if (minMax[0] < 0 && minMax[1] <= 0) {\n      zero = minMax[1];\n    }\n    \n    if (minMax[0] !== minMax[1]) {\n      let frac = Math.ceil( this.N_COLORS * (zero - minMax[0]) / (minMax[1] - minMax[0]) );\n      \n      if (frac < 5) {\n        frac = 5;\n      }\n      if (frac > this.N_COLORS - 5) {\n        frac = this.N_COLORS - 5; \n      }\n\n      this._data.values = [];\n      \n      for (let id = 0; id < frac; id ++) {\n        const val = minMax[0] + id * (zero - minMax[0]) / (frac - 1);\n        this._data.values.push(val.toFixed(3)) \n      }\n  \n      for (let id = 0; id < this.N_COLORS - frac; id ++) {\n        const val = zero + id * (minMax[1] - zero) / (this.N_COLORS - frac - 1);\n        this._data.values.push(val.toFixed(3)) \n      }\n  \n      this._data.minMax = minMax.map(el => el.toFixed(3));\n      this._data.zero = zero.toFixed(3);  \n    } \n    else {\n      this._data.minMax = minMax;\n      this._data.zero = minMax[0];\n      this._data.values = [this._data.zero];\n    }\n\n    this._data.values.unshift(this.ALIVE_LABEL, this.ACTVE_LABEL, this.VALID_LABEL);\n  }\n\n  render() {\n    this.updateScales();\n    this.updateAxes();\n    this.updateRectangles();\n  }\n\n  resize() {\n    this._svgCanvas.remove();\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.render();\n  }\n\n  initSvgAndGroups() {\n    // dimensions using margins convention\n    this._width = this._chartDiv.clientWidth - this._margin.left - this._margin.right;\n    this._height = this._chartDiv.clientHeight - this._margin.top - this._margin.bottom;\n\n    // creates the new canvas element\n    this._svgCanvas = d3.select(this._chartDiv)\n      .append('svg')\n      .attr('width', this._chartDiv.clientWidth)\n      .attr('height', this._chartDiv.clientHeight);\n\n    // creates the group\n    this._svgGroup = this._svgCanvas\n      .append('g')\n      .attr('class', 'svgGroup')\n      .attr('transform', 'translate(' + this._margin.left + ',' + this._margin.top + ')');\n\n    // axis groups\n    this._svgGroup\n      .append('g')\n      .attr('class', 'axis axis--x')\n      .attr('transform', 'translate(0,' + (this._height) + ')');\n  }\n\n  initScalesAndAxes() {\n    this._xScale = d3.scaleBand().range([0, this._width]).padding(0.0);\n    this._xAxis = d3.axisBottom(this._xScale);\n    this._cScale = d3.scaleDiverging(d3.interpolateRdBu);\n  }\n\n  updateScales() {\n    this._xScale.domain(this._data.values);\n\n    this._cScale.domain([\n      this._data.minMax[0], this._data.zero, this._data.minMax[1]\n    ]);\n  }\n\n  updateAxes() {\n    this._xAxis.scale(this._xScale).tickValues([\n        this.ALIVE_LABEL,\n        this.ACTVE_LABEL,\n        this.VALID_LABEL,\n        this._data.minMax[0],\n        this._data.zero,\n        this._data.minMax[1]\n      ]);\n\n      this._svgGroup.select('.axis--x').call(this._xAxis.tickFormat(this.tickFormat))\n      .selectAll('text')\n      .style('text-anchor', 'end')\n      .attr('dy', '.5em')\n      .attr('dx', '-.25em')\n      .attr('transform', 'rotate(-35)');\n    \n      this._svgGroup.select('.axis--x').select(\".domain\").remove();\n  }\n\n  updateRectangles() {\n    const cmap = this._svgGroup\n      .selectAll(\".cmap-group\")\n      .data([this._data.values])\n      .join(\"g\");\n    \n    cmap.attr(\"class\", \"cmap-group\");\n\n    const rects = cmap\n      .selectAll(\"rect\")\n      .data(d => d)\n      .join(\"rect\");\n\n    rects\n      .attr(\"x\", d =>this._xScale(d))\n      .attr(\"y\", 0)\n      .attr(\"width\", this._xScale.bandwidth())\n      .attr(\"height\", this._height)\n      .attr(\"fill\", d => {\n        if(d === this.ALIVE_LABEL) {\n            return this.ALIVE_COLOR;\n        }\n        else if (d === this.VALID_LABEL) {\n            return this.VALID_COLOR;\n        }\n        else if (d === this.ACTVE_LABEL) {\n            return this.ACTVE_COLOR;\n        }\n        else {\n            return this._cScale(d);\n        }\n      })\n      .attr(\"stroke\", \"none\");\n  }\n}","import * as d3 from 'd3';\n\nexport class Line {\n  // chart data\n  protected _data: any = null;\n\n  // Chart div\n  protected _chartDiv: HTMLElement = null;\n  // Svg element\n  protected _svgCanvas: any = null;\n  // Group element\n  protected _svgGroup: any = null;\n\n  // margin object\n  protected _margin = { top: 40, right: 35, bottom: 60, left: 125 };\n\n  // svg width\n  protected _width: number;\n  // charts height\n  protected _height: number;\n\n  // scales and axis\n  protected _xScale: any = null;\n  protected _yScale: any = null;\n  protected _cScale: any = null;\n\n  protected _yLabel: string = '';\n\n  // ----\n  protected _xAxis: any = null;\n  protected _yAxis: any = null;\n\n  // callbacks\n  protected _callbacks = null;\n\n  // d3's line generator\n  protected _line = d3.line()\n    .x((d: any) => this._xScale(d.year))\n    .y((d: any) => this._yScale(d.value))\n    .curve(d3.curveLinear)\n    .defined(function (d: any) { return d.valid; })\n\n  constructor(chartDiv: HTMLElement, callbacks: any, defaults: any) {\n    this._chartDiv = chartDiv;\n    this._callbacks = callbacks;\n    this._yLabel = defaults.yLabel;\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.initWindowEvents();\n  }\n\n  setData(data: any, years: any) {\n    this._data = data;\n    this._data.years = years;\n  }\n\n  setYLabel(label: string) {\n    this._yLabel = label;\n  }\n\n  render() {\n    this.updateScales();\n    this.updateAxes();\n    this.updateLines();\n    this.updateLegend();\n  }\n\n  resize() {\n    this._svgCanvas.remove();\n\n    this.initSvgAndGroups();\n    this.initScalesAndAxes();\n    this.render();\n  }\n\n\n  initSvgAndGroups() {\n    // dimensions using margins convention\n    this._width = this._chartDiv.clientWidth - this._margin.left - this._margin.right;\n    this._height = this._chartDiv.clientHeight - this._margin.top - this._margin.bottom;\n\n    // creates the new canvas element\n    this._svgCanvas = d3.select(this._chartDiv)\n      .append('svg')\n      .attr('width', this._chartDiv.clientWidth)\n      .attr('height', this._chartDiv.clientHeight);\n\n    // creates the group\n    this._svgGroup = this._svgCanvas\n      .append('g')\n      .attr('class', 'svgGroup')\n      .attr('transform', 'translate(' + this._margin.left + ',' + this._margin.top + ')');\n\n    this._svgGroup\n      .append('g')\n      .attr('class', 'legend')\n      .attr('transform', 'translate(0, 0)');\n\n    // axis groups\n    this._svgGroup\n      .append('g')\n      .attr('class', 'axis axis--x')\n      .attr('transform', 'translate(0,' + (this._height) + ')');\n\n    this._svgGroup\n      .append('g')\n      .attr('class', 'axis axis--y');\n\n    // text label for the x axis\n    this._svgGroup\n      .append(\"text\")\n      .attr('class', 'xaxis-label')\n      .attr(\"transform\", `translate(${\n        this._width / 2\n        }, ${\n        this._height + this._margin.top + 15\n        })`)\n      .style(\"text-anchor\", \"middle\")\n      .text(() => {\n            const parts = this._yLabel.split(' ');\n            if (parts[parts.length - 1] === 'change') {\n                return `${parts[0]} ${parts[1]} value matrix`;\n            }\n            if (parts[parts.length - 1] === 'value') {\n                return `${parts[0]} ${parts[1]} change matrix`;\n            }\n      });\n\n    // text label for the y axis\n    this._svgGroup\n      .append(\"text\")\n      .attr('class', 'yaxis-label')\n      .attr(\"transform\", \"rotate(-90)\")\n      .attr(\"y\", 0 - this._margin.left / 2)\n      .attr(\"x\", 0 - (this._height / 2))\n      .attr(\"dy\", \"1em\")\n      .style(\"text-anchor\", \"middle\")\n      .text(`${this._yLabel}`);\n  }\n\n  initScalesAndAxes() {\n    this._xScale = d3.scalePoint().range([0, this._width]).padding(0.2);\n    this._xAxis = d3.axisBottom(this._xScale);\n\n    this._yScale = d3.scaleLinear().range([this._height, 0]);\n    this._yAxis = d3.axisLeft(this._yScale);\n\n    this._cScale = d3.scaleOrdinal(d3.schemeCategory10);\n  }\n\n  initWindowEvents() {\n    window.addEventListener('resize', this.resize.bind(this));\n  }\n\n  updateScales() {\n    const years = this._data.years;\n\n    let range = [Number.MAX_VALUE, Number.MIN_VALUE];\n    this._data.lines.forEach(line => {\n      const vals = line.data.map(el => el.value);\n\n      const min = Math.min(...vals);\n      const max = Math.max(...vals);\n\n      range[0] = Math.min(range[0], min);\n      range[1] = Math.max(range[1], max);\n    });\n\n    if (this._data.lines.length === 0) {\n      range = this._data.minMax;\n    }\n\n    // sets the domains\n    this._xScale.domain(years);\n    this._yScale.domain(range);\n\n    const names = this._data.lines.map(obj => obj.name);\n    this._cScale.domain(names);\n  }\n\n  updateAxes() {\n    this._xAxis.scale(this._xScale);\n    this._svgGroup.select('.axis--x').call(this._xAxis)\n      .selectAll('text')\n      .style('text-anchor', 'end')\n      .attr('dx', '-.8em')\n      .attr('dy', '.15em')\n      .attr('transform', 'rotate(-25)');\n\n    this._yAxis.scale(this._yScale);\n    this._svgGroup.select('.axis--y').call(this._yAxis.tickFormat(d3.format(\".2s\")));\n\n    this._svgGroup.select('.yaxis-label').text(`${this._yLabel}`)\n    this._svgGroup.select('.xaxis-label').text(() => {\n        const parts = this._yLabel.split(' ');\n        if (parts[parts.length - 1] === 'change') {\n            return `${parts[0]} ${parts[1]} value matrix`;\n        }\n        if (parts[parts.length - 1] === 'value') {\n            return `${parts[0]} ${parts[1]} change matrix`;\n        }\n    });\n  }\n\n  updateLines() {\n    const lines = this._svgGroup.selectAll('.curve')\n      .data(this._data.lines)\n      .join('path');\n\n    lines\n      .attr(\"class\", \"curve\")\n      .attr(\"d\", d => this._line(d.data))\n      .attr(\"stroke\", d => this._cScale(d.name));\n  }\n\n  updateLegend() {\n    const elements = this._svgGroup.select('.legend')\n      .selectAll('.legend-element')\n      .data(this._data.lines)\n      .join('g')\n      .attr('transform', (d, i) => `translate(${this._width / 4 + i * (3 * this._width / 4) / this._data.lines.length}, ${-this._margin.top / 2})`);\n\n    elements\n      .attr('class', 'legend-element')\n      .attr('width', 3 * this._width / 4 / this._data.lines.length)\n\n\n    const circles = elements\n      .selectAll('circle')\n      .data(d => [d.name])\n      .join('circle');\n\n    circles\n      .attr('r', 6)\n      .attr('fill', d => this._cScale(d))\n\n    const labels = elements\n      .selectAll('text')\n      .data(d => [d.name])\n      .join('text');\n\n    let width = (this._width / 4) / this._data.lines.length;\n    let lSize = 20;\n\n    labels\n      .attr('class', 'legend-text')\n      .attr('text-anchor', 'start')\n      .attr('x', 15)\n      .attr('y', 5)\n      .text(d => {\n        const content = d.length > lSize ? d.slice(0, lSize) + '...' : d;\n        return content;\n      })\n      .text(function (d) {\n        const content = d.length > lSize ? d.slice(0, lSize) + '...' : d;\n        const size = this.getComputedTextLength();\n        return size < width ? content : content.slice(0, lSize * width / size) + '...';\n      })\n      .on('mouseover', d => {\n        const mouse = [d3.event.pageX+10, d3.event.pageY+10];\n        this._callbacks.lHover({line: d, mouse});\n      })\n      .on('mouseout', this._callbacks.svgOut);\n  }\n}","import * as d3 from 'd3';\n\nexport class Matrix {\n    // chart data\n    protected _data: any = null;\n\n    // Chart div\n    protected _chartDiv: HTMLElement = null;\n    // Svg element\n    protected _svgCanvas: any = null;\n    // Group element\n    protected _svgGroup: any = null;\n\n    // margin object\n    protected _margin = { top: 10, right: 35, bottom: 40, left: 125 };\n\n    // svg width\n    protected _width: number;\n    // charts height\n    protected _height: number;\n\n    // scales and axis\n    protected _xScale: any = null;\n    protected _yScale: any = null;\n    protected _cScale: any = null;\n    protected _lScale: any = null;\n    // ----\n    protected _xAxis: any = null;\n    protected _yAxis: any = null;\n\n    // labels on y axis\n    protected Y_LABEL_SIZE = 22;\n\n    // Is Alive : the lot existis in the selected year\n    // Is Active: the lot fits the filter condition \n    // Is Valid : the selected attribute is a valid value in the lot\n    protected ALIVE_COLOR = d3.color('#8f8f8f');\n    protected ACTVE_COLOR = d3.color('#afafaf');\n    protected VALID_COLOR = d3.color('#cfcfcf');\n\n    protected MODE = null;\n\n    // callback enabled\n    protected _yCallbackEnabled = true;\n\n    // selected labels\n    protected _xLabelSelected = null;\n    protected _yLabelSelected = null;\n\n    protected _sortIconSelected = null;\n    protected _lineIconSelected = [];\n\n\n    // callbacks\n    protected _callbacks = null;\n\n    constructor(chartDiv: HTMLElement, callbacks: any, defaults: any) {\n        this._chartDiv = chartDiv;\n        this._callbacks = callbacks;\n\n        this._xLabelSelected = defaults.xLabel;\n        this._yLabelSelected = null;\n\n        this._sortIconSelected = defaults.sIcon;\n        this._lineIconSelected = defaults.lIcon;\n\n        this.initSvgAndGroups();\n        this.initScalesAndAxes();\n        this.initWindowEvents();\n    }\n\n    setData(data: any, mode: string, line: any, sort: string, click: boolean) {\n        this.MODE = mode;\n        this._data = data;\n        this._lineIconSelected = line;\n        this._sortIconSelected = sort;\n        this._yCallbackEnabled = click;\n    }\n\n    setHighlight(label: string) {\n        this._yLabelSelected = label;\n    }\n\n    render() {\n        this.updateScales();\n        this.updateAxes();\n\n        this.updateRectangles();\n        this.updateSortIcons();\n        this.updateLineIcons();\n\n        this.highlightSortIcon();\n        this.highlightLineIcon();\n\n        this.highlightXLabel();\n        this.highlightYLabel();\n    }\n\n    resize() {\n        this._svgCanvas.remove();\n\n        this.initSvgAndGroups();\n        this.initScalesAndAxes();\n        this.render();\n    }\n\n    initSvgAndGroups() {\n        // dimensions using margins convention\n        this._width = this._chartDiv.clientWidth - this._margin.left - this._margin.right;\n        this._height = this._chartDiv.clientHeight - this._margin.top - this._margin.bottom;\n\n        // creates the new canvas element\n        this._svgCanvas = d3.select(this._chartDiv)\n            .append('svg')\n            .attr('width', this._chartDiv.clientWidth)\n            .attr('height', this._chartDiv.clientHeight)\n            .on('mouseout', this._callbacks.svgOut);\n\n        // creates the group\n        this._svgGroup = this._svgCanvas\n            .append('g')\n            .attr('class', 'svgGroup')\n            .attr('transform', 'translate(' + this._margin.left + ',' + this._margin.top + ')');\n\n        // axis groups\n        this._svgGroup\n            .append('g')\n            .attr('class', 'axis axis--x')\n            .attr('transform', 'translate(0,' + (this._height) + ')');\n\n        this._svgGroup\n            .append('g')\n            .attr('class', 'axis axis--y');\n\n        // icons groups\n        this._svgGroup\n            .append('g')\n            .attr('class', 'sort-icons-group')\n\n        this._svgGroup\n            .append('g')\n            .attr('class', 'line-icons-group')\n    }\n\n    initScalesAndAxes() {\n        this._xScale = d3.scaleBand().range([0, this._width]).padding(0.075);\n        this._xAxis = d3.axisBottom(this._xScale);\n\n        this._yScale = d3.scaleBand().range([this._height, 0]).paddingInner(0.075).paddingOuter(0.25).align(1.0);\n        this._yAxis = d3.axisLeft(this._yScale);\n\n        this._cScale = d3.scaleDiverging(d3.interpolateRdBu);\n        this._lScale = d3.scaleOrdinal(d3.schemeCategory10);\n    }\n\n    initWindowEvents() {\n        window.addEventListener('resize', this.resize.bind(this));\n    }\n\n    updateScales() {\n        const keys = this._data.map(obj => obj.key);\n        if (keys.length < 1) { return; }\n\n        const polys = this._data[0].value.map(obj => obj.name);\n        if (polys.length < 1) { return; }\n\n        // sets the domains\n        this._xScale.domain(keys);\n        this._yScale.domain(polys);\n\n        let zero = 0;\n        if (this._data.minMax[0] < 0 && this._data.minMax[1] > 0) {\n            zero = 0\n        } else if (this._data.minMax[0] >= 0 && this._data.minMax[1] > 0) {\n            zero = this._data.minMax[0];\n        } else if (this._data.minMax[0] < 0 && this._data.minMax[1] <= 0) {\n            zero = this._data.minMax[1];\n        }\n\n        this._cScale.domain([\n            this._data.minMax[0], zero, this._data.minMax[1]\n        ]);\n        this._lScale.domain(this._lineIconSelected);\n    }\n\n    updateAxes() {\n        this._xAxis.scale(this._xScale);\n        this._svgGroup.select('.axis--x').call(this._xAxis)\n            .selectAll('text')\n            .style('text-anchor', 'end')\n            .style('pointer-events', 'auto')\n            .style('cursor', 'pointer')\n            .attr('dx', '-.8em')\n            .attr('dy', '.15em')\n            .attr('transform', 'rotate(-25)')\n            .on('click', d => {\n                this._xLabelSelected = d;\n                this._callbacks.xLabel(d);\n                this.highlightXLabel();\n            });\n\n\n        this._yAxis.scale(this._yScale);\n        const texts = this._svgGroup.select('.axis--y').call(this._yAxis)\n            .selectAll('text')\n            .text(d => {\n                if (d.length > this.Y_LABEL_SIZE) {\n                    return `${d.substring(0, this.Y_LABEL_SIZE - 3)}...`;\n                }\n                return d;\n            })\n            .style('pointer-events', 'auto')\n            .style('cursor', 'not-allowed')\n            .on('mouseover', d => {\n                let current = this._data[0].value.filter(obj => obj.name === d);\n                current = current.length > 0 ? current[0].name : '';\n\n                this._yLabelSelected = current;\n                this._callbacks.yHover(current);\n                this.highlightYLabel();\n            })\n\n        if (this._yCallbackEnabled) {\n            texts\n                .style('cursor', 'pointer')\n                .on('click', d => this._callbacks.yLabel(d));\n\n        }\n    }\n\n    updateRectangles() {\n        const polys = this._svgGroup\n            .selectAll(\".line-group\")\n            .data(this._data)\n            .join(\"g\");\n\n        polys\n            .attr('class', 'line-group')\n            .attr('transform', d => `translate(${this._xScale(d.key)}, 0)`);\n\n        const rects = polys\n            .selectAll(\"rect\")\n            .data(d => d.value)\n            .join(\"rect\");\n\n        rects\n            .attr(\"y\", d => this._yScale(d.name))\n            .attr(\"width\", this._xScale.bandwidth())\n            .attr(\"height\", this._yScale.bandwidth())\n            .attr(\"fill\", d => {\n                if (this.MODE === 'value') {\n                    if (!d.isAlive) {\n                        return this.ALIVE_COLOR;\n                    }\n                    else if (!d.isActive) {\n                        return this.ACTVE_COLOR;\n                    }\n                    else if (!d.isValid) {\n                        return this.VALID_COLOR;\n                    }\n                    else {\n                        return this._cScale(d[this.MODE]);\n                    }\n                }\n\n                else if (this.MODE === 'change') {\n                    if (!d.isAlive) {\n                        return this.ALIVE_COLOR;\n                    }\n                    else if (!d.isActive) {\n                        return this.ACTVE_COLOR;\n                    }\n                    else if (!d.changeValid) {\n                        return this.VALID_COLOR;\n                    }\n                    else {\n                        return this._cScale(d[this.MODE]);\n                    }\n                }\n            })\n            .on('mouseover', (d, i, nodes) => {\n                const year = nodes[i].parentNode.__data__.key;\n                const mouse = [d3.event.pageX + 10, d3.event.pageY + 10];\n                this._callbacks.rHover({ year, data: d, mouse });\n            });\n    }\n\n    updateSortIcons() {\n        const icons = this._svgGroup.select('.sort-icons-group')\n            .selectAll(\"path\")\n            .data(this._data)\n            .join(\"path\");\n\n        icons\n            .attr(\"d\", d3.symbol().type(d3.symbolTriangle).size(100))\n            .style('pointer-events', 'auto')\n            .style('cursor', 'pointer')\n            .attr('transform', d => {\n                return `rotate(180) translate(${-this._xScale(d.key) - 0.5 * this._xScale.bandwidth()}, ${0})`;\n            })\n            .on('click', d => {\n                this._sortIconSelected = this._sortIconSelected === d.key ? 'name' : d.key;\n                this._callbacks.sIcon(this._sortIconSelected);\n                this.highlightSortIcon();\n            });\n    }\n\n    updateLineIcons() {\n        const icons = this._svgGroup.select('.line-icons-group')\n            .selectAll(\"path\")\n            .data(this._data[0].value)\n            .join(\"path\");\n\n        icons\n            .attr(\"d\", d3.symbol().type(d3.symbolCircle).size(100))\n            .style('pointer-events', 'auto')\n            .style('cursor', 'pointer')\n            .attr('transform', d => {\n                return `translate(${this._width + 0.5 * this._margin.right\n                    }, ${this._yScale(d.name) + 0.5 * this._yScale.bandwidth()\n                    })`;\n            })\n            .on('click', this.updateLineIconsClick.bind(this));\n    }\n\n    highlightYLabel() {\n\n        this._svgGroup.select('.axis--y').call(this._yAxis)\n            .selectAll('text')\n            .text(d => {\n                if (d.length > this.Y_LABEL_SIZE) {\n                    return `${d.substring(0, this.Y_LABEL_SIZE - 3)}...`;\n                }\n                return d;\n            })\n            .attr('fill', d => {\n                let current = this._data[0].value.filter(obj => obj.name === this._yLabelSelected);\n                current = current.length > 0 ? current[0].name : '';\n\n                return current === d ? 'limegreen' : 'currentColor';\n            })\n            .attr('font-weight', d => {\n                let current = this._data[0].value.filter(obj => obj.name === this._yLabelSelected);\n                current = current.length > 0 ? current[0].name : '';\n\n                return current === d ? 'bold' : 'normal'\n            });\n    }\n\n    highlightXLabel() {\n        this._svgGroup.select('.axis--x').call(this._xAxis)\n            .selectAll('text')\n            .attr('fill', d => d === this._xLabelSelected ? '#f44336' : 'currentColor')\n            .attr('font-weight', d => d === this._xLabelSelected ? 'bold' : 'normal');\n    }\n\n    highlightSortIcon() {\n        this._svgGroup.select('.sort-icons-group')\n            .selectAll('path')\n            .attr('fill', d => {\n                return +this._sortIconSelected && d.key === this._sortIconSelected ? '#f44336' : '#bfbfbf';\n            });\n    }\n\n    highlightLineIcon() {\n        this._svgGroup.select('.line-icons-group')\n            .selectAll('path')\n            .attr('fill', d => {\n                return this._lineIconSelected.includes(d.name) ? this._lScale(d.name) : '#bfbfbf';\n            });\n    }\n\n    updateLineIconsClick(d: any) {\n        const id = this._lineIconSelected.indexOf(d.name);\n\n        if (id < 0) {\n            this._lineIconSelected.push(d.name);\n        } else {\n            this._lineIconSelected.splice(id, 1);\n        }\n\n        this._lScale.domain(this._lineIconSelected);\n\n        this._callbacks.lIcon(this._lineIconSelected);\n        this.highlightLineIcon();\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.css']\n})\nexport class ConfigComponent implements OnInit {\n  public colorControl = new FormControl('warn');\n  public fontSizeControl = new FormControl(12);\n\n  constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) { }\n\n  ngOnInit(): void {}\n\n  boroughSelectChanged(event) {\n    // cleans the line chart\n    this.events.vis.lineIconClicked.emit([]);\n    // cleans the levels\n    const levels = this.data.meta.levels;\n    let updates = levels\n        .filter(str => str !== 'borough')\n        .reduce((prev, key) => ({...prev, [key]: undefined}), {})\n\n    const previous = this.state.activeGeometryParameters;\n    this.state.activeGeometryParameters = Object.assign(previous, updates);\n\n    // cleans the filters\n    this.state.activeFilterParameters = {};\n    this.data.filters = {};\n\n    // changed value\n    const borough = {borough: event.value};\n    // emits the event\n    this.events.config.boroughSelectChanged.emit(borough);\n  }\n\n  polygonsSelectChanged(event) {\n    // cleans the line chart\n    this.events.vis.lineIconClicked.emit([]);\n\n    // cleans the levels\n    const levels = this.data.meta.levels;\n    let updates = levels\n        .filter(str => str !== 'borough')\n        .reduce((prev, key) => ({...prev, [key]: undefined}), {})\n\n    const previous = this.state.activeGeometryParameters;\n    this.state.activeGeometryParameters = Object.assign(previous, updates);\n\n    // cleans the filters\n    this.state.activeFilterParameters = {};\n    this.data.filters = {};\n\n    // changed value\n    const polygon = {polygon: event.value};\n    // emits the event\n    this.events.config.polygonSelectChanged.emit(polygon);\n  }\n\n  navigationSelectChanged(event) {\n    // cleans the line chart\n    this.events.vis.lineIconClicked.emit([]);\n\n    // cleans the levels\n    const levels = this.data.meta.levels;\n    let updates = levels\n        .filter(str => str !== 'borough')\n        .reduce((prev, key) => ({...prev, [key]: undefined}), {})\n\n    const previous = this.state.activeGeometryParameters;\n    this.state.activeGeometryParameters = Object.assign(previous, updates);\n\n    // cleans the filters\n    this.state.activeFilterParameters = {};\n    this.data.filters = {};\n\n    // changed value\n    const navigation = {navigation: event.value};\n    // emits the event\n    this.events.config.navigationSelectChanged.emit(navigation);\n\n  }\n\n  mapModeSelectChanged(event) {\n    // changed value\n    const mode = {mode: event.value};\n\n    // emits the event\n    this.events.config.modeSelectChanged.emit(mode);\n  }\n}\n","<div class=\"widget top submenu\" [style.opacity]=\"this.state.configActive ? 100 : 0\"\n  [style.z-index]=\"this.state.configActive ? 2 : -1\">\n  <form class=\"options\" [style.fontSize.px]=\"fontSizeControl.value\">\n    <mat-form-field [color]=\"colorControl.value\">\n      <mat-label>Borough</mat-label>\n      <mat-select [value]=\"this.state.activeConfigParameters.borough\"\n        (selectionChange)=\"this.boroughSelectChanged($event)\">\n        <mat-option *ngFor=\"let boro of this.data.meta.boroughs\" [value]=\"boro\">\n          {{boro.toUpperCase()}}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <mat-form-field [color]=\"colorControl.value\">\n      <mat-label>Polygons</mat-label>\n      <mat-select [value]=\"this.state.activeConfigParameters.polygon\"\n        (selectionChange)=\"this.polygonsSelectChanged($event)\">\n        <mat-option *ngFor=\"let poly of this.data.meta.polygons\" [value]=\"poly\">\n          {{poly.toUpperCase()}}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <mat-form-field [color]=\"colorControl.value\">\n      <mat-label>Navigation</mat-label>\n      <mat-select [value]=\"this.state.activeConfigParameters.navigation\"\n        (selectionChange)=\"this.navigationSelectChanged($event)\">\n        <mat-option *ngFor=\"let nav of this.data.meta.navigation\" [value]=\"nav\">\n          {{nav.toUpperCase()}}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <mat-form-field [color]=\"colorControl.value\">\n      <mat-label>Map mode</mat-label>\n      <mat-select [value]=\"this.state.activeConfigParameters.mode\"\n        (selectionChange)=\"this.mapModeSelectChanged($event)\">\n        <mat-option *ngFor=\"let mode of this.data.meta.modes\" [value]=\"mode\">\n          {{mode.toUpperCase()}}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </form>\n\n</div>","import { Component, OnInit, ViewChildren, QueryList, ElementRef, AfterViewInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\nimport { Bar } from 'src/app/charts/bar';\nimport { empty } from 'rxjs';\n\n@Component({\n  selector: 'app-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.css']\n})\nexport class FilterComponent implements OnInit, AfterViewInit {\n  public colorControl = new FormControl('warn');\n  public fontSizeControl = new FormControl(12);\n  public filterExp = '';\n\n  @ViewChildren('filter') _filtersDivs: QueryList<ElementRef>;\n  private _filters: any = {};\n\n  constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) {}\n\n  ngOnInit(): void {\n    this.subscribeDataEvents();\n  }\n\n  ngAfterViewInit(): void {\n    this._filtersDivs.changes.subscribe(this.renderFilters.bind(this));\n  }\n\n  subscribeDataEvents() {\n    this.events.data.updateFilters.subscribe(this.renderFilters.bind(this));\n  }\n\n  renderFilters(keepBrush: boolean) {\n    const keys = Object.keys(this.data.filters);\n\n    this._filtersDivs.forEach((el, divId) => {\n      const key = keys[divId];\n      if (!key) { return; }\n\n      const div = el.nativeElement;\n      const cbs = {\n        brush: this.brushChanged.bind(this)\n      };\n\n      const hist = new Bar(div, cbs, key);\n      this._filters[key] = hist;\n\n      const range = keepBrush ? this.state.activeFilterParameters[key].range || [] : [];\n\n      const id = this.data.filters[key].findIndex((obj) => {\n        return obj.bin === 'empty';\n      });\n      if (id>=0) {\n        this.data.filters[key].splice(id, 1);\n      }\n\n      const data = this.data.filters[key].filter((obj) => {\n        return obj.count > 0;\n      })\n\n      // runs\n      this._filters[key].setData(data, range);\n      this._filters[key].render();\n    });\n  }\n\n  // ---- Toolbar events\n\n  addFilter() {\n    const state = {\n      key: this.state.currentFilterId,\n      params: {\n        borough: this.state.activeConfigParameters.borough,\n        attribute: 'AREA',\n        category: 'RES'\n      }\n    };\n\n    this.addFilterExp(state.key);\n    this.events.filters.updated.emit(state);\n  }\n\n  addFilterExp(key) {\n    if (this.filterExp === '') {\n        this.filterExp = `${key}`;\n    } \n    else {\n        this.filterExp += ` and ${key}`;\n    }\n  }\n\n  updateSummary() {\n    this.state.activeConfigParameters.filterExp = this.filterExp;\n    this.events.filters.updateSummary.emit();\n  }\n\n  // ---- Filter events\n \n  delFilter(key: string) {\n    const state = {\n      key: key,\n      params: null\n    };\n\n    this.delFilterExp(key);\n    this.events.filters.updated.emit(state);\n  }\n\n  delFilterExp(key) {\n    let parts = this.filterExp.split(' ');\n    \n    let id = parts.indexOf(key);\n    if (id === 0) {\n        parts.splice(id, 2);\n    }\n    else {\n        parts.splice(id-1, 2);\n    }\n\n    this.filterExp = parts.join(' ')\n  }\n\n\n  attributeSelectChanged(key, event) {\n    const state = {\n      key,\n      params: { \n        attribute: event.value,\n        category: this.data.meta.attributes[event.value].categories[0]\n      }\n    }\n    this.events.filters.updated.emit(state);\n  }\n\n  getAttributes() {\n    const filtered = Object.keys(this.data.meta.attributes).filter(key => {\n      const obj = this.data.meta.attributes[key];\n      return obj.histogramAlloed;\n    });\n\n    return filtered;\n  }\n\n  categorySelectChanged(key, event) {\n    const state = {\n      key,\n      params: { category: event.value }\n    }\n    this.events.filters.updated.emit(state);\n  }\n\n  getCategory(key) {\n    const attr = this.state.activeFilterParameters[key].attribute;\n\n    if (this.state.activeFilterParameters[key].attribute) {\n      return this.data.meta.attributes[attr].categories;\n    }\n    return [];\n  }\n\n  // ----- Bar chart events\n\n  brushChanged(key, event) {\n    const state = {\n      key,\n      params: { range: event.value }\n    }\n    this.events.filters.brushed.emit(state);\n  }\n}\n","<div class=\"widget top left\" [style.opacity]=\"this.state.matrixActive && this.state.filterActive ? 100 : 0\"\n    [style.z-index]=\"this.state.matrixActive && this.state.filterActive ? 2 : -1\">\n\n    <div class=\"filtersContainer\">\n        <div *ngFor=\"let hist of this.data.filters | keyvalue\" class=\"filter\">\n            <mat-toolbar class=\"centered mat-toolbar-top\">\n                <span style=\"margin-right: 20px;\">{{hist.key}}</span>\n                <form class=\"options\" [style.fontSize.px]=\"fontSizeControl.value\">\n\n                    <mat-form-field [color]=\"colorControl.value\">\n                        <mat-label>Attributes</mat-label>\n                        <mat-select [value]=\"this.state.activeFilterParameters[hist.key].attribute\"\n                            (selectionChange)=\"this.attributeSelectChanged(hist.key, $event)\">\n                            <mat-option *ngFor=\"let attr of this.getAttributes()\" [value]=\"attr\">\n                                {{attr.toUpperCase()}}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n\n                    <mat-form-field [color]=\"colorControl.value\"\n                        *ngIf=\"this.state.activeFilterParameters[hist.key].attribute !== 'LANDUSE' && this.state.activeFilterParameters[hist.key].attribute !== 'SPDIST1'\">\n                        <mat-label>Categories</mat-label>\n                        <mat-select [value]=\"this.state.activeFilterParameters[hist.key].category\"\n                            (selectionChange)=\"this.categorySelectChanged(hist.key, $event)\">\n                            <mat-option *ngFor=\"let cat of this.getCategory(hist.key)\" [value]=\"cat\">\n                                {{cat.toUpperCase()}}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n\n                </form>\n\n                <span class=\"spacer\"></span>\n\n                <button mat-icon-button (click)=\"this.delFilter(hist.key)\">\n                    <mat-icon [color]=\"'warn'\">cancel</mat-icon>\n                </button>\n            </mat-toolbar>\n            <div #filter class=\"bar-chart\"></div>\n        </div>\n    </div>\n\n    <mat-toolbar class=\"addToolbar mat-toolbar-bottom\">\n        <button mat-icon-button (click)=\"this.addFilter()\">\n            <mat-icon [color]=\"'primary'\">add_circle</mat-icon>\n        </button>\n\n        <span style=\"font-size: 12px !important; margin-right: 10px;\">Boolean expression:</span>\n        <input style=\"width: 25% !important;\" #currentFilterExp matInput [(ngModel)]=\"this.filterExp\">\n\n        <span class=\"spacer\"></span>\n\n        <button mat-icon-button (click)=\"this.updateSummary()\">\n            <mat-icon [color]=\"'primary'\">play_circle_filled</mat-icon>\n        </button>\n    </mat-toolbar>\n</div>","import { Component, OnInit } from '@angular/core';\n\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\n@Component({\n  selector: 'app-layers',\n  templateUrl: './layers.component.html',\n  styleUrls: ['./layers.component.css']\n})\nexport class LayersComponent implements OnInit {\n\n  constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) { }\n\n  ngOnInit(): void {}\n\n  layerSelected(layer: string) {\n\n    const state = {\n      layersActive: false,\n      activeLayer: this.state.activeLayer === layer ? '' : layer\n    }\n\n    this.events.layers.activeLayerChanged.emit(state);\n  }\n\n}\n","<div class=\"widget submenu\" [style.opacity]=\"this.state.layersActive ? 100 : 0\" [style.z-index]=\"this.state.layersActive ? 2 : -1\">\n\n  <button class=\"item\" mat-button (click)=\"this.layerSelected('pops')\">\n    <mat-icon [color]=\"this.state.activeLayer === 'pops' ? 'warn' : 'primary'\">location_on</mat-icon>\n    <div [ngClass]=\"{'label': true}\">POPs</div>\n  </button>\n\n\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\n\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\nimport { Cmap } from 'src/app/charts/cmap';\n\n@Component({\n  selector: 'app-legend',\n  templateUrl: './legend.component.html',\n  styleUrls: ['./legend.component.css']\n})\nexport class LegendComponent implements OnInit {\n  // matrix div\n  @ViewChild('matcolormap', {static: true}) _matColorMatDiv: ElementRef;\n  private _matColorMap: any;\n  // map div\n  @ViewChild('mapcolormap', {static: true}) _mapColorMapDiv: ElementRef;\n  private _mapColorMap: any;\n\n  constructor(public data: DataService, public events: EventsService,  public state: StateService) { }\n\n  ngOnInit(): void {\n    this.subscribeDataEvents();\n    this._matColorMap = new Cmap(this._matColorMatDiv.nativeElement);\n    this._mapColorMap = new Cmap(this._mapColorMapDiv.nativeElement);\n  }\n\n  subscribeDataEvents() {\n    this.events.data.updateVisMatrix.subscribe(this.loadCmap.bind(this, 'mat'));\n\n    this.events.data.updateMapGeometryAndFunction.subscribe(this.loadCmap.bind(this, 'map'));\n    this.events.data.updateMapFunction.subscribe(this.loadCmap.bind(this, 'map'));\n  }\n\n  loadCmap(visElement) {\n    const mode = visElement === 'mat' ? this.state.activeSummaryParameters.mode : this.state.activeConfigParameters.mode;\n    \n    // get the min and max values\n    let minMax = [];\n    if (mode === 'value') {\n      minMax = [+this.data.summary.min.toFixed(2), +this.data.summary.max.toFixed(2)];\n    } else {\n      minMax = [+this.data.summary.changeMin.toFixed(2), +this.data.summary.changeMax.toFixed(2)];\n    }\n\n    if (visElement === 'mat') {\n      this._matColorMap.setData(minMax);\n      this._matColorMap.render(); \n    } else {\n      this._mapColorMap.setData(minMax);\n      this._mapColorMap.render();\n    }\n  }\n\n  changeCMap() {\n      this.state.activeConfigParameters.cmapPercentiles = !this.state.activeConfigParameters.cmapPercentiles;\n      this.events.state.configCMapChanged.emit();\n    }\n}\n","<div class=\"widget bottom right\" [style.opacity]=\"this.state.legendActive ? 100 : 0\"\n[style.z-index]=\"this.state.legendActive ? 2 : -1\">\n  <div class=\"levels\">\n    <mat-toolbar class=\"mat-toolbar-top\">\n      <div class=\"centered\">\n        <p class=\"levels-p\">{{this.state.activeGeometryParameters.year}}</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeConfigParameters.borough}}</p>\n      </div>\n\n      <div class=\"centered\" *ngIf=\"this.state.activeGeometryParameters.neighborhood\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeGeometryParameters.neighborhood | slice:0:22}}{{this.state.activeGeometryParameters.neighborhood.length >= 22 ? '...' : ''}}</p>\n      </div>\n\n      <div class=\"centered\" *ngIf=\"this.state.activeGeometryParameters.block\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeGeometryParameters.block}}</p>\n      </div>\n\n      <span class=\"spacer\"></span>\n\n      <mat-checkbox class=\"check\" [color]='\"warn\"' (change)=\"this.changeCMap()\" >Percentile</mat-checkbox>\n    </mat-toolbar>\n  </div>\n  <div class=\"cmap\">\n    <div style=\"display: flex; padding-left: 16px;\">\n      <div class=\"centered\">\n        <p class=\"levels-p\">MAT</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.attribute.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\" *ngIf=\"this.state.activeSummaryParameters.category !== 'NONE'\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.category.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.metric.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.mode.toUpperCase()}}</p>\n      </div>\n    </div>\n    <div #matcolormap style=\"height: 70px\" class=\"bottom\"></div>\n  </div>\n\n\n  <div class=\"cmap\">\n    <div style=\"display: flex; padding-left: 16px;\">\n      <div class=\"centered\">\n        <p class=\"levels-p\">MAP</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.attribute.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\" *ngIf=\"this.state.activeSummaryParameters.category !== 'NONE'\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.category.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeSummaryParameters.metric.toUpperCase()}}</p>\n      </div>\n\n      <div class=\"centered\">\n        <mat-icon>keyboard_arrow_right</mat-icon>\n        <p class=\"levels-p\">{{this.state.activeConfigParameters.mode.toUpperCase()}}</p>\n      </div>\n    </div>\n    <div #mapcolormap style=\"height: 70px\" class=\"bottom\"></div>\n  </div>\n\n</div>","// angular imports\nimport { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\n\n// mapview imports\nimport { MapView } from 'src/app/mapview/mapview';\n\n// services\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\n@Component({\n  selector: 'app-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.css']\n})\nexport class MapComponent implements OnInit {\n  // map div\n  @ViewChild('mapView', {static: true}) _mapDiv: ElementRef;\n  // map view instance\n  protected _mapView: MapView = null;\n\n  // map component constructor\n  constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) { }\n\n  // initialization hook\n  async ngOnInit() {\n    // map callbacks\n    const callbacks = {\n      mouse: { mouseDown: this.highlightPoly.bind(this), },\n      key: {}\n    };\n\n    // cretes the map\n    this._mapView =  new MapView(this._mapDiv.nativeElement, callbacks);\n    await this._mapView.initLayers('index.json')\n\n    // subscribe events\n    this.subscribeDataEvents();\n    this.subscribeStateEvents();\n\n    // sinalizes that mapview is ready\n    this.events.map.initialized.emit();\n  }\n\n  // events handled by mapview\n  subscribeStateEvents() {\n    this.events.state.selectedPolygonChanged.subscribe(this.updateHighlightedPolygon.bind(this));\n    this.events.state.activeLayerChanged.subscribe(this.loadPopsLayer.bind(this));\n  }\n\n\n  // events handled by mapview\n  subscribeDataEvents() {\n    this.events.data.updateMapGeometryAndFunction.subscribe(this.loadLayerGeometryAndFunction.bind(this));\n    this.events.data.updateMapFunction.subscribe(this.loadLayerScalarField.bind(this));\n  }\n\n  async loadLayerGeometryAndFunction() {\n    await this.loadLayerGeometry();\n    await this.loadLayerScalarField();\n    // open the POPs layer\n    await this.loadPopsLayer();\n  }\n\n  async loadPopsLayer() {\n    // removes the previous loaded layer    \n    this._mapView.delLayer('pops');\n\n    // layer config\n    const config = {selectable: false, visible: this.state.activeLayer === 'pops'};\n    \n    // loads the payer\n    await this._mapView.addLayer('point', 'pops', this.data.layers['pops'], config);\n  }\n\n  // loads the polygon layer\n  async loadLayerGeometry() {\n    // removes the previous loaded layer    \n    this._mapView.delLayer('pluto');\n\n    // layer config\n    const config = {selectable: true};\n\n    // loads the payer\n    await this._mapView.addLayer('polygon', 'pluto', this.data.geometry, config);\n  }\n\n  // loads the scalar function\n  async loadLayerScalarField() {\n    const mode = this.state.activeConfigParameters.mode;\n    const year = this.state.activeGeometryParameters.year;\n    if (!year) { return; }\n\n    const feats = this.data.geometry.features;\n        \n    const values = this.data.summary[year].filter(obj => obj.isAlive);\n    values.sort((a, b) => a.name < b.name ? 1 : -1);\n\n    const func = [];\n    for (let nId = 0; nId < feats.length; nId++) {\n      const count = feats[nId].geometry.length;\n      const name = feats[nId].properties.name;\n\n      const pos = values.findIndex(obj => {\n        return obj.name === name;\n      });\n\n      let value = null;\n      if (pos >= 0) {\n        const current = values[pos];\n4\n        if ( !current.isAlive ) {\n            value = 'notAlive';\n        }\n        else if ( !current.isActive ) {\n            value = 'notActive';\n        }\n        else if ( mode === 'value' && !current.isValid) {\n            value = 'notValid';\n        }\n        else if ( mode === 'change' && !current.changeValid) {\n            value = 'notChange';\n        }\n        else {\n            value = current[mode];\n        }\n      }\n      func.push(...Array(count).fill(value));\n    } \n\n    let fMin = null, fMax = null;\n    if (mode === 'value') {\n      [fMin, fMax] = [this.data.summary.min, this.data.summary.max];\n    } \n    else {\n      [fMin, fMax] = [this.data.summary.changeMin, this.data.summary.changeMax];\n    }  \n\n    await this._mapView.updateLayerFunction('pluto', {func, fMin, fMax});\n  }\n\n  highlightPoly(polygon: string) {\n    let name = \"\";\n    const id = +polygon[0];\n\n    if (id >= 0) {\n      name = this.data.geometry.features[id].properties.name;\n    }\n\n    this.events.map.polyPicked.emit({name, origin: 'map'});\n  }\n\n  updateHighlightedPolygon(origin: string) {\n    if (origin === 'vis') {\n      const id = this.data.geometry.features.findIndex(obj => obj.properties.name === this.state.selectedPolygon);\n      this._mapView.pick('pluto', id);\n    }\n  }\n\n}\n","<div #mapView class=\"full-screen\"></div>\n","// angular imports\nimport { Component, OnInit } from '@angular/core';\n\n// service imports\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\n@Component({\n  selector: 'app-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.css']\n})\nexport class MenuComponent implements OnInit {\n\n  public configActive = false;\n\n  constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) { }\n\n  ngOnInit(): void {}\n\n  buttonClicked(widget: string) {\n    if (widget === 'config') {\n      this.state.configActive = !this.state.configActive;\n    } else if (widget === 'layers') {\n      this.state.layersActive = !this.state.layersActive;\n    } else if (widget === 'matrix'){\n      this.state.matrixActive = !this.state.matrixActive;\n    }\n  }\n\n  toggleLegend() {\n    this.state.legendActive = !this.state.legendActive;\n  }\n \n}\n","<div class=\"menu top right\">\n\n  <button class=\"item\" mat-button (click)=\"this.buttonClicked('config')\">\n    <mat-icon [color]=\"this.state.configActive ? 'warn' : 'primary'\">settings</mat-icon>\n    <div [ngClass]=\"{'label': true}\">Config</div>\n  </button>\n\n  <button class=\"item\" mat-button (click)=\"this.buttonClicked('matrix')\">\n    <mat-icon [color]=\"this.state.matrixActive ? 'warn' : 'primary'\">apps</mat-icon>\n    <div [ngClass]=\"{'label': true}\">Matrix</div>\n  </button>\n\n  <button class=\"item\" mat-button (click)=\"this.buttonClicked('layers')\">\n    <mat-icon [color]=\"this.state.layersActive ? 'warn' : 'primary'\">layers</mat-icon>\n    <div [ngClass]=\"{'label': true}\">Layers</div>\n  </button>\n\n  <button class=\"toogle-button\" mat-button (click)=\"this.toggleLegend()\">\n    <mat-icon class=\"item\" [color]=\"this.state.legendActive ? 'warn' : 'primary'\">color_lens</mat-icon>\n    <div [ngClass]=\"{'label': true}\">Legend</div>\n  </button>\n\n</div>\n\n<app-config></app-config>\n<app-layers></app-layers>","import { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-tooltip',\n  templateUrl: './tooltip.component.html',\n  styleUrls: ['./tooltip.component.css']\n})\nexport class TooltipComponent implements OnInit {\n\n  @Input() isActive: boolean;\n  @Input() top: number;\n  @Input() left: number;\n  @Input() info: any;\n \n  constructor() { }\n\n  ngOnInit(): void {}\n\n  tooltipContent() {\n    if (!this.info.data) return '';\n    \n    if( !this.info.data.isAlive ) {\n        return 'Lot Not Alive';\n    }\n    else if ( !this.info.data.isActive ) {\n        return 'Inactive Lot';\n    }\n    else if ( this.info.mode === 'value' && !this.info.data.isValid ) {\n        return 'Invalid Value';\n    }\n    else if ( this.info.mode === 'change' && !this.info.data.changeValid ) {\n        return 'Invalid Change';\n    }\n    else {\n        return this.info.data[this.info.mode].toLocaleString(\n            undefined, { minimumFractionDigits: 2 }\n          );\n     }\n  }\n}\n","<div [class]=\"this.info.line === undefined ? 'widgetMat' : 'widgetLine'\" \n[style.opacity]=\"this.isActive ? 100 : 0\" [style.z-index]=\"this.isActive ? 5 : -1\"\n[style.left.px]=\"this.left\"\n[style.top.px]=\"this.top\">\n\n<mat-toolbar class=\"mat-toolbar-top header\" *ngIf=\"this.info.line === undefined\">\n  <div class=\"centered\">\n    <p class=\"levels-p\">{{this.info.year}}</p>\n  </div>\n\n  <div class=\"centered\">\n    <mat-icon>keyboard_arrow_right</mat-icon>\n    <p class=\"levels-p\">{{\n      this.info.data ?\n      (this.info.data.name | slice:0:22) : ''}}{{\n      this.info.data ?\n      (this.info.data.name.length >= 22 ? '...' : '') : ''}}\n    </p>\n  </div>\n</mat-toolbar>\n<div *ngIf=\"this.info.line === undefined\" style=\"width: 100%; height: calc(100% - 30px);\">\n  <div class=\"centered\">\n    <p class=\"levels-p\">{{this.tooltipContent()}}</p>\n  </div>\n</div>\n\n<mat-toolbar class=\"mat-toolbar-top header centered\" *ngIf=\"this.info.line\">\n  <div class=\"centered\">\n    <p class=\"levels-p\">{{this.info.line}}</p>\n  </div>\n</mat-toolbar>\n</div>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { ApiService } from 'src/app/services/api.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { EventsService } from 'src/app/services/events.service';\nimport { StateService } from 'src/app/services/state.service';\n\nimport { Matrix } from 'src/app/charts/matrix';\nimport { Line } from 'src/app/charts/line';\n\n@Component({\n    selector: 'app-vis',\n    templateUrl: './vis.component.html',\n    styleUrls: ['./vis.component.css']\n})\nexport class VisComponent implements OnInit {\n    public colorControl = new FormControl('warn');\n    public fontSizeControl = new FormControl(12);\n\n    public tooltip = {\n        show: false, top: 10,\n        left: 10, info: {}\n    };\n\n    // matrix div\n    @ViewChild('matrix', { static: true }) _matrixDiv: ElementRef;\n    private _matrix: any;\n\n    // line div\n    @ViewChild('line', { static: true }) _lineDiv: ElementRef;\n    private _line: any;\n\n    constructor(public api: ApiService, public data: DataService, public events: EventsService, public state: StateService) {\n    }\n\n    ngOnInit(): void {\n        this.subscribeDataEvents();\n        this.subscribeStateEvents();\n\n        const matDefaults = {\n            xLabel: this.state.activeGeometryParameters.year,\n            sIcon: 'name'\n        }\n        const matCallbacks = {\n            xLabel: this.yearLabelClicked.bind(this),\n\n            yLabel: this.polyLabelClicked.bind(this),\n            yHover: this.polyLabelHovered.bind(this),\n\n            sIcon: this.sortIconClicked.bind(this),\n            lIcon: this.lineIconClicked.bind(this),\n\n            rHover: this.polyRectHovered.bind(this),\n            svgOut: this.svgOut.bind(this)\n        };\n\n        this._matrix = new Matrix(this._matrixDiv.nativeElement, matCallbacks, matDefaults);\n\n        let attr = `${this.state.activeSummaryParameters.attribute} (${this.state.activeSummaryParameters.category})`.toLowerCase();\n        const lineDefaults = {\n            yLabel: this.state.activeSummaryParameters.mode === 'change' ? `${attr} value` : `${attr} change`\n        }\n        const lineCallbacks = {\n            lHover: this.lineLegendHovered.bind(this),\n            svgOut: this.svgOut.bind(this)\n        }\n        this._line = new Line(this._lineDiv.nativeElement, lineCallbacks, lineDefaults);\n    }\n\n    // ---- Component subscriptions\n\n    subscribeDataEvents() {\n        this.events.data.updateVisMatrix.subscribe(() => {\n            this.loadMatrix();\n            this.loadLine();\n        });\n    }\n\n    subscribeStateEvents() {\n        this.events.state.pageParametersChanged.subscribe(() => {\n            this.loadMatrix();\n            this.loadLine();\n        });\n\n        this.events.state.sortParametersChanged.subscribe(() => {\n            this.loadMatrix();\n            this.loadLine();\n        });\n\n        this.events.state.lineCurvesChanged.subscribe(this.loadLine.bind(this));\n\n        this.events.state.selectedPolygonChanged.subscribe(this.highlightPolyLabel.bind(this));\n    }\n\n    matrixSortFunction() {\n        if (this.state.activeSortParameters.sortBy === 'name') {\n            return (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        }\n\n        if (!isNaN(+this.state.activeSortParameters.sortBy)) {\n            return (a, b) => {\n                const mode = this.state.activeSummaryParameters.mode;\n\n                if (!a.isAlive || !a.isActive ) {\n                    return -1;\n                }\n\n                if (!b.isAlive || !b.isActive ) {\n                    return 1;\n                }\n\n                if (mode === 'value') {\n                    if (!a.isValid) {\n                        return -1;\n                    }\n\n                    if (!b.isValid) {\n                        return 1;\n                    }\n                }\n\n                if (mode === 'change') {\n                    if (!a.changeValid) {\n                        return -1;\n                    }\n\n                    if (!b.changeValid) {\n                        return 1;\n                    }\n                }\n\n                return a[mode] < b[mode] ? -1 : 1;\n            };\n        }\n    }\n\n    prepareMatrixData() {\n        const data = this.data.summary;\n        const mode = this.state.activeSummaryParameters.mode;\n\n        const page = this.state.activePageParameters.currentPage;\n        const size = this.state.activePageParameters.pageSize;\n\n        const years = Object.keys(data).filter(d => !isNaN(+d));\n\n        let sortYear = '';\n        if (isNaN(+this.state.activeSortParameters.sortBy)) {\n            sortYear = years[0];\n        } else {\n            sortYear = this.state.activeSortParameters.sortBy;\n        }\n\n        // original order\n        const original = {};\n        data[sortYear].forEach((d, i) => {\n            original[d.name] = i;\n        });\n\n        // copies the year to be sorted\n        let yearCopy = [...data[sortYear]];\n        yearCopy.sort(this.matrixSortFunction().bind(this));\n\n        // pagination\n        yearCopy = yearCopy.slice(page * size, (page + 1) * size);\n\n        // sort the other years\n        const matData = [];\n        for (let year of years) {\n            const obj = {\n                key: year,\n                value: yearCopy.map(\n                    d => {\n                        const pos = original[d.name]\n                        return data[year][pos];\n                    }\n                )\n            }\n\n            matData.push(obj);\n        }\n\n        // get the min and max values\n        let minMax = [];\n        if (mode === 'value') {\n            minMax = [+data.min.toFixed(2), +data.max.toFixed(2)];\n        } else {\n            minMax = [+data.changeMin.toFixed(2), +data.changeMax.toFixed(2)];\n        }\n        matData['minMax'] = minMax;\n\n        return matData;\n    }\n\n    loadMatrix() {\n        const mode = this.state.activeSummaryParameters.mode;\n        const line = this.state.activeLineChartCurves;\n        const sort = this.state.activeSortParameters.sortBy;\n        const click = !(this.state.activeLevel === 'neighborhood' && this.state.activeConfigParameters.navigation === 'skip blocks') &&\n            !(this.state.activeLevel === 'block' && this.state.activeConfigParameters.navigation === 'complete');\n\n        const data = this.prepareMatrixData();\n\n        this._matrix.setData(data, mode, line, sort, click);\n        this._matrix.render();\n    }\n\n    prepareLineData() {\n        const data = this.data.summary;\n        const years = Object.keys(data).filter(d => !isNaN(+d));\n        const mode = this.state.activeSummaryParameters.mode === 'change' ? 'value' : 'change';\n        const neighs = this.state.activeLineChartCurves;\n\n        const lineData = { minMax: [], lines: [] };\n\n        for (let name of neighs) {\n            const neighData = { name, data: [] };\n\n            for (let year of years) {\n                const current = data[year].find(obj => obj.name === name);\n\n                const value = current[mode];\n                const valid = current.isAlive && current.isActive && current.isValid;\n\n                neighData.data.push({ year, value, valid });\n            }\n\n            lineData.lines.push(neighData);\n        }\n\n        // get the min and max values\n        let minMax = [];\n        if (mode === 'value') {\n            minMax = [+data.min.toFixed(2), +data.max.toFixed(2)];\n        } else {\n            minMax = [+data.changeMin.toFixed(2), +data.changeMax.toFixed(2)];\n        }\n\n        lineData['minMax'] = minMax;\n        return { lineData, years };\n    }\n\n    loadLine() {\n        const { lineData, years } = this.prepareLineData();\n        let attr = `${this.state.activeSummaryParameters.attribute} (${this.state.activeSummaryParameters.category})`.toLowerCase();\n        let yLabel = this.state.activeSummaryParameters.mode === 'change' ? `${attr} value` : `${attr} change`;\n\n        this._line.setYLabel(yLabel);\n        this._line.setData(lineData, years, yLabel);\n        this._line.render();\n    }\n\n    // ---- Component menu events\n    yearStepSelectChanged(event) {\n        const yearStep = { yearStep: event.value }\n        this.events.vis.yearStepSelectChanged.emit(yearStep);\n    }\n\n    attributeSelectChanged(event) {\n        const attribute = {\n            attribute: event.value,\n            category: this.data.meta.attributes[event.value].categories[0],\n            metric: this.data.meta.attributes[event.value].metrics[0],\n        };\n        this.events.vis.attributeSelectChanged.emit(attribute);\n    }\n\n    categorySelectChanged(event) {\n        const metric = { category: event.value };\n        this.events.vis.categorySelectChanged.emit(metric);\n    }\n\n    getCategories() {\n        if (this.data.meta.attributes[this.state.activeSummaryParameters.attribute]) {\n            return this.data.meta.attributes[this.state.activeSummaryParameters.attribute].categories;\n        }\n        return [];\n    }\n\n    metricSelectChanged(event) {\n        const metric = { metric: event.value };\n        this.events.vis.metricSelectChanged.emit(metric);\n    }\n\n    getMetrics() {\n        if (this.data.meta.attributes[this.state.activeSummaryParameters.attribute]) {\n            return this.data.meta.attributes[this.state.activeSummaryParameters.attribute].metrics;\n        }\n        return [];\n    }\n\n    modeSelectChanged(event) {\n        const mode = { mode: event.value };\n        this.events.vis.modeSelectChanged.emit(mode);\n    }\n\n    sortSelectChanged(event) {\n        const sort = { sortBy: event.value };\n        this.events.vis.sortBySelectChanged.emit(sort);\n    }\n    // ---- Component matrix events\n\n    yearLabelClicked(value) {\n        const year = { year: value };\n        this.events.vis.yearLabelClicked.emit(year);\n    }\n\n    polyLabelHovered(value) {\n        const poly = { name: value, origin: 'vis' };\n        this.events.vis.polygonLabelHovered.emit(poly);\n    }\n\n    polyLabelClicked(value) {\n        // cleans the line chart\n        this.events.vis.lineIconClicked.emit([]);\n\n        if (this.state.activeLevel === 'borough') {\n            const neighborhood = { neighborhood: value };\n            this.events.vis.polygonLabelClicked.emit(neighborhood);\n        }\n        else if (this.state.activeLevel === 'neighborhood') {\n            const block = { block: value };\n            this.events.vis.polygonLabelClicked.emit(block);\n        }\n        else if (this.state.activeLevel === 'block') {\n            const lot = { lot: value };\n            this.events.vis.polygonLabelClicked.emit(lot);\n        }\n    }\n\n    highlightPolyLabel(origin: string) {\n        if (origin === 'map') {\n            this._matrix.setHighlight(this.state.selectedPolygon);\n            this._matrix.render();\n        }\n    }\n\n    navButtonClicked(level) {\n        // cleans the line chart\n        this.events.vis.lineIconClicked.emit([]);\n\n        const levels = this.data.meta.levels;\n\n        let updates = {};\n        if (level === 'borough') {\n            updates = levels\n                .filter(str => str !== 'borough')\n                .reduce((prev, key) => ({ ...prev, [key]: undefined }), {})\n        }\n        else if (level === 'neighborhood') {\n            updates = levels\n                .filter(str => str !== 'borough' && str !== 'neighborhood')\n                .reduce((prev, key) => ({ ...prev, [key]: undefined }), {})\n        }\n        else if (level === 'block') {\n            updates = levels\n                .filter(str => str !== 'borough' && str !== 'neighborhood' && str !== 'block')\n                .reduce((prev, key) => ({ ...prev, [key]: undefined }), {})\n        }\n\n        // emits the event\n        this.events.vis.navButtonClicked.emit(updates);\n    }\n\n    activeFilters() {\n        this.state.filterActive = !this.state.filterActive;\n    }\n\n    getFilterIconColor() {\n        return this.state.filterActive ? 'warn' : (Object.keys(this.state.activeFilterParameters).length === 0 ? 'primary' : 'accent');\n    }\n\n    navPageChanged(direction: string) {\n        let current = this.state.activePageParameters.currentPage;\n        let total = this.state.activePageParameters.totalPages - 1;\n\n        if (direction === 'left' && current > 0) {\n            current -= 1;\n        }\n        else if (direction === 'right' && current < total) {\n            current += 1;\n        }\n        else if (direction === 'first') {\n            current = 0;\n        }\n        else if (direction === 'last') {\n            current = total;\n        }\n        else if (!isNaN(+direction)){\n\n            let val = +direction - 1;\n            \n            if (val < 0) { val = 0; }\n            if (val > total) { val = total; }\n\n            current = val;\n        }\n\n        const page = { currentPage: current }\n        this.events.vis.navPageChanged.emit(page)\n    }\n\n    sortIconClicked(value) {\n        const sort = { sortBy: value };\n        this.events.vis.sortIconClicked.emit(sort);\n    }\n\n    lineIconClicked(value) {\n        const state = value;\n        this.events.vis.lineIconClicked.emit(state);\n    }\n\n    lineLegendHovered(value) {\n        this.tooltip = {\n            show: true,\n            left: value.mouse[0],\n            top: value.mouse[1],\n            info: { line: value.line }\n        }\n    }\n\n    polyRectHovered(value) {\n        const mode = this.state.activeSummaryParameters.mode;\n\n        this.tooltip = {\n            show: true,\n            left: value.mouse[0],\n            top: value.mouse[1],\n            info: { year: value.year, mode, data: value.data }\n        };\n    }\n\n    svgOut() {\n        this.tooltip.show = false;\n        this.tooltip.info = {};\n    }\n}","<div class=\"widget top left\" [style.opacity]=\"this.state.matrixActive ? 100 : 0\"\n    [style.z-index]=\"this.state.matrixActive ? 2 : -1\">\n    <mat-toolbar class=\"centered mat-toolbar-top\">\n        <form class=\"options\" [style.fontSize.px]=\"fontSizeControl.value\">\n\n            <mat-form-field id='year' [color]=\"colorControl.value\">\n                <mat-label>Year Step</mat-label>\n                <mat-select [value]=\"''+this.state.activeSummaryParameters.yearStep\"\n                    (selectionChange)=\"this.yearStepSelectChanged($event)\">\n                    <mat-option *ngFor=\"let step of this.data.meta.yearStep\" [value]=\"step\">\n                        {{step}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <mat-form-field [color]=\"colorControl.value\">\n                <mat-label>Attributes</mat-label>\n                <mat-select [value]=\"this.state.activeSummaryParameters.attribute\"\n                    (selectionChange)=\"this.attributeSelectChanged($event)\">\n                    <mat-option *ngFor=\"let attr of this.data.meta.attributes | keyvalue\" [value]=\"attr.key\">\n                        {{attr.key.toUpperCase()}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <mat-form-field [color]=\"colorControl.value\">\n                <mat-label>Categories</mat-label>\n                <mat-select [value]=\"this.state.activeSummaryParameters.category\"\n                    (selectionChange)=\"this.categorySelectChanged($event)\">\n                    <mat-option *ngFor=\"let cat of this.getCategories()\" [value]=\"cat\" [disabled]=\"cat === 'NONE'\">\n                        {{cat.toUpperCase()}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <mat-form-field [color]=\"colorControl.value\">\n                <mat-label>Metrics</mat-label>\n                <mat-select [value]=\"this.state.activeSummaryParameters.metric\"\n                    (selectionChange)=\"this.metricSelectChanged($event)\">\n                    <mat-option *ngFor=\"let met of this.getMetrics()\" [value]=\"met\">\n                        {{met.toUpperCase()}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <mat-form-field [color]=\"colorControl.value\">\n                <mat-label>Mode</mat-label>\n                <mat-select [value]=\"this.state.activeSummaryParameters.mode\"\n                    (selectionChange)=\"this.modeSelectChanged($event)\">\n                    <mat-option *ngFor=\"let mode of this.data.meta.modes\" [value]=\"mode\">\n                        {{mode === 'change' ? 'VALUE' : 'CHANGE'}} & {{mode.toUpperCase()}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n            <mat-form-field [color]=\"colorControl.value\">\n                <mat-label>Sort Matrix by</mat-label>\n                <mat-select\n                    [value]=\"+this.state.activeSortParameters.sortBy ? 'year' : this.state.activeSortParameters.sortBy\"\n                    (selectionChange)=\"this.sortSelectChanged($event)\">\n                    <mat-option *ngFor=\"let sort of this.data.meta.sortBy\" [value]=\"sort\" [disabled]=\"sort === 'year'\">\n                        {{sort.toUpperCase()}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n\n        </form>\n    </mat-toolbar>\n\n    <div class=\"line\" #line></div>\n\n    <mat-divider></mat-divider>\n\n    <div class=\"matrix\" #matrix></div>\n\n    <mat-toolbar class=\"navigation mat-toolbar-bottom\">\n        <button class=\"item\" mat-button (click)=\"this.activeFilters()\">\n            <mat-icon [color]=\"this.getFilterIconColor()\">view_agenda</mat-icon>\n        </button>\n\n        <button mat-button [disabled]=\"this.state.activeLevel === 'borough'\"\n            (click)=\"this.navButtonClicked('borough')\">{{this.state.activeConfigParameters.borough}}</button>\n\n        <div class=\"centered\" *ngIf=\"this.state.activeGeometryParameters.neighborhood\">\n            <mat-icon>keyboard_arrow_right</mat-icon>\n            <button mat-button [disabled]=\"this.state.activeLevel === 'neighborhood'\"\n                (click)=\"this.navButtonClicked('neighborhood')\">{{this.state.activeGeometryParameters.neighborhood | slice:0:22}}{{this.state.activeGeometryParameters.neighborhood.length >= 22 ? '...' : ''}}</button>\n        </div>\n\n        <div class=\"centered\" *ngIf=\"this.state.activeGeometryParameters.block\">\n            <mat-icon>keyboard_arrow_right</mat-icon>\n            <button mat-button [disabled]=\"this.state.activeLevel === 'block'\"\n                (click)=\"this.navButtonClicked('block')\">{{this.state.activeGeometryParameters.block}}</button>\n        </div>\n\n        <span class=\"navigation-spacer\"></span>\n\n        <div class=\"centered\">\n            <div class=\"navigation-label\">Page</div>\n            <input class=\"current\" #currentPage matInput [value]=\"this.state.activePageParameters.currentPage + 1\" (change)=\"this.navPageChanged(currentPage.value)\">\n            <div class=\"navigation-label\">\n                /{{\n                   this.state.activePageParameters.totalPages\n                 }}\n            </div>\n            <button mat-icon-button aria-label=\"Left\" (click)=\"this.navPageChanged('first')\"\n                [disabled]=\"this.state.activePageParameters.currentPage === 0\">\n                <mat-icon>first_page</mat-icon>\n            </button>\n            <button mat-icon-button aria-label=\"Left\" (click)=\"this.navPageChanged('left')\"\n                [disabled]=\"this.state.activePageParameters.currentPage === 0\">\n                <mat-icon>keyboard_arrow_left</mat-icon>\n            </button>\n            <button mat-icon-button aria-label=\"Right\" (click)=\"this.navPageChanged('right')\"\n                [disabled]=\"this.state.activePageParameters.currentPage === this.state.activePageParameters.totalPages-1\">\n                <mat-icon>keyboard_arrow_right</mat-icon>\n            </button>\n            <button mat-icon-button aria-label=\"Right\" (click)=\"this.navPageChanged('last')\"\n                [disabled]=\"this.state.activePageParameters.currentPage === this.state.activePageParameters.totalPages-1\">\n                <mat-icon>last_page</mat-icon>\n            </button>\n        </div>\n    </mat-toolbar>\n</div>\n\n<app-tooltip [isActive]=\"this.tooltip.show\" [top]=\"this.tooltip.top\" [left]=\"this.tooltip.left\"\n    [info]=\"this.tooltip.info\">\n</app-tooltip>","/// <reference types=\"@types/webgl2\" />\n\nimport { Layer } from './layer';\n\nimport { DataApi } from './data-api';\nimport { DataLoader } from './data-loader';\n\nimport { vec3 } from 'gl-matrix';\n\nexport class BuildingLayer extends Layer {\n  // number of coordinates per vertex\n  protected static COORDS = 3;\n  // number of shaders\n  protected static N_SHADER = 2;\n\n  // primitive Ids\n  protected _features: any = {};\n\n  // OpenGL data buffer\n  protected _glPositionBuffer: WebGLBuffer = null;\n  protected _glIndexBuffer: WebGLBuffer = null;\n  protected _glBuildingIdBuffer: WebGLBuffer = null;\n\n  // shader attribute id\n  protected _positionId = -1;\n  protected _buildingIdId = -1;\n\n  // uniforms\n  protected _uModelViewMatrixId: WebGLUniformLocation = -1;\n  protected _uProjectionMatrixId: WebGLUniformLocation = -1;\n  protected _uWorldOrigin: WebGLUniformLocation = -1;\n  protected _uGroundRes: WebGLUniformLocation = -1;\n  protected _uEye: WebGLUniformLocation = -1;\n\n  // highlighted building ID id\n  protected _highlight = -1;\n\n  // FBO for edge detection\n  protected _fboWidth = -1;\n  protected _fboHeight = -1;\n  protected _fbo: WebGLFramebuffer = null;\n  protected _readfbo: WebGLFramebuffer = null;\n  protected _normalTexture: WebGLTexture = null;\n  protected _depthTexture: WebGLTexture = null;\n  protected _positionTexture: WebGLTexture = null;\n  protected _idTexture: WebGLTexture = null;\n\n  /**\n   * The Vector Layer constructor\n   * @param {string} id the layer id\n   */\n  constructor(id: string) {\n    super(id);\n  }\n\n  /**\n   * Shader load signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  async loadShaders(glContext: WebGL2RenderingContext) {\n    // load the required shaders\n    for (let id = 0; id < BuildingLayer.N_SHADER; id++) {\n      // shaders url\n      const vertUrl = `assets/shaders/building(${id}).vert`;\n      const fragUrl = `assets/shaders/building(${id}).frag`;\n\n      // Vertex shader program\n      const vsShader = await DataLoader.getTextData(vertUrl);\n      // Fragment shader program\n      const fsShader = await DataLoader.getTextData(fragUrl);\n\n      // load all shaders\n      this.initShaderProgram(vsShader, fsShader, glContext);\n    }\n\n    // uniforms definition\n    this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uModelViewMatrix');\n    this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uProjectionMatrix');\n    this._uWorldOrigin = glContext.getUniformLocation(this._shaderProgram[0], 'uWorldOrigin');\n    this._uGroundRes = glContext.getUniformLocation(this._shaderProgram[0], 'uGroundRes');\n    this._uEye = glContext.getUniformLocation(this._shaderProgram[0], 'uEye');\n\n    this._positionId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPos');\n    this._buildingIdId = glContext.getAttribLocation(this._shaderProgram[0], 'buildingId');\n\n    // load message\n    console.log(`#${BuildingLayer.N_SHADER} shaders successfully loaded for layer ${this._layerId}.`);\n  }\n\n  /**\n   * Data update signature\n   * @returns {Promise<any>} The load data promise\n   */\n  async updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n    // gets the feature of index id\n    data = await DataApi.getLayerFeature(this._layerId);\n\n    // new feature found\n    this._features = { 'position': [], 'ids': [], 'index': [] };\n\n    // iterates over the geometries\n    for (const feature of data.features) {\n      this._features['position'] = feature.geometry.coordinates;\n      this._features['ids'] = feature.geometry.ids;\n      this._features['index'] = feature.geometry.indices;\n    }\n\n    // creates the buffer\n    this.createBuffers(glContext);\n    // SSAO noise\n    this.generateNoise(glContext);\n  }\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {number} x Mouse x position\n   * @param {number} y Mouse y position\n   */\n  pick(glContext: WebGL2RenderingContext, x: number, y: number) {\n    glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._readfbo);\n\n    const result = new Float32Array(4);\n    glContext.readPixels(x, y, 1, 1, glContext.RGBA, glContext.FLOAT, result);\n\n    if (result[0] > 0) {\n      this._highlight = result[0];\n    }\n\n    glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n  }\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  render(glContext: WebGL2RenderingContext) {\n    // invalid layers\n    if (\n      this._shaderProgram.length === 0 ||\n      this._shaderProgram[0] === null ||\n      this._shaderProgram[1] === null ||\n      this._glPositionBuffer === null ||\n      this._glIndexBuffer === null ||\n      this._positionId < 0\n    ) {\n      return;\n    }\n    // FBO setup\n    this.setupFBO(glContext);\n\n    // enables the depth test\n    glContext.enable(glContext.DEPTH_TEST);\n    glContext.depthFunc(glContext.LESS);\n\n    // Picking\n    glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._fbo);\n    this.renderBuildings(glContext);\n    glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n\n    // SSAO render\n    this.renderSSAO(glContext);\n    // disables the depth buffer\n    glContext.disable(glContext.DEPTH_TEST);\n  }\n\n  /**\n   * Render the buildings for picking\n   * @param glContext\n   */\n  protected renderBuildings(glContext: WebGL2RenderingContext) {\n    // binds the shader program\n    glContext.useProgram(this._shaderProgram[0]);\n\n    // send matrices\n    glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n    glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n\n    // send world origin\n    const worldOrigin = this._camera.getWorldOrigin();\n    glContext.uniform2f(this._uWorldOrigin, worldOrigin[0], worldOrigin[1]);\n\n    // send eye and ground resolution\n    const eye = this._camera.getEye();\n    const gres = this._camera.getGroundResolution();\n    glContext.uniform1f(this._uGroundRes, gres);\n    glContext.uniform3f(this._uEye, eye[0], eye[1], eye[2]);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    glContext.vertexAttribPointer(this._positionId, BuildingLayer.COORDS, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._positionId);\n\n    // binds the buildings id buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glBuildingIdBuffer);\n    glContext.vertexAttribPointer(this._buildingIdId, 1, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._buildingIdId);\n\n    glContext.clearColor(0.0, 0.0, 0.0, 1.0);\n    // tslint:disable-next-line:no-bitwise\n    glContext.clear(glContext.COLOR_BUFFER_BIT | glContext.DEPTH_BUFFER_BIT);\n\n    // Tell WebGL which indices to use to index the vertices\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n    // draw the geometry\n    glContext.drawElements(glContext.TRIANGLES, this._features['index'].length, glContext.UNSIGNED_INT, 0);\n  }\n\n\n  /**\n   * Render the buildings using SSAO\n   * @param glContext\n   */\n  protected renderSSAO(glContext: WebGL2RenderingContext) {\n    glContext.enable(glContext.BLEND);\n    glContext.blendFunc(glContext.SRC_ALPHA, glContext.ONE_MINUS_SRC_ALPHA);\n\n    glContext.useProgram(this._shaderProgram[1]);\n\n    const normalLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'normalTex');\n    const positionLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'positionTex');\n    const IDLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'IDTex');\n    const depthLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'depthTex');\n    const matModelView: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'matModelView');\n    const uProjectionMatrix: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'uProjectionMatrix');\n    const highlightId: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'highlightId');\n\n    glContext.uniformMatrix4fv(matModelView, false, this._camera.getViewMatrix());\n    glContext.uniformMatrix4fv(uProjectionMatrix, false, this._camera.getProjectionMatrix());\n    glContext.uniform1f(highlightId, this._highlight);\n\n    glContext.activeTexture(glContext.TEXTURE0);\n    glContext.bindTexture(glContext.TEXTURE_2D, this._normalTexture);\n    glContext.uniform1i(normalLocation, 0);\n\n    glContext.activeTexture(glContext.TEXTURE1);\n    glContext.bindTexture(glContext.TEXTURE_2D, this._positionTexture);\n    glContext.uniform1i(positionLocation, 1);\n\n    glContext.activeTexture(glContext.TEXTURE2);\n    glContext.bindTexture(glContext.TEXTURE_2D, this._idTexture);\n    glContext.uniform1i(IDLocation, 2);\n\n    glContext.activeTexture(glContext.TEXTURE3);\n    glContext.bindTexture(glContext.TEXTURE_2D, this._depthTexture);\n    glContext.uniform1i(depthLocation, 3);\n\n    glContext.drawArrays(glContext.TRIANGLE_STRIP, 0, 4);\n    glContext.disable(glContext.BLEND);\n  }\n\n  /**\n   * setup FBO used for edge detection\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected setupFBO(glContext: WebGL2RenderingContext) {\n    if (this._fbo == null || this._readfbo == null) {\n      // creates the buffers\n      this._fbo = glContext.createFramebuffer();\n      this._readfbo = glContext.createFramebuffer();\n      this._depthTexture = glContext.createTexture();\n      this._normalTexture = glContext.createTexture();\n      this._positionTexture = glContext.createTexture();\n      this._idTexture = glContext.createTexture();\n\n      // check the availability of float buffers\n      const ext = glContext.getExtension('EXT_color_buffer_float');\n      if (!ext) {\n        console.error('float buffer extension not supported!!!');\n      }\n    }\n\n    // gets the viewport\n    const viewPort = this._camera.getViewportResolution();\n    if (this._fboWidth !== viewPort[0] || this._fboHeight !== viewPort[1]) {\n      // update FBO size\n      this._fboWidth = viewPort[0];\n      this._fboHeight = viewPort[1];\n\n      // normal texture\n      glContext.bindTexture(glContext.TEXTURE_2D, this._normalTexture);\n      glContext.texImage2D(\n        glContext.TEXTURE_2D, 0, glContext.RGBA32F,\n        this._fboWidth, this._fboHeight, 0, glContext.RGBA, glContext.FLOAT, null\n      );\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n      // position texture\n      glContext.bindTexture(glContext.TEXTURE_2D, this._positionTexture);\n      glContext.texImage2D(\n        glContext.TEXTURE_2D, 0, glContext.RGBA32F,\n        this._fboWidth, this._fboHeight, 0, glContext.RGBA, glContext.FLOAT, null\n      );\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n      // building ID texture\n      glContext.bindTexture(glContext.TEXTURE_2D, this._idTexture);\n      glContext.texImage2D(\n        glContext.TEXTURE_2D, 0, glContext.RGBA32F,\n        this._fboWidth, this._fboHeight, 0, glContext.RGBA, glContext.FLOAT, null\n      );\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n      // depth texture\n      glContext.bindTexture(glContext.TEXTURE_2D, this._depthTexture);\n      glContext.texImage2D(\n        glContext.TEXTURE_2D, 0, glContext.DEPTH_COMPONENT32F,\n        this._fboWidth, this._fboHeight, 0, glContext.DEPTH_COMPONENT, glContext.FLOAT, null\n      );\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n      glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n      // fbo setup\n      glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._fbo);\n      glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.DEPTH_ATTACHMENT, glContext.TEXTURE_2D, this._depthTexture, 0);\n      glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT0, glContext.TEXTURE_2D, this._normalTexture, 0);\n      glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT1, glContext.TEXTURE_2D, this._positionTexture, 0);\n      glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT2, glContext.TEXTURE_2D, this._idTexture, 0);\n      glContext.drawBuffers([glContext.COLOR_ATTACHMENT0, glContext.COLOR_ATTACHMENT1, glContext.COLOR_ATTACHMENT2]);\n\n      // readfbo setup\n      glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._readfbo);\n      glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT0, glContext.TEXTURE_2D, this._idTexture, 0);\n\n      // unbind fbos\n      glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n    }\n  }\n\n  /**\n   * Layer VBO creation signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createBuffers(glContext: WebGL2RenderingContext) {\n    // Create a buffer for the positions.\n    this._glPositionBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['position']), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the indices.\n    this._glIndexBuffer = glContext.createBuffer();\n    // Select the index buffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ELEMENT_ARRAY_BUFFER, new Uint32Array(this._features['index']), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the positions.\n    this._glBuildingIdBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glBuildingIdBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['ids']), glContext.STATIC_DRAW\n    );\n  }\n\n  protected generateNoise(glContext: WebGL2RenderingContext) {\n    glContext.useProgram(this._shaderProgram[1]);\n\n    const uNoiseLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'uNoise');\n    const uSamplesLocation: WebGLUniformLocation = glContext.getUniformLocation(this._shaderProgram[1], 'uSamples');\n\n    const samples = [];\n    const nSamples = 64;\n    for (let i = 0; i < nSamples; i++) {\n      const sample = vec3.fromValues(\n        Math.random() * 2.0 - 1.0,\n        Math.random() * 2.0 - 1.0,\n        Math.random()\n      );\n      vec3.normalize(sample, sample);\n      // weight samples towards center point\n      const scale = i / nSamples;\n      const s2 = scale * scale;\n      vec3.scale(sample, sample, 0.1 + 0.9 * s2);\n      samples.push(sample[0]);\n      samples.push(sample[1]);\n      samples.push(sample[2]);\n    }\n    glContext.uniform3fv(uSamplesLocation, samples, 0, nSamples * 3);\n\n    const noise = [];\n    const noiseSize = 256;\n    for (let i = 0; i < noiseSize; i++) {\n      const n = vec3.fromValues(\n        Math.random() * 2.0 - 1.0,\n        Math.random() * 2.0 - 1.0,\n        0.0\n      );\n      noise.push(n[0]);\n      noise.push(n[1]);\n      noise.push(n[2]);\n    }\n    glContext.uniform3fv(uNoiseLocation, noise, 0, noiseSize * 3);\n  }\n}\n","import { GeoUtils } from './geoutils';\nimport { vec3, mat4, vec2 } from 'gl-matrix';\nimport { CameraStatus } from './constants';\n\n/**\n * 3D Camera representation\n */\nexport class Camera {\n  // View parameters\n  protected wOrigin: vec2 = vec2.create();\n  protected wEye: vec3 = vec3.create();\n  protected wEyeDir: vec3 = vec3.create();\n  protected wEyeLength: number;\n  protected wLookAt: vec3 = vec3.create();\n  protected wUp: vec3 = vec3.create();\n  protected wNear: number;\n  protected wFar: number;\n\n  protected groundRes: number; // 1 unit in worldspace equals to {groundRes} meters in the z-axis\n\n  protected fovy = 45 * Math.PI / 180.0;\n\n  protected mProjectionMatrix: mat4 = mat4.create();\n  protected mViewMatrix: mat4 = mat4.create();\n  protected mModelMatrix: mat4 = mat4.create();\n\n  // camera status\n  private status: CameraStatus;\n\n  // view resolution\n  private viewportWidth: number;\n  private viewportHeight: number;\n\n  /**\n   * The Camera constructor\n   */\n  constructor(wx: number, wy: number, wz: number) {\n    this.groundRes = GeoUtils.groundResolution(wx, wy, 0);\n    // z-values start from here are in meters\n    this.wNear = 10 / this.groundRes;\n    this.wFar = 1e9 / this.groundRes;\n\n    // const projectedCenter = GeoUtils.latLng2Coord(wx, wy);\n    this.wOrigin = vec2.fromValues(wx, wy);\n    const projectedCenter = [0, 0];\n    this.wLookAt = vec3.fromValues(projectedCenter[0], projectedCenter[1], 0);\n    this.wEye = vec3.fromValues(projectedCenter[0], projectedCenter[1], 10000); // TODO: calculate the camera height instead of hardcoding\n    this.zScaling(1 / this.groundRes);\n    // meter is not longer used in the remaining code\n    this.wUp = vec3.fromValues(0, 1, 0);\n    //\n    this.status = CameraStatus.Camera3D;\n  }\n\n  getCameraStatus(): CameraStatus {\n    return this.status;\n  }\n\n  setCameraStatus(status: CameraStatus) {\n    this.status = status;\n    if (this.status === CameraStatus.Camera2D) {\n      // set parameters\n      this.wLookAt = vec3.fromValues(this.wEye[0], this.wEye[1], 0);\n      // meter is not longer used in the remaining code\n      this.wUp = vec3.fromValues(0, 1, 0);\n      this.wEyeDir = vec3.fromValues(0, 0, -1);\n      this.wEyeLength = vec3.length(this.wEyeDir);\n    }\n  }\n\n  getProjectionMatrix(): Float32Array | number[] {\n    return this.mProjectionMatrix;\n  }\n\n  getViewMatrix(): Float32Array | number[] {\n    return this.mViewMatrix;\n  }\n\n  getModelViewMatrix(): Float32Array | number[] {\n    const modelViewMatrix = mat4.mul(mat4.create(), this.mViewMatrix, this.mModelMatrix); // modelView matrix\n    return modelViewMatrix;\n  }\n\n  getWorldOrigin(): Float32Array | number[] {\n    return this.wOrigin;\n  }\n\n  getEye(): Float32Array | number[] {\n    return this.wEye;\n  }\n\n  getGroundResolution(): number {\n    return this.groundRes;\n  }\n\n  setViewportResolution(x: number, y: number) {\n    this.viewportWidth = x;\n    this.viewportHeight = y;\n  }\n\n  getViewportResolution(): number[] {\n    return [\n      this.viewportWidth,\n      this.viewportHeight\n    ];\n  }\n\n  updateEyeDirAndLen() {\n    vec3.sub(this.wEyeDir, this.wLookAt, this.wEye);\n    this.wEyeLength = vec3.length(this.wEyeDir);\n    vec3.normalize(this.wEyeDir, this.wEyeDir);\n  }\n\n  zScaling(scale: number) {\n    this.wEye[2] = this.wEye[2] * scale;\n    this.wLookAt[2] = this.wLookAt[2] * scale;\n\n    this.updateEyeDirAndLen();\n  }\n\n  zoom(delta: number, x: number, y: number) {\n    delta = delta < 0 ? 0.003 : -0.003;\n\n    const dir = this.screenCoordToWorldDir(x, y);\n    vec3.scaleAndAdd(this.wEye, this.wEye, dir, delta); // this.wEye += dir * delta;\n    vec3.scaleAndAdd(this.wLookAt, this.wEye, this.wEyeDir, this.wEyeLength); // this.wLookAt = this.wEye + this.wEyeDir * this.wEyeLength;\n  }\n\n  translate(dx: number, dy: number) {\n    const scale = this.wEye[2];\n    const X = vec3.create();\n    vec3.normalize(X, vec3.cross(X, this.wEyeDir, this.wUp));\n\n    // D = X * dx * scale + this.wUp * dy * scale;\n    const D = vec3.add(vec3.create(), vec3.scale(vec3.create(), X, dx * scale), vec3.scale(vec3.create(), this.wUp, dy * scale));\n    vec3.add(this.wEye, this.wEye, D);\n\n    vec3.scaleAndAdd(this.wLookAt, this.wEye, this.wEyeDir, this.wEyeLength); // this.wLookAt = this.wEye + this.wEyeDir * this.wEyeLength;\n  }\n\n  yaw(delta: number) {\n    vec3.rotateZ(this.wEyeDir, this.wEyeDir, vec3.fromValues(0, 0, 0), delta);\n    vec3.rotateZ(this.wUp, this.wUp, vec3.fromValues(0, 0, 0), delta);\n\n    vec3.scaleAndAdd(this.wLookAt, this.wEye, this.wEyeDir, this.wEyeLength); // this.wLookAt = this.wEye + this.wEyeDir * this.wEyeLength;\n  }\n\n  pitch(delta: number) {\n    delta = -delta;\n    // this.wEyeDir = this.wUp * sin(delta) + this.wEyeDir * cos(delta);\n    vec3.add(this.wEyeDir, vec3.scale(vec3.create(), this.wUp, Math.sin(delta)), vec3.scale(vec3.create(), this.wEyeDir, Math.cos(delta)));\n    vec3.normalize(this.wEyeDir, this.wEyeDir);\n\n    vec3.scaleAndAdd(this.wLookAt, this.wEye, this.wEyeDir, this.wEyeLength); // this.wLookAt = this.wEye + this.wEyeDir * this.wEyeLength;\n\n    vec3.cross(this.wUp, vec3.cross(vec3.create(), this.wEyeDir, this.wUp), this.wEyeDir);\n    vec3.normalize(this.wUp, this.wUp);\n  }\n\n  update() {\n    this.mModelMatrix = mat4.fromScaling(mat4.create(), vec3.fromValues(1, 1, 1 / this.groundRes)); // model matrix\n    mat4.lookAt(this.mViewMatrix, this.wEye, this.wLookAt, this.wUp); // view matrix\n    mat4.perspective(this.mProjectionMatrix, this.fovy, 1, this.wNear, this.wFar); // TODO: get the aspect ratio from canvas\n  }\n\n  screenCoordToWorldDir(x: number, y: number) {\n    const wRight = vec3.create();\n    vec3.normalize(wRight, vec3.cross(wRight, this.wEyeDir, this.wUp));\n\n    const upOffset = vec3.scale(vec3.create(), this.wUp, Math.tan(this.fovy / 2) * (y - 0.5) * 2);\n    const rightOffset = vec3.scale(vec3.create(), wRight, Math.tan(this.fovy / 2) * (x - 0.5) * 2);\n    const offset = vec3.add(vec3.create(), upOffset, rightOffset);\n    const dir = vec3.add(vec3.create(), this.wEyeDir, offset);\n    vec3.normalize(dir, dir);\n\n    return dir;\n  }\n\n  screenCoordToLatLng(x: number, y: number) {\n    const dir = this.screenCoordToWorldDir(x, y);\n\n    const t = -this.wEye[2] / dir[2];\n    if (t > 0) {\n      const intersectPoint = vec3.scaleAndAdd(vec3.create(), this.wEye, dir, t);\n      const originCoord = GeoUtils.latLng2Coord(this.wOrigin[0], this.wOrigin[1]);\n      const latLng = GeoUtils.coord2LatLng(intersectPoint[0] + originCoord[0], intersectPoint[1] + originCoord[1]);\n      console.log(latLng);\n      return latLng;\n    }\n    return null;\n  }\n}\n","import * as d3 from 'd3';\nimport { ColorMapType } from './constants';\n\nexport abstract class ColorMap {\n /**\n   * Color brewer sequential red\n   */\n  public static sequentialRed(reverse: boolean = false, size = 515): number [] {\n    const cscale = d3.scaleDiverging(d3.interpolateReds).domain([-1, 0, 1]);\n\n    const colors = [];\n\n    for (let id = 0 ; id < size; id++) {\n        const val  = -1 + id * 2 / (size - 1);\n        const color = cscale(val).match(/\\d+/g).map(d => +d);\n        \n        colors.push(...color);\n        colors.push(255)\n    }\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n  /**\n   * Color brewer sequential blue\n   */\n  public static sequentialBlue(reverse: boolean = false, size = 515): number [] {\n    const cscale = d3.scaleDiverging(d3.interpolateBlues).domain([-1, 0, 1]);\n\n    const colors = [];\n\n    for (let id = 0 ; id < size; id++) {\n        const val  = -1 + id * 2 / (size - 1);\n        const color = cscale(val).match(/\\d+/g).map(d => +d);\n        \n        colors.push(...color);\n        colors.push(255)\n    }\n\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n  /**\n   * Color brewer diverging blue and red\n   */\n  public static divergingRedYelBlue(reverse: boolean = false, size = 515): number [] {\n    const cscale = d3.scaleDiverging(d3.interpolateRdYlBu).domain([-1, 0, 1]);\n\n    const colors = [];\n\n    for (let id = 0 ; id < size; id++) {\n        const val  = -1 + id * 2 / (size - 1);\n        const color = cscale(val).match(/\\d+/g).map(d => +d);\n        \n        colors.push(...color);\n        colors.push(255)\n    }\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n\n  /**\n   * Color brewer diverging blue and red\n   */\n  public static divergingRedBlue(reverse: boolean = false, size = 515): number [] {\n    const cscale = d3.scaleDiverging(d3.interpolateRdBu).domain([-1, 0, 1]);\n\n    const colors = [];\n\n    for (let id = 0 ; id < size; id++) {\n        const val  = -1 + id * 2 / (size - 1);\n        const color = cscale(val).match(/\\d+/g).map(d => +d);\n        \n        colors.push(...color);\n        colors.push(255)\n    }\n\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n  /**\n   * Color brewer diverging blue and red\n   */\n  public static divergingGreenBrown(reverse: boolean = false, size = 515): number [] {\n    const cscale = d3.scaleDiverging(d3.interpolateGnBu).domain([-1, 0, 1]);\n\n    const colors = [];\n\n    for (let id = 0 ; id < size; id++) {\n        const val  = -1 + id * 2 / (size - 1);\n        const color = cscale(val).match(/\\d+/g).map(d => +d);\n        \n        colors.push(...color);\n        colors.push(255)\n    }\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n  /**\n   * Color brewer qualitative colors\n   */\n  public static qualitative(reverse: boolean = false): number [] {\n    // TODO: FIX\n\n    const colors = [\n      166, 206, 227, 255,\n      178, 223, 138, 255,\n      251, 154, 153, 255,\n      253, 191, 111, 255,\n      202, 178, 214, 255,\n       31, 120, 180, 255,\n       51, 160,  44, 255,\n      227,  26,  28, 255,\n      255, 127,   0, 255,\n    ];\n\n    if (reverse) {\n      return colors.reverse();\n    } else {\n      return colors;\n    }\n  }\n\n  public static getColorMap(color: ColorMapType, reverse: boolean = false): number[] {\n    switch (color) {\n      case ColorMapType.SEQUENTIAL_RED_MAP:\n      return ColorMap.sequentialRed(reverse);\n\n      case ColorMapType.SEQUENTIAL_BLUE_MAP:\n      return ColorMap.sequentialBlue(reverse);\n\n      case ColorMapType.DIVERGING_RED_BLUE_MAP:\n      return ColorMap.divergingRedBlue(reverse);\n\n      case ColorMapType.DIVERGING_RED_YEL_BLUE_MAP:\n      return ColorMap.divergingRedYelBlue(reverse);\n\n      case ColorMapType.DIVERGING_GREEN_BROWN_MAP:\n      return ColorMap.divergingGreenBrown(reverse);\n\n      case ColorMapType.QUALITATIVE_MAP:\n      return ColorMap.qualitative(reverse);\n\n      default:\n      return ColorMap.sequentialRed(reverse);\n    }\n  }\n\n  static computeScalarValue(val, min, max, neutral = 0) {\n    let sValue = null; \n\n    if ((min < neutral && max < neutral) || (min > neutral && max > neutral)) {\n      neutral = (min + max) * 0.5;\n    }    \n\n    if (val < neutral) {\n      sValue = (val - min) / (neutral - min) * 0.5; \n    } else {\n      sValue = 0.5 + (val - neutral) / (max - neutral) * 0.5;\n    }\n\n    if (val === neutral && neutral === min && min === max) {\n      return 0.5;\n    }\n\n    return sValue;\n  }\n\n}\n","/**\n * Layer types definition\n */\nexport class LayerTypes {\n  public static PHYSICAL_LAYER = 'physical';\n  public static BUILDING_LAYER = 'building';\n  public static POLYGON_LAYER = 'polygon';\n  public static HEATMAP_LAYER = 'heatmap';\n  public static POINT_LAYER = 'point';\n  public static LINE_LAYER = 'line';\n}\n\n/**\n * Colormap types definition\n */\nexport class ColorMapType {\n  public static SEQUENTIAL_RED_MAP = 'sequential_red';\n  public static SEQUENTIAL_BLUE_MAP = 'sequential_blue';\n  public static DIVERGING_RED_BLUE_MAP = 'diverging_blue_red';\n  public static DIVERGING_RED_YEL_BLUE_MAP = 'diverging_red_yellow_blue';\n  public static DIVERGING_GREEN_BROWN_MAP = 'diverging_green_brown';\n  public static QUALITATIVE_MAP = 'qualitative';\n}\n\n/**\n * Mapview interaction status\n */\nexport class MapViewStatus {\n  public static IDLE = 0;\n  public static DRAG = 1;\n}\n\n/**\n * Camera status\n */\nexport class CameraStatus {\n  public static Camera2D = 0;\n  public static Camera3D = 1;\n}\n","import { DataLoader } from './data-loader';\nimport { environment } from '../../environments/environment';\n\nexport abstract class DataApi {\n  /**\n   * Load all layers\n   * @returns {Promise<any>} The load index promise\n   */\n  static async getMapIndex(index): Promise<any> {\n    const url = `${environment.backend}/assets/${environment.folder}/${index}`;\n    console.log(url);\n\n    const datasets = await DataLoader.getJsonData(url);\n    return datasets;\n  }\n\n  /**\n   * Load the camera\n   * @returns {Promise<any>} The load camera promise\n   */\n  static async getCameraParameters(camera): Promise<any> {\n    const url = `${environment.backend}/assets/${environment.folder}/${camera}`;\n    console.log(url);\n\n    const params = await DataLoader.getJsonData(url);\n    return params;\n  }\n\n  /**\n   * Gets the layer data\n   * @param {Promise<any>} layerId the layer data\n   */\n  static async getLayerFeature(layerId: string): Promise<any> {\n    const url = `${environment.backend}/assets/${environment.folder}/${layerId}.json`;\n    console.log(url);\n\n    const feature = await DataLoader.getJsonData(url);\n    return feature;\n  }\n\n  /**\n   * Gets the layer function\n   * @param {Promise<any>} layerId the layer data\n   */\n  static async getLayerFunction(layerId: string): Promise<any> {\n    // TODO\n    const url = `${environment.backend}/assets/${environment.folder}/${layerId}.json`;\n    console.log(url);\n\n    const feature = await DataLoader.getJsonData(url);\n    return feature;\n  }\n}\n","export abstract class DataLoader {\n  /**\n   * Loads a json file\n   * @param {string} url json file url\n   * @returns {Promise<any>} The load json promise\n   */\n  static async getJsonData(url: string): Promise<any> {\n    // Return a new promise.\n    const response = await fetch(url);\n    const json = await response.json();\n\n    return json;\n  }\n\n  /**\n   * Loads a text file\n   * @param {string} url text file url\n   * @returns {Promise<string>} The load text promise\n   */\n  static async getTextData(url: string): Promise<string> {\n    // Return a new promise.\n    const response = await fetch(url);\n    const txt = await response.text();\n\n    return txt;\n  }\n}\n","\nexport abstract class GeoUtils {\n  /**\n   * Converts from lat, lng to world coordinates\n   * @param {number} latitude the latitude of the point\n   * @param {number} longitude the longitude of the point\n   * @returns {number[]} the point in world coordinates\n   */\n  public static latLng2Coord(latitude: number, longitude: number) {\n    const pi_4 = 12.56637061435917295385057353311801153678867759750042328389;\n    const pi_180 = 0.017453292519943295769236907684886127134428718885417254560;\n\n    const sinLatitude = Math.sin(latitude * pi_180);\n    const pixelY = 256.0 - ((0.5 - Math.log((1.0 + sinLatitude) / (1.0 - sinLatitude)) / (pi_4)) * 256.0);\n    const pixelX = ((longitude + 180.0) / 360.0) * 256.0;\n    return [pixelX, pixelY];\n  }\n\n  /**\n   * Converts from world coordinates to lat, lng\n   * @param {number} x the x coordinate of the point\n   * @param {number} y the y coordinate of the point\n   * @returns {number[]} the point in lat, lng\n   */\n  public static coord2LatLng(x: number, y: number) {\n    const pi_4 = 12.56637061435917295385057353311801153678867759750042328389;\n    const pi_180 = 0.017453292519943295769236907684886127134428718885417254560;\n\n    const longitude = ((x / 256.0) * 360.0) - 180.0;\n    let latitude = (256.0 - y) / 256.0;\n    latitude = Math.exp((0.5 - latitude) * pi_4);\n    latitude = (latitude - 1.0) / (1.0 + latitude);\n    latitude = Math.asin(latitude) / pi_180;\n    return [latitude, longitude];\n  }\n\n  /**\n   * Computes the ground resolution\n   * @param {number} lat the latitude value\n   * @param {number} lng the longitude value\n   * @param {number} zoom the zoom leevl\n   */\n  public static groundResolution(lat, lng, zoom) {\n    return Math.cos(lat * Math.PI / 180) * 6378137 * 2 * Math.PI / Math.pow(2, 8 + zoom);\n  }\n}\n","/// <reference types=\"@types/webgl2\" />\n\nimport { Layer } from './layer';\nimport { DataLoader } from './data-loader';\nimport { DataApi } from './data-api';\nimport { ColorMapType } from './constants';\nimport { ColorMap } from './colormap';\n\nimport { percentile } from 'stats-lite';\n\nexport class HeatmapLayer extends Layer {\n  // number of coordinates per vertex\n  protected static COORDS = 2;\n  // number of shaders\n  protected static N_SHADER = 1;\n\n  // primitive Ids\n  protected _features: any = {};\n\n  // OpenGL data buffer\n  protected _glPositionBuffer: WebGLBuffer = null;\n  protected _glTexCoordsBuffer: WebGLBuffer = null;\n  protected _glIndexBuffer: WebGLBuffer = null;\n\n  protected _glColorMapTex: WebGLTexture = null;\n  protected _glFunctionTex: WebGLTexture = null;\n\n  // function texture resolution\n  protected _functionResX = 0;\n  protected _functionResY = 0;\n\n  // shader attribute id\n  protected _positionId = -1;\n  protected _texCoordsId = -1;\n\n  // transformation uniforms\n  protected _uModelViewMatrixId: WebGLUniformLocation = -1;\n  protected _uProjectionMatrixId: WebGLUniformLocation = -1;\n  protected _uWorldOriginId: WebGLUniformLocation = -1;\n\n  // color map uniform\n  protected _uColorMapId: WebGLUniformLocation = -1;\n  protected _uFunctionId: WebGLUniformLocation = -1;\n\n  /**\n   * The Vector Layer constructor\n   * @param {string} id the layer id\n   */\n  constructor(id: string) {\n    super(id);\n    this._visible = false;\n  }\n\n  /**\n   * Shader load signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  async loadShaders(glContext: WebGL2RenderingContext) {\n    // load the shaders\n    for (let id = 0; id < HeatmapLayer.N_SHADER; id++) {\n      // shaders url\n      const vertUrl = `assets/shaders/heatmap(${id}).vert`;\n      const fragUrl = `assets/shaders/heatmap(${id}).frag`;\n\n      // Vertex shader program\n      const vsShader = await DataLoader.getTextData(vertUrl);\n      // Fragment shader program\n      const fsShader = await DataLoader.getTextData(fragUrl);\n\n      // load all shaders\n      this.initShaderProgram(vsShader, fsShader, glContext);\n    }\n\n    // vertex data on the shader\n    this._positionId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPos');\n    this._texCoordsId = glContext.getAttribLocation(this._shaderProgram[0], 'vertTexCoords');\n\n    // transformation uniforms on the shader\n    this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uModelViewMatrix');\n    this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uProjectionMatrix');\n    this._uWorldOriginId = glContext.getUniformLocation(this._shaderProgram[0], 'uWorldOrigin');\n\n    // colorMap texture\n    this._uColorMapId = glContext.getUniformLocation(this._shaderProgram[0], 'uColorMap');\n    this._uFunctionId = glContext.getUniformLocation(this._shaderProgram[0], 'uFunction');\n\n    // load message\n    console.log(`#${HeatmapLayer.N_SHADER} shaders successfully loaded for layer ${this._layerId}.`);\n  }\n\n  /**\n   * Data update signature\n   * @returns {Promise<any>} The load data promise\n   */\n  async updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n    if (data === null) {\n      // gets the feature of index id\n      data = await DataApi.getLayerFeature(this._layerId);\n    }\n\n    // new feature found\n    this._features = {'position': [], 'texCoords': [], 'scalar': [], 'index': []};\n\n    // grid corners\n    const corners = data.coordinates;\n    // quad geometry\n    const position = [\n      corners[0][0], corners[0][1],\n      corners[1][0], corners[0][1],\n      corners[1][0], corners[1][1],\n      corners[0][0], corners[1][1],\n    ];\n    // build the indices\n    const indices = [0, 1, 3, 1, 2, 3];\n    // texture coordinates\n    const texCoords = [\n      0, 0, 0, 1,\n      1, 1, 1, 0,\n    ];\n\n    // resolution\n    this._functionResX = data.resX;\n    this._functionResY = data.resY;\n\n    // add to the feature\n    this._features['position'] = position;\n    this._features['texCoords'] = texCoords;\n\n    // scalar function\n    const scalar = data.grid;\n    const noNull = scalar.filter(d => d > 0);\n\n    const min = percentile(noNull, 0.15);\n    const max = percentile(noNull, 0.95);\n\n    // add to the feature\n    this._features['scalar'] = scalar.map(val => {\n      return val ? Math.max(0, Math.min((val - min) / (max - min), 1)) : -1;\n    });\n\n    this._features['index'] = indices;\n\n    // creates the buffer\n    this.createBuffers(glContext);\n    // creates the scalar data vbo\n    this.createFunctionTexture(glContext);\n    // creates the color map\n    this.createColorMapTexture(glContext, ColorMapType.SEQUENTIAL_RED_MAP, false);\n  }\n\n  /**\n   * Function update signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  async updateFunction(glContext: WebGL2RenderingContext, data: any) {\n    // resolution\n    this._functionResX = data.resX;\n    this._functionResY = data.resY;\n\n    // scalar function\n    const scalar = data.grid;\n    const noNull = scalar.filter(d => d > 0);\n\n    const min = percentile(noNull, 0.15);\n    const max = percentile(noNull, 0.95);\n\n    // add to the feature\n    this._features['scalar'] = scalar.map(val => {\n      return val ? Math.max(0, Math.min((val - min) / (max - min), 1)) : -1;\n    });\n\n    // creates the scalar data vbo\n    this.createFunctionTexture(glContext);\n  }\n\n  /**\n   * Changes the color map\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} cMap Color Map\n   */\n  updateColorMap(glContext: WebGL2RenderingContext, cMap: ColorMapType) {\n    // creates the color map\n    this.createColorMapTexture(glContext, cMap, false);\n  }\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  render(glContext: WebGL2RenderingContext) {\n    // invalid layers\n    if (\n      this._shaderProgram.length === 0 ||\n      this._shaderProgram[0] === null ||\n      this._glPositionBuffer === null ||\n      this._glTexCoordsBuffer === null ||\n      this._glIndexBuffer === null ||\n      this._glColorMapTex === null ||\n      this._glFunctionTex === null ||\n      this._positionId < 0 ||\n      this._texCoordsId < 0\n    ) {\n      return;\n    }\n\n    // sends the uniforms\n    this.setUniforms(glContext);\n\n    // bending\n    glContext.enable(glContext.BLEND);\n    glContext.blendFunc(glContext.SRC_ALPHA, glContext.ONE_MINUS_SRC_ALPHA);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    glContext.vertexAttribPointer(this._positionId, HeatmapLayer.COORDS, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._positionId);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glTexCoordsBuffer);\n    glContext.vertexAttribPointer(this._texCoordsId, HeatmapLayer.COORDS, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._texCoordsId);\n\n    // Tell WebGL which indices to use to index the vertices\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n\n    // Tell WebGL we want to affect texture unit 0\n    glContext.activeTexture(glContext.TEXTURE0);\n    // Bind the texture to texture unit 0\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glFunctionTex);\n\n    // Tell WebGL we want to affect texture unit 1\n    glContext.activeTexture(glContext.TEXTURE1);\n    // Bind the texture to texture unit 1\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glColorMapTex);\n\n    // binds the shader program\n    glContext.useProgram(this._shaderProgram[0]);\n\n    // draw the geometry\n    glContext.drawElements(glContext.TRIANGLES, this._features['index'].length, glContext.UNSIGNED_INT, 0);\n\n    // disable blend\n    glContext.disable(glContext.BLEND);\n  }\n\n  /**\n   * Send uniforms to the shader\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected setUniforms(glContext: WebGL2RenderingContext) {\n    if (!this._shaderProgram.length || this._shaderProgram[0] === null) {\n      return;\n    }\n    // selects the shader\n    glContext.useProgram(this._shaderProgram[0]);\n\n    // send matrices\n    glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n    glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n    // send world origin\n    const worldOrigin = this._camera.getWorldOrigin();\n    glContext.uniform2f(this._uWorldOriginId, worldOrigin[0], worldOrigin[1]);\n\n    // functions texture\n    glContext.uniform1i(this._uFunctionId, 0);\n    // color map\n    glContext.uniform1i(this._uColorMapId, 1);\n  }\n\n  /**\n   * Layer VBO creation signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createBuffers(glContext: WebGL2RenderingContext) {\n    // Create a buffer for the positions.\n    this._glPositionBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['position']), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the positions.\n    this._glTexCoordsBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glTexCoordsBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['texCoords']), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the indices.\n    this._glIndexBuffer = glContext.createBuffer();\n    // Select the index buffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ELEMENT_ARRAY_BUFFER, new Uint32Array(this._features['index']), glContext.STATIC_DRAW);\n  }\n\n  /**\n   * Scalar data vbo creation\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createFunctionTexture(glContext: WebGL2RenderingContext) {\n    // gl color map texture\n    if (this._glFunctionTex === null) {\n      this._glFunctionTex = glContext.createTexture();\n    }\n    // send the color map\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glFunctionTex);\n    glContext.texImage2D(\n      glContext.TEXTURE_2D, 0, glContext.R16F, this._functionResX, this._functionResY, 0,\n      glContext.RED, glContext.FLOAT, new Float32Array(this._features['scalar'])\n    );\n    // texture resize\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.LINEAR);\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.LINEAR);\n    // Prevents s-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n    // Prevents t-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n  }\n\n    /**\n   * Color map texture creation\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} color Selected color map\n   * @param {boolean} get the reverse color map\n   */\n  protected createColorMapTexture(glContext: WebGL2RenderingContext, color: ColorMapType, reverse: boolean = false) {\n    // gets the color map\n    const cmap = ColorMap.getColorMap(color, reverse);\n    // gl color map texture\n    if (this._glColorMapTex === null) {\n      this._glColorMapTex = glContext.createTexture();\n    }\n\n    // send the color map\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glColorMapTex);\n    glContext.texImage2D(\n      glContext.TEXTURE_2D, 0, glContext.RGBA, cmap.length / 4, 1, 0,\n      glContext.RGBA, glContext.UNSIGNED_BYTE, new Uint8Array(cmap)\n    );\n    // texture resize\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.LINEAR);\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.LINEAR);\n    // Prevents s-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n    // Prevents t-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n  }\n}\n","import { MapView } from './mapview';\n\nexport class KeyEvents {\n  // div to attach the events\n  private _map: MapView;\n  // callbacks\n  private _callbacks: any;\n\n  /**\n   * Mouse events constructor\n   * @param map the map to bind the events\n   */\n  constructor(map, callbacks = null) {\n    this._map = map;\n    this._callbacks = callbacks;\n  }\n\n  bindEvents() {\n    // sets the key listeners\n    window.addEventListener('keydown', this.keyDown.bind(this), false);\n  }\n\n  /**\n  * Handles key down event\n  */\n  keyDown(event: KeyboardEvent) {\n    // key value\n    const key = +event.key;\n    const layers = this._map.layerManager.layers;\n\n    // number key\n    // if (!isNaN(key) && key < layers.length) {\n    //   // makes in visible\n    //   const isVisible = layers[key].visible;\n    //   layers[key].visible = !isVisible;\n\n    //   // render\n    //   this._map.render();\n    // }\n\n    // change camera mode\n    if (event.key === 'd') {\n      this._map.toggleCameraMode();\n    }\n  }\n}\n","// data loader\nimport { DataLoader } from './data-loader';\n\n// layers base classes\nimport { Layer } from './layer';\nimport { LayerTypes } from './constants';\n// layer types\nimport { BuildingLayer } from './building-layer';\nimport { PhysicalLayer } from './physical-layer';\nimport { PolygonLayer } from './polygon-layer';\nimport { HeatmapLayer } from './heatmap-layer';\nimport { PointLayer } from './point-layer';\n\nexport class LayerManager {\n  // index file\n  protected _index: string;\n  // Loaded layers\n  protected _layers: Layer[] = [];\n\n  /**\n   * Layer manager constructor\n   * @param {string} indexUrl Layers index file\n   */\n  constructor(indexUrl: string) {\n    this._index = indexUrl;\n  }\n\n  /**\n   * Layers vector accessor\n   * @returns {Layer[]} The array of layers\n   */\n  get layers(): Layer[] {\n    return this._layers;\n  }\n\n  /*\n   * Load all layers\n   * @returns {Promise<any>} The load index promise\n   */\n  loadIndex(): Promise<any> {\n    return DataLoader.getJsonData(this._index).then( (layers) => {\n      return layers;\n    });\n  }\n\n   /**\n   * Creates a layer from the server\n   * @param {string} layerType layer type\n   * @param {string} layerId layer identifier\n   * @returns {Promise<Layer>} The load layer promise\n   */\n  createLayer(layerType: string, layerId: string) {\n    // loaded layer\n    let layer = null;\n\n    // loads based on type\n    switch (layerType) {\n      case LayerTypes.PHYSICAL_LAYER:\n        layer = new PhysicalLayer(layerId);\n      break;\n      case LayerTypes.BUILDING_LAYER:\n        layer = new BuildingLayer(layerId);\n      break;\n      case LayerTypes.POLYGON_LAYER:\n        layer = new PolygonLayer(layerId);\n      break;\n      case LayerTypes.HEATMAP_LAYER:\n        layer = new HeatmapLayer(layerId);\n      break;\n      case LayerTypes.POINT_LAYER:\n        layer = new PointLayer(layerId);\n      break;\n      default:\n        console.error(`File ${layerId}.json has an unknown layer type: {layerType}.`);\n      break;\n    }\n\n    // adds the the list of layers\n    this._layers.push(layer);\n\n    // returns the layer\n    return layer;\n  }\n\n  getLayer(layerId: string) {\n    for(const layer of this._layers) {\n      if (layerId === layer.layerId) {\n        return layer;\n      }\n    }\n\n    return null;\n  }\n}\n","/// <reference types=\"@types/webgl2\" />\n\nimport { Camera } from './camera';\nimport { ColorMapType } from './constants';\n\nexport class Layer {\n  // is visible\n  protected _visible: boolean;\n  // is selectable\n  protected _selectable: boolean;\n\n  // layer id\n  protected _layerId: string;\n  // layer's shader\n  protected _shaderProgram: WebGLShader[] = [];\n  // layer's camera\n  protected _camera: Camera;\n\n  /**\n   * Layer constructor\n   * @param {string} id The Mapview layer Identifier\n   */\n  constructor(id: string) {\n    this._layerId = id;\n    this._visible = true;\n    this._selectable = false;\n  }\n\n  /**\n   * Accessor for the layer id\n   */\n  get layerId() {\n    return this._layerId;\n  }\n\n  /**\n   * Returns if the layers is visible\n   */\n  get visible(): boolean {\n    return this._visible;\n  }\n\n  /**\n   * Sets the visibility\n   */\n  set visible(visible: boolean) {\n    this._visible = visible;\n  }\n\n  /**\n   * Returns if the layers is selectable\n   */\n  get selectable(): boolean {\n    return this._selectable;\n  }\n\n  /**\n   * Sets the selection\n   */\n  set selectable(selectable: boolean) {\n    this._selectable = selectable;\n  }\n\n  /**\n   * Sends the camera to the layer\n   */\n  set camera(camera: Camera) {\n    this._camera = camera;\n  }\n\n  /**\n   * Shader load signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  loadShaders(glContext: WebGL2RenderingContext) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Data update signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param data layer data\n   */\n  updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Function update signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param data layer function\n   */\n  updateFunction(glContext: WebGL2RenderingContext, data: any) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Function update signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param data layer function\n   */\n  cleanFunction(glContext: WebGL2RenderingContext) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Changes the color map\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} cMap Color Map\n   */\n  updateColorMap(glContext: WebGL2RenderingContext, cMap: ColorMapType) {}\n\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  render(glContext: WebGL2RenderingContext) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Layer picking function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  pick(glContext: WebGL2RenderingContext,  x: number, y: number) {\n    throw new Error('Each layer has to implement it!');\n  }\n  /**\n   * Layer picking function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  pickId() {\n    throw new Error('Each layer has to implement it!');\n  }\n  /**\n   * Layer picking function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  setPickId(id: number = null) {\n    throw new Error('Each layer has to implement it!');\n  }\n\n  /**\n   * Inits the layer's shader program\n   * @param {string} vsSource Vertex shader source\n   * @param {string} fsSource Fragment shader source\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected initShaderProgram(vsSource: string, fsSource: string, glContext: WebGL2RenderingContext) {\n    // load the shaders\n    const vertexShader = this.buildShader(glContext.VERTEX_SHADER, vsSource, glContext);\n    const fragmentShader = this.buildShader(glContext.FRAGMENT_SHADER, fsSource, glContext);\n\n    // Create the shader program\n    const shader = glContext.createProgram();\n    glContext.attachShader(shader, vertexShader);\n    glContext.attachShader(shader, fragmentShader);\n    glContext.linkProgram(shader);\n\n    // If creating the shader program failed, alert\n    if (!glContext.getProgramParameter(shader, glContext.LINK_STATUS)) {\n      throw new Error('Unable to initialize the shader program: ' + glContext.getProgramInfoLog(shader));\n    }\n\n    // stores the shader\n    this._shaderProgram.push(shader);\n  }\n\n  /**\n   * Builds the layer shader\n   * @param {string} type The shader type\n   * @param {string} source The shader source string\n   * @param {WebGL2RenderingContext} glContext The WebGL context\n   * @returns {WebGLShader} The shader object\n   */\n  protected buildShader(type, source, glContext): WebGLShader {\n    // creates the shader\n    const shader = glContext.createShader(type);\n\n    // Send the source to the shader object\n    glContext.shaderSource(shader, source);\n    // Compile the shader program\n    glContext.compileShader(shader);\n\n    // See if it compiled successfully\n    if (!glContext.getShaderParameter(shader, glContext.COMPILE_STATUS)) {\n      console.error('An error occurred compiling the shaders: ');\n      console.error(source);\n      console.error(glContext.getShaderInfoLog(shader));\n\n      glContext.deleteShader(shader);\n      throw new Error('Unable to load the shader');\n    }\n\n    return shader;\n  }\n}\n","/// <reference types=\"@types/webgl2\" />\nimport { DataApi } from './data-api';\nimport { LayerManager } from './layer-manager';\nimport { Camera } from './camera';\nimport { KeyEvents } from './key-events';\nimport { MouseEvents } from './mouse-events';\nimport { CameraStatus, ColorMapType } from './constants';\nimport { BuildingLayer } from './building-layer';\nimport { Layer } from './layer';\nimport { PolygonLayer } from './polygon-layer';\n\nexport class MapView {\n  // Map div\n  protected _mapDiv: HTMLElement = null;\n  // Html canvas\n  protected _canvas: HTMLCanvasElement = null;\n  // WebGL context\n  public _glContext: WebGL2RenderingContext = null;\n\n  // Layer manager object\n  protected _layerManager: LayerManager = null;\n\n  // interaction variables\n  private _camera: Camera;\n\n  // mouse events\n  private _mouse: MouseEvents;\n  // keyboard events\n  private _keyboard: KeyEvents;\n  // callbacks\n  private _callbacks: any;\n\n  public _buildingLayer: BuildingLayer;\n\n  /**\n   * MapView constructor\n   * @param {HTMLElement} mapDiv The html element to hold the map.\n   */\n  constructor(mapDiv: HTMLElement, callbacks = null) {\n    // stores the map div\n    this._mapDiv = mapDiv;\n    // creates the new canvas element\n    this._canvas = document.createElement('canvas');\n    // gets the webgl context\n    this._glContext = this._canvas.getContext('webgl2');\n    // appends the canvas\n    this._mapDiv.appendChild(this._canvas);\n    // callbacks\n    this._callbacks = callbacks;\n\n    // inits the camera\n    this.initCamera('camera.json').then(() => {\n      // resizes the canvas\n      this.resize();\n    });\n\n    // inits the mouse events\n    this.initMouseEvents();\n    // inits the mouse events\n    this.initKeyboardEvents();\n    // bind events\n    this.initWindowEvents();\n  }\n\n  /**\n   * gets the canvas element\n   */\n  get canvas(): HTMLCanvasElement {\n    return this._canvas;\n  }\n\n  /**\n   * gets the map div\n   */\n  get div(): HTMLElement {\n    return this._mapDiv;\n  }\n\n  /**\n   * gets the map div\n   */\n  get glContext(): WebGL2RenderingContext {\n    return this._glContext;\n  }\n\n  /**\n   * gets the camera object\n   */\n  get camera(): Camera {\n    return this._camera;\n  }\n\n  /**\n   * gets the layers\n   */\n  get layerManager(): LayerManager {\n    return this._layerManager;\n  }\n\n  /**\n   * Toggle Camera Mode\n   */\n  toggleCameraMode() {\n    const currentCameraStatus: CameraStatus = this._camera.getCameraStatus();\n    if (currentCameraStatus === CameraStatus.Camera2D) {\n      this._camera.setCameraStatus(CameraStatus.Camera3D);\n    } else {\n      this._camera.setCameraStatus(CameraStatus.Camera2D);\n    }\n\n    this.render();\n  }\n\n  async initCamera(camera: string) {\n    // load the index file and its layers\n    const params = await DataApi.getMapIndex(camera);\n    // sets the camera\n    this._camera = new Camera(params.coordinates[0][0], params.coordinates[0][1], params.properties.zoom);\n    // renders the scene\n    this.render();\n  }\n\n  /**\n   * Map layers initialization\n   */\n  async initLayers(index: string) {\n    // creates the manager\n    this._layerManager = new LayerManager(index);\n\n    // load the index file and its layers\n    const data = await DataApi.getMapIndex(index);\n\n    // loop over the index file\n    for (const element of data) {\n      // skips the layer\n      if ('skip' in element && element['skip']) {\n        continue;\n      }\n\n      // loads the layers data\n      const layer = this._layerManager.createLayer(\n        element['type'], element['id']\n      );\n      // layer configuration\n      this.layerConfig(layer, element);\n\n      // loads the shaders\n      await layer.loadShaders(this._glContext);\n\n      // update the features\n      await layer.updateFeatures(this._glContext);\n      this.render();\n\n      if (element['type'] === 'building') {\n        this._buildingLayer = layer;\n      }\n    }\n  }\n\n  /**\n   * Map layers configuration\n   */\n  layerConfig(layer: Layer, config: any) {\n    // color map\n    if (config['color'] !== undefined) {\n      layer.updateColorMap(this._glContext, config['color']);\n    } else {\n      layer.updateColorMap(this._glContext, ColorMapType.SEQUENTIAL_RED_MAP);\n    }\n\n    // selectable\n    if (config['selectable'] !== undefined) {\n      layer.selectable = config['selectable'];\n    } else {\n      layer.selectable = false;\n    }\n\n    // visibility\n    if (config['visible'] !== undefined) {\n      layer.visible = config['visible'];\n    } else {\n      layer.visible = true;\n    }\n  }\n\n  /**\n   * Add layer geometry and function function\n   */\n  async addLayer(layerType: string, layerId: string, data: any, config: any = {visible: true, selectable: false}) {\n    // loads the layers data\n    const layer = this._layerManager.createLayer(\n      layerType, layerId\n    );\n\n    // loads the shaders\n    await layer.loadShaders(this._glContext);\n    // update the features\n    await layer.updateFeatures(this._glContext, data);\n\n    // make visible\n    layer.visible = config.visible;\n    layer.selectable = config.selectable;\n\n    // render\n    this.render();\n  }\n\n  /**\n   * Delete layer function\n   */\n  delLayer(layerId: string) {\n    let pos = -1;\n    for(let lId = 0; lId < this._layerManager.layers.length; lId++) {\n      // gets the layer\n      const layer = this._layerManager.layers[lId];\n\n      // check for the layer\n      if (layer.layerId !== layerId) { continue; }\n\n      // id found\n      pos = lId;\n      break;\n    }\n\n    if (pos > -1) {\n      // removes the layer\n      this._layerManager.layers.splice(pos, 1);\n    }\n  }\n\n  /**\n   * update layer function function\n   */\n  async updateLayerFunction(layerId: string, data: any) {\n    // searches the layer\n    let layer = null;\n    for (const lay of this._layerManager.layers) {\n      if (lay.layerId === layerId) {\n        layer = lay;\n        break;\n      }\n    }\n\n    // not found\n    if (layer === null) { return; }\n    // update the function\n    await layer.updateFunction(this._glContext, data);\n\n    // make it visible\n    layer.visible = true;\n\n    // render\n    this.render();\n  }\n\n  /**\n   * cleans the layer function\n   */\n  cleanLayerFunction(layerId: string) {\n    // searches the layer\n    let layer = null;\n    for (const lay of this._layerManager.layers) {\n      if (lay.layerId === layerId) {\n        layer = lay;\n        break;\n      }\n    }\n\n    // not found\n    if (layer === null) { return; }\n    // update the function\n    layer.cleanFunction(this._glContext);\n\n    // make it visible\n    layer.visible = true;\n\n    // render\n    this.render();\n  }\n\n  /**\n   * Inits the mouse events\n   */\n  initMouseEvents() {\n    // creates the mouse events manager\n    this._mouse = new MouseEvents(this, this._callbacks);\n    // binds the mouse events\n    this._mouse.bindEvents();\n  }\n\n  /**\n   * Inits the mouse events\n   */\n  initKeyboardEvents() {\n    // creates the mouse events manager\n    this._keyboard = new KeyEvents(this, this._callbacks);\n    // binds the mouse events\n    this._keyboard.bindEvents();\n  }\n\n  /**\n   * inits the window events\n   */\n  initWindowEvents() {\n    // resize listener\n    window.addEventListener('resize', () => {\n      // resizes the canvas\n      this.resize();\n      this.render();\n    });\n  }\n\n  pick(layerId: string, elementId: number) {\n    const layer = this._layerManager.getLayer(layerId);\n\n    if (layer) {\n      layer.setPickId(elementId);\n      this.render();\n    }\n  }\n\n  /**\n   * Renders the map\n   */\n  render() {\n    if (!this._camera) {\n      return;\n    }\n    // sky\n    this._glContext.clearColor(0.7451, 0.8235, 0.8431, 1.0);\n    // tslint:disable-next-line:no-bitwise\n    this._glContext.clear(this._glContext.COLOR_BUFFER_BIT | this._glContext.DEPTH_BUFFER_BIT);\n\n    // updates the camera\n    this._camera.update();\n\n    // render the layers\n    for (const layer of this._layerManager.layers) {\n      // skips based on visibility\n      if (!layer.visible) { continue; }\n\n      // sends the camera\n      layer.camera = this.camera;\n      // render\n      layer.render(this._glContext);\n    }\n  }\n\n  /**\n   * Resizes the html canvas\n   */\n  resize() {\n    const targetWidth = this._mapDiv.clientWidth;\n    const targetHeight = this._mapDiv.clientHeight;\n\n    const value = Math.max(targetWidth, targetHeight);\n    this._glContext.viewport(0, 0, value, value);\n    //\n    this._canvas.width = targetWidth;\n    this._canvas.height = targetHeight;\n\n    // stores in the camera\n    this._camera.setViewportResolution(targetWidth, targetHeight);\n  }\n}\n","import { MapView } from './mapview';\nimport { MapViewStatus, CameraStatus } from './constants';\n\nexport class MouseEvents {\n  // div to attach the events\n  private _map: MapView;\n  // callbacks\n  private _callbacks: any;\n\n  // mouse movement control.\n  private _status: MapViewStatus;\n  private _lastPoint: number[];\n\n  /**\n   * Mouse events constructor\n   * @param map the map to bind the events\n   */\n  constructor(map, callbacks = null) {\n    this._map = map;\n    this._callbacks = callbacks;\n\n    // default values\n    this._status = MapViewStatus.IDLE;\n    this._lastPoint = [0, 0];\n  }\n\n  bindEvents() {\n    // sets the mouse listeners\n    this._map.canvas.addEventListener('wheel', this.mouseWheel.bind(this), false);\n    this._map.canvas.addEventListener('mousedown', this.mouseDown.bind(this), false);\n    document.addEventListener('mousemove', this.mouseMove.bind(this), false);\n    document.addEventListener('mouseup', this.mouseUp.bind(this), false);\n  }\n\n  /**\n   * Handles mouse down event\n   */\n  mouseDown(event: MouseEvent) {\n    this._lastPoint = [event.x, event.y];\n\n    if (event.ctrlKey) {\n      const x = event.x;\n      const y = (this._map.canvas.height - event.y);\n\n      const picks = [];\n      for (const layer of this._map.layerManager.layers) {\n        if (!layer.selectable) { continue; }\n        \n        layer.pick(this._map.glContext, x, y);\n        picks.push(layer.pickId());\n\n        this._callbacks.mouse.mouseDown(picks);\n      }\n    } else {\n      this._status = MapViewStatus.DRAG;\n    }\n\n    this._map.render();\n  }\n\n  /**\n     * Handles mouse down event\n     */\n  mouseMove(event: MouseEvent) {\n    // changes the values\n    if (this._status === MapViewStatus.DRAG) {\n      const dx = (-event.x + this._lastPoint[0]);\n      const dy = event.y - this._lastPoint[1];\n\n      if (event.buttons === 1 && event.shiftKey && this._map.camera.getCameraStatus() === CameraStatus.Camera3D) { // left button\n        this._map.camera.yaw(dx / this._map.canvas.clientWidth);\n        this._map.camera.pitch(dy / this._map.canvas.clientHeight);\n      } else {\n        this._map.camera.translate(dx / this._map.canvas.clientWidth, dy / this._map.canvas.clientHeight);\n      }\n\n      this._lastPoint = [event.x, event.y];\n      this._map.render();\n    }\n  }\n\n  /**\n   * Handles mouse down event\n   */\n  mouseUp(event: MouseEvent) {\n    // changes the values\n    this._status = MapViewStatus.IDLE;\n    this._map.render();\n  }\n\n  /**\n   * Handles mouse down event\n   */\n  mouseWheel(event: WheelEvent) {\n    // changes the values\n    const maxAxisLength = Math.max(this._map.canvas.width, this._map.canvas.height);\n    const x = event.x / maxAxisLength;\n    const y = (this._map.canvas.height - event.y) / maxAxisLength;\n    this._map.camera.zoom(event.deltaY, x, y);\n    this._map.render();\n  }\n\n  /**\n   * Handles mouse down event\n   */\n  mouseOver(event: MouseEvent) {\n    console.log('called', event.ctrlKey);\n\n  }\n\n}\n","/// <reference types=\"@types/webgl2\" />\n\nimport { Layer } from './layer';\nimport { DataLoader } from './data-loader';\nimport { DataApi } from './data-api';\n\nexport class PhysicalLayer extends Layer {\n  // number of coordinates per vertex\n  protected static COORDS = 2;\n  // number of shaders\n  protected static N_SHADER = 1;\n\n  // primitive Ids\n  protected _features: any = {};\n\n  // OpenGL data buffer\n  protected _glPositionBuffer: WebGLBuffer = null;\n  protected _glColorBuffer: WebGLBuffer = null;\n  protected _glIndexBuffer: WebGLBuffer = null;\n\n  // data buffer\n  protected _positionBuffer: number[] = [];\n  protected _colorBuffer: number[] = [];\n  protected _indexBuffer: number[] = [];\n\n  // shader attribute id\n  protected _positionId = -1;\n  protected _colorId = -1;\n\n  // uniforms\n  protected _uModelViewMatrixId: WebGLUniformLocation = -1;\n  protected _uProjectionMatrixId: WebGLUniformLocation = -1;\n  protected _uWorldOrigin: WebGLUniformLocation = -1;\n\n  /**\n   * The Vector Layer constructor\n   * @param {string} id the layer id\n   */\n  constructor(id: string) {\n    super(id);\n  }\n\n  /**\n   * Shader load signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  async loadShaders(glContext: WebGL2RenderingContext) {\n    // load the shaders\n    for (let id = 0; id < PhysicalLayer.N_SHADER; id++) {\n      // shaders url\n      const vertUrl = `assets/shaders/physical(${id}).vert`;\n      const fragUrl = `assets/shaders/physical(${id}).frag`;\n\n      // Vertex shader program\n      const vsShader = await DataLoader.getTextData(vertUrl);\n      // Fragment shader program\n      const fsShader = await DataLoader.getTextData(fragUrl);\n\n      // load all shaders\n      this.initShaderProgram(vsShader, fsShader, glContext);\n    }\n\n    // uniforms definition\n    this._positionId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPos');\n    this._colorId = glContext.getAttribLocation(this._shaderProgram[0], 'vertRgb');\n    this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uModelViewMatrix');\n    this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uProjectionMatrix');\n    this._uWorldOrigin = glContext.getUniformLocation(this._shaderProgram[0], 'uWorldOrigin');\n\n    // load message\n    console.log(`Shaders successfully loaded for layer ${this._layerId}.`);\n  }\n\n  /**\n   * Data update signature\n   * @returns {Promise<any>} The load data promise\n   */\n  async updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n    // gets the feature of index id\n    data = await DataApi.getLayerFeature(this._layerId);\n\n    // new feature found\n    this._features = {\n      'position': [], 'color': [], 'index': [], 'function': [], 'size': []\n    };\n\n    // loaded number of vertices\n    let nverts = 0;\n\n    // iterates over the geometries\n    for (const feature of data.features) {\n      // gets the feature color\n      const hex = feature.properties.color.slice(2, 8);\n      const rgb = [0, 2, 4].map((start) => {\n        return parseInt(hex.slice(start, start + 2), 16) / 255;\n      });\n\n      // get the coordinates\n      const position = feature.geometry.coordinates;\n      // get the colors\n      const colors = [];\n      for (let id = 0; id < position.length / PhysicalLayer.COORDS; id++) {\n        colors.push(...rgb);\n      }\n\n      // build the indices\n      const indices = feature.geometry.indices;\n      for (let id = 0; id < indices.length; id++) {\n        indices[id] += nverts;\n      }\n\n      // add to the feature\n      this._features['position'].push.apply(this._features['position'], position);\n      this._features['color'].push.apply(this._features['color'], colors);\n      this._features['index'].push.apply(this._features['index'], indices);\n\n      // loaded vertices\n      nverts += position.length / PhysicalLayer.COORDS;\n    }\n    // formats the buffer\n    this._positionBuffer = this._features['position'];\n    // formats the buffer\n    this._colorBuffer = this._features['color'];\n    // formats the buffer\n    this._indexBuffer = this._features['index'];\n\n    // creates the buffer\n    this.createBuffers(glContext);\n  }\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  render(glContext: WebGL2RenderingContext) {\n    // invalid layers\n    if (\n      this._shaderProgram.length === 0 ||\n      this._shaderProgram[0] === null ||\n      this._glPositionBuffer === null ||\n      this._glColorBuffer === null ||\n      this._glIndexBuffer === null ||\n      this._positionId < 0 ||\n      this._colorId < 0\n    ) {\n      return;\n    }\n\n    // sends the uniforms\n    this.setUniforms(glContext);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    glContext.vertexAttribPointer(this._positionId, PhysicalLayer.COORDS, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._positionId);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glColorBuffer);\n    glContext.vertexAttribPointer(this._colorId, 3, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._colorId);\n\n    // Tell WebGL which indices to use to index the vertices\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n    // binds the shader program\n    glContext.useProgram(this._shaderProgram[0]);\n    // draw the geometry\n    glContext.drawElements(glContext.TRIANGLES, this._indexBuffer.length, glContext.UNSIGNED_INT, 0);\n  }\n\n  /**\n   * Send uniforms to the shader\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected setUniforms(glContext: WebGL2RenderingContext) {\n    if (!this._shaderProgram.length || this._shaderProgram[0] === null) {\n      return;\n    }\n    glContext.useProgram(this._shaderProgram[0]);\n    // send matrices\n    glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n    glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n    // send world origin\n    const worldOrigin = this._camera.getWorldOrigin();\n    glContext.uniform2f(this._uWorldOrigin, worldOrigin[0], worldOrigin[1]);\n  }\n\n  /**\n   * Layer VBO creation signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createBuffers(glContext: WebGL2RenderingContext) {\n    // Create a buffer for the positions.\n    this._glPositionBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._positionBuffer), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the colors.\n    this._glColorBuffer = glContext.createBuffer();\n    // Select the color buffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glColorBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._colorBuffer), glContext.STATIC_DRAW\n    );\n\n    // Create a buffer for the indices.\n    this._glIndexBuffer = glContext.createBuffer();\n    // Select the index buffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ELEMENT_ARRAY_BUFFER, new Uint32Array(this._indexBuffer), glContext.STATIC_DRAW);\n  }\n}\n","/// <reference types=\"@types/webgl2\" />\n\nimport { Layer } from './layer';\nimport { DataLoader } from './data-loader';\nimport { DataApi } from './data-api';\nimport { ColorMapType } from './constants';\nimport { ColorMap } from './colormap';\n\nexport class PointLayer extends Layer {\n  // number of coordinates per vertex\n  protected static COORDS = 2;\n  // number of shaders\n  protected static N_SHADER = 1;\n\n  // primitive Ids\n  protected _features: any = {};\n\n  // OpenGL data buffer\n  protected _glPositionBuffer: WebGLBuffer = null;\n  protected _glScalarBuffer: WebGLBuffer = null;\n  protected _glColorMapTex: WebGLTexture = null;\n\n  // shader attribute id\n  protected _positionId = -1;\n  protected _scalarId = -1;\n\n  // transformation uniforms\n  protected _uModelViewMatrixId: WebGLUniformLocation = -1;\n  protected _uProjectionMatrixId: WebGLUniformLocation = -1;\n  protected _uWorldOriginId: WebGLUniformLocation = -1;\n\n  // color map uniform\n  protected _uColorMapId: WebGLUniformLocation = -1;\n\n  /**\n   * The Vector Layer constructor\n   * @param {string} id the layer id\n   */\n  constructor(id: string) {\n    super(id);\n    this._visible = false;\n  }\n\n  /**\n   * Shader load signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  async loadShaders(glContext: WebGL2RenderingContext) {\n    // load the shaders\n    for (let id = 0; id < PointLayer.N_SHADER; id++) {\n      // shaders url\n      const vertUrl = `assets/shaders/point(${id}).vert`;\n      const fragUrl = `assets/shaders/point(${id}).frag`;\n\n      // Vertex shader program\n      const vsShader = await DataLoader.getTextData(vertUrl);\n      // Fragment shader program\n      const fsShader = await DataLoader.getTextData(fragUrl);\n\n      // load all shaders\n      this.initShaderProgram(vsShader, fsShader, glContext);\n    }\n\n    // vertex data on the shader\n    this._positionId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPos');\n    this._scalarId = glContext.getAttribLocation(this._shaderProgram[0], 'vertScalar');\n\n    // transformation uniforms on the shader\n    this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uModelViewMatrix');\n    this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uProjectionMatrix');\n    this._uWorldOriginId = glContext.getUniformLocation(this._shaderProgram[0], 'uWorldOrigin');\n\n    // colorMap texture\n    this._uColorMapId = glContext.getUniformLocation(this._shaderProgram[0], 'uColorMap');\n    // load message\n    console.log(`Shaders successfully loaded for layer ${this._layerId}.`);\n  }\n\n  /**\n   * Data update signature\n   * @returns {Promise<any>} The load data promise\n   */\n  async updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n    // gets the feature of index id\n    if (data === null) {\n      data = await DataApi.getLayerFeature(this._layerId);\n    }\n\n    // new feature found\n    this._features = {'position': [], 'scalar': []};\n\n    // iterates over the geometries\n    for (const feature of data.features) {\n      // feature data\n      const position = feature.geometry.coordinates;\n\n      const scalar = [];\n      for (let id = 0; id < position.length / PointLayer.COORDS; id++) {\n        const val = feature.properties && feature.properties.scalar ? feature.properties.scalar : -1;\n        scalar.push(val);\n      }\n\n      // add to the feature\n      this._features['position'].push.apply(this._features['position'], position);\n      this._features['scalar'].push.apply(this._features['scalar'], scalar);\n    }\n\n    // creates the buffer\n    this.createBuffers(glContext);\n    // creates the scalar data vbo\n    this.createScalarBuffer(glContext);\n    // creates the color map\n    this.createColorMapTexture(glContext, ColorMapType.DIVERGING_RED_BLUE_MAP, false);\n  }\n\n  /**\n   * Function update signature\n   * @returns {Promise<any>} The load data promise\n   */\n  async updateFunction(glContext: WebGL2RenderingContext) {\n    // gets the feature of index id\n    const data = await DataApi.getLayerFunction(this._layerId);\n\n    // new feature found\n    this._features = {'scalar': []};\n\n    // formats the buffer\n    this._features['scalar'] = data.properties.scalar;\n\n    // creates the scalar data vbo\n    this.createScalarBuffer(glContext);\n  }\n\n  /**\n   * Changes the color map\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} cMap Color Map\n   */\n  updateColorMap(glContext: WebGL2RenderingContext, cMap: ColorMapType) {\n    // creates the color map\n    this.createColorMapTexture(glContext, cMap, false);\n  }\n\n  /**\n   * Layer render function signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  render(glContext: WebGL2RenderingContext) {\n    // invalid layers\n    if (\n      this._shaderProgram.length === 0 ||\n      this._shaderProgram[0] === null ||\n      this._glPositionBuffer === null ||\n      this._glScalarBuffer === null ||\n      this._positionId < 0 ||\n      this._scalarId < 0\n    ) {\n      return;\n    }\n\n    // sends the uniforms\n    this.setUniforms(glContext);\n\n    // bending\n    glContext.enable(glContext.BLEND);\n    glContext.blendFunc(glContext.SRC_ALPHA, glContext.ONE_MINUS_SRC_ALPHA);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    glContext.vertexAttribPointer(this._positionId, PointLayer.COORDS, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._positionId);\n\n    // binds the position buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glScalarBuffer);\n    glContext.vertexAttribPointer(this._scalarId, 1, glContext.FLOAT, false, 0, 0);\n    glContext.enableVertexAttribArray(this._scalarId);\n\n    // Tell WebGL we want to affect texture unit 0\n    glContext.activeTexture(glContext.TEXTURE0);\n    // Bind the texture to texture unit 0\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glColorMapTex);\n\n    // binds the shader program\n    glContext.useProgram(this._shaderProgram[0]);\n\n    // draw the geometry\n    glContext.drawArrays(glContext.POINTS, 0, this._features['position'].length / PointLayer.COORDS);\n\n    // disable blend\n    glContext.disable(glContext.BLEND);\n  }\n\n  /**\n   * Send uniforms to the shader\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected setUniforms(glContext: WebGL2RenderingContext) {\n    if (!this._shaderProgram.length || this._shaderProgram[0] === null) {\n      return;\n    }\n    glContext.useProgram(this._shaderProgram[0]);\n    // send matrices\n    glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n    glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n    // send world origin\n    const worldOrigin = this._camera.getWorldOrigin();\n    glContext.uniform2f(this._uWorldOriginId, worldOrigin[0], worldOrigin[1]);\n\n    // send the color map\n    glContext.uniform1i(this._uColorMapId, 0);\n  }\n\n  /**\n   * Layer VBO creation signature\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createBuffers(glContext: WebGL2RenderingContext) {\n    // Create a buffer for the positions.\n    this._glPositionBuffer = glContext.createBuffer();\n    // Select the positionBuffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['position']), glContext.STATIC_DRAW\n    );\n  }\n\n  /**\n   * Scalar data vbo creation\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   */\n  protected createScalarBuffer(glContext: WebGL2RenderingContext) {\n    // Create a buffer for the colors.\n    if (this._glScalarBuffer === null) {\n      this._glScalarBuffer = glContext.createBuffer();\n    }\n    // Select the color buffer as the one to apply buffer\n    glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glScalarBuffer);\n    // send data to gpu\n    glContext.bufferData(\n      glContext.ARRAY_BUFFER, new Float32Array(this._features['scalar']), glContext.STATIC_DRAW\n    );\n  }\n\n    /**\n   * Color map texture creation\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} color Selected color map\n   * @param {boolean} get the reverse color map\n   */\n  protected createColorMapTexture(glContext: WebGL2RenderingContext, color: ColorMapType, reverse: boolean = false) {\n    // gets the color map\n    const cmap = ColorMap.getColorMap(color, reverse);\n    // gl color map texture\n    if (this._glColorMapTex === null) {\n      this._glColorMapTex = glContext.createTexture();\n    }\n\n    // send the color map\n    glContext.bindTexture(glContext.TEXTURE_2D, this._glColorMapTex);\n    glContext.texImage2D(\n      glContext.TEXTURE_2D, 0, glContext.RGBA, cmap.length / 4, 1, 0,\n      glContext.RGBA, glContext.UNSIGNED_BYTE, new Uint8Array(cmap)\n    );\n    // glContext.NEAREST is also allowed, instead of glContext.LINEAR, as neither mipmap.\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.LINEAR);\n    // Prevents s-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n    // Prevents t-coordinate wrapping (repeating).\n    glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n  }\n}\n","/// <reference types=\"@types/webgl2\" />\n\nimport { Layer } from './layer';\nimport { DataLoader } from './data-loader';\nimport { DataApi } from './data-api';\nimport { ColorMapType } from './constants';\nimport { ColorMap } from './colormap';\n\nexport class PolygonLayer extends Layer {\n    // number of coordinates per vertex\n    protected static COORDS = 2;\n    // number of shaders\n    protected static N_SHADER = 3;\n\n    // primitive Ids\n    protected _features: any = {};\n\n    // data buffers\n    protected _glPositionBuffer: WebGLBuffer = null;\n    protected _glIndexBuffer: WebGLBuffer = null;\n    protected _glPolygonIdBuffer: WebGLBuffer = null;\n    protected _glScalarBuffer: WebGLBuffer = null;\n\n    // shader attribute id\n    protected _positionId = -1;\n    protected _polygonId = -1;\n    protected _scalarId = -1;\n\n    // transformation uniforms\n    protected _uModelViewMatrixId: WebGLUniformLocation = -1;\n    protected _uProjectionMatrixId: WebGLUniformLocation = -1;\n    protected _uWorldOriginId: WebGLUniformLocation = -1;\n    protected _uScalarTextureId: WebGLUniformLocation = -1;\n\n    // highlighted building ID id\n    protected _highlight = -1;\n    protected _uHighlightId: WebGLUniformLocation = -1;\n\n    // FBO for picking\n    protected _fboWidth = -1;\n    protected _fboHeight = -1;\n    protected _fbo: WebGLFramebuffer = null;\n    protected _readFbo: WebGLFramebuffer = null;\n\n    // first pass textures\n    protected _scalarTexture: WebGLTexture = null;\n    protected _polygonIdTexture: WebGLTexture = null;\n\n    // color map\n    protected _uColorMapId: WebGLUniformLocation = -1;\n    protected _colorMapTexture: WebGLTexture = null;\n\n    /**\n     * The Vector Layer constructor\n     * @param {string} id the layer id\n     */\n    constructor(id: string) {\n        super(id);\n    }\n\n    /**\n     * Shader load signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    async loadShaders(glContext: WebGL2RenderingContext) {\n        // load the shaders\n        for (let id = 0; id < PolygonLayer.N_SHADER; id++) {\n            // shaders url\n            const vertUrl = `assets/shaders/polygon(${id}).vert`;\n            const fragUrl = `assets/shaders/polygon(${id}).frag`;\n\n            // Vertex shader program\n            const vsShader = await DataLoader.getTextData(vertUrl);\n            // Fragment shader program\n            const fsShader = await DataLoader.getTextData(fragUrl);\n\n            // load all shaders\n            this.initShaderProgram(vsShader, fsShader, glContext);\n        }\n        // load message\n        console.log(`#${PolygonLayer.N_SHADER} shaders successfully loaded for layer ${this._layerId}.`);\n    }\n\n    /**\n     * Data update signature\n     * @returns {Promise<any>} The load data promise\n     */\n    async updateFeatures(glContext: WebGL2RenderingContext, data: any = null) {\n        // gets the feature of index id\n        if (data === null) {\n            data = await DataApi.getLayerFeature(this._layerId);\n        }\n\n        // feature definition found\n        this._features = { 'position': [], 'scalar': [], 'polygonId': [], 'index': [], 'offset': [] };\n\n        // loaded number of vertices\n        let nverts = 0;\n        // number of loaded features\n        let nfeatures = 0;\n\n        // iterates over the geometries\n        for (const feature of data.features) {\n            // renders multi polygons\n            for (const part of feature.geometry) {\n                // get the coordinates\n                const position = part.coordinates;\n\n                // get the colors\n                const ids = [];\n                const scalar = [];\n                for (let id = 0; id < position.length / PolygonLayer.COORDS; id++) {\n                    const val = feature.properties && feature.properties.scalar ? feature.properties.scalar : -1;\n                    scalar.push(val);\n                    ids.push(nfeatures / data.features.length);\n                }\n\n                // build the indices\n                const index = part.indices;\n                for (let id = 0; id < index.length; id++) {\n                    index[id] += nverts;\n                }\n\n                // loaded vertices\n                nverts += position.length / PolygonLayer.COORDS;\n\n                // add to the feature\n                this._features['position'].push.apply(this._features['position'], position);\n                this._features['scalar'].push.apply(this._features['scalar'], scalar);\n                this._features['polygonId'].push.apply(this._features['polygonId'], ids);\n                this._features['index'].push.apply(this._features['index'], index);\n                this._features['offset'].push(position.length / PolygonLayer.COORDS);\n            }\n\n            nfeatures += 1;\n        }\n\n        // creates the buffer\n        this.createBuffers(glContext);\n        // creates the scalar data vbo\n        this.createScalarBuffer(glContext);\n        // creates the color map\n        this.createColorMapTexture(glContext, ColorMapType.DIVERGING_RED_BLUE_MAP, false);\n    }\n\n    /**\n     * Function update signature\n     * @returns {Promise<any>} The load data promise\n     */\n    async updateFunction(glContext: WebGL2RenderingContext, data: any) {\n        // scalar function\n        const scalar = data.func;\n\n        // invalid data layout\n        if (scalar.length !== this._features['offset'].length) {\n            return;\n        }\n\n        // new feature found\n        this._features['scalar'] = [];\n\n        let zero = 0;\n        if (data.fMin < 0 && data.fMax > 0) {\n            zero = 0\n        } else if (data.fMin >= 0 && data.fMax > 0) {\n            zero = data.fMin;\n        } else if (data.fMin < 0 && data.fMax <= 0) {\n            zero = data.fMax;\n        }\n\n        // fill the function array\n        for (let fId = 0; fId < scalar.length; fId++) {\n            // get the values\n            const nVerts = this._features['offset'][fId];\n\n            let sValue = null;\n            if (scalar[fId] === 'notAlive') {\n                sValue = -1;\n            }\n            else if (scalar[fId] === 'notActive') {\n                sValue = -2;\n            }\n            else if (scalar[fId] === 'notValid') {\n                sValue = -3;\n            }\n            else if (scalar[fId] === 'notChange') {\n                sValue = -3;\n            }\n            else {\n                sValue = ColorMap.computeScalarValue(scalar[fId], data.fMin, data.fMax, zero);\n            }\n\n            // fill the feature array\n            const vals = new Array(nVerts).fill(sValue);\n            // push to the function\n            this._features['scalar'].push.apply(this._features['scalar'], vals);\n        }\n\n        // creates the scalar data vbo\n        this.createScalarBuffer(glContext);\n    }\n\n    /**\n     * Function update signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     * @param data layer function\n     */\n    cleanFunction(glContext: WebGL2RenderingContext) {\n        for (let id = 0; id < this._features['scalar'].length; id++) {\n            this._features['scalar'][id] = -1;\n        }\n\n        // creates the scalar data vbo\n        this.createScalarBuffer(glContext);\n    }\n\n    /**\n     * Changes the color map\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     * @param {ColorMapType} cMap Color Map\n     */\n    updateColorMap(glContext: WebGL2RenderingContext, cMap: ColorMapType) {\n        // creates the color map\n        this.createColorMapTexture(glContext, cMap, false);\n    }\n\n    /**\n     * Layer render function signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     * @param {number} x Mouse x position\n     * @param {number} y Mouse y position\n     */\n    pick(glContext: WebGL2RenderingContext, x: number, y: number) {\n        glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._readFbo);\n\n        const result = new Float32Array(4);\n        glContext.readPixels(x, y, 1, 1, glContext.RGBA, glContext.FLOAT, result);\n\n        if (result[0] >= 0) {\n            this._highlight = result[0] === this._highlight ? -1 : result[0];\n        }\n\n        glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n\n        this.render(glContext);\n    }\n\n    /**\n     * Layer picking function signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    pickId() {\n        if (this._highlight === -1) {\n            return this._highlight;\n        }\n\n        if (!this._features['polygonId']) {\n            return this._highlight;\n        }\n\n        let previous = -1;\n        let polyId = -1;\n\n        for (let pId = 0; pId < this._features['polygonId'].length; pId++) {\n            const current = this._features['polygonId'][pId];\n\n            if (previous === current) {\n                continue;\n            }\n            else {\n                polyId += 1;\n                previous = current;\n                if (Math.abs(current - this._highlight) < 1e-5) {\n                    return polyId;\n                }\n            }\n        }\n\n        return polyId;\n    }\n\n    setPickId(id: number) {\n        let previous = -1;\n        let polyId = -1;\n\n        if (!this._features['polygonId']) {\n            this._highlight = -1;\n            return;\n        }\n\n        for (let pId = 0; pId < this._features['polygonId'].length; pId++) {\n            const current = this._features['polygonId'][pId];\n\n            if (previous === current) {\n                continue;\n            }\n            else {\n                polyId += 1;\n                previous = current;\n                if (polyId === id) {\n                    this._highlight = current;\n                    return;\n                }\n            }\n        }\n    }\n\n    /**\n     * Layer render function signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    render(glContext: WebGL2RenderingContext) {\n        // invalid layers\n        if (\n            this._shaderProgram.length !== PolygonLayer.N_SHADER ||\n            this._glPositionBuffer === null ||\n            this._glPolygonIdBuffer === null ||\n            this._glScalarBuffer === null ||\n            this._glIndexBuffer === null\n        ) {\n            return;\n        }\n        // FBO setup\n        this.setupFBO(glContext);\n\n        // Picking\n        glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._fbo);\n        this.renderToTexture(glContext);\n        glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n\n        // render\n        this.renderTexture(glContext);\n\n        // render selected polygon\n        this.renderSelection(glContext);\n    }\n\n    protected renderSelection(glContext: WebGL2RenderingContext) {\n        // uniforms and attrib locations\n        this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[2], 'uModelViewMatrix');\n        this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[2], 'uProjectionMatrix');\n        this._uWorldOriginId = glContext.getUniformLocation(this._shaderProgram[2], 'uWorldOrigin');\n        this._positionId = glContext.getAttribLocation(this._shaderProgram[2], 'vertPos');\n        this._polygonId = glContext.getAttribLocation(this._shaderProgram[2], 'vertPolyId');\n        this._uHighlightId = glContext.getUniformLocation(this._shaderProgram[2], 'uHighlightId');\n\n        // binds the shader program\n        glContext.useProgram(this._shaderProgram[2]);\n\n        // send matrices\n        glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n        glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n\n        // send world origin\n        const worldOrigin = this._camera.getWorldOrigin();\n        glContext.uniform2f(this._uWorldOriginId, worldOrigin[0], worldOrigin[1]);\n\n        // render unselected\n        glContext.uniform1f(this._uHighlightId, this._highlight);\n\n        // binds the position buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n        glContext.vertexAttribPointer(this._positionId, PolygonLayer.COORDS, glContext.FLOAT, false, 0, 0);\n        glContext.enableVertexAttribArray(this._positionId);\n\n        // binds the polygon id buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPolygonIdBuffer);\n        glContext.vertexAttribPointer(this._polygonId, 1, glContext.FLOAT, false, 0, 0);\n        glContext.enableVertexAttribArray(this._polygonId);\n\n        let first = 0;\n\n        const high = [];\n        this._features['offset'].forEach(vertsCount => {\n            // skips selected\n            if (Math.abs(this._features['polygonId'][first] - this._highlight) < 1e-5) {\n                const curr = { first, vertsCount };\n                high.push(curr);\n            } else {\n                glContext.drawArrays(glContext.LINE_STRIP, first, vertsCount);\n            }\n            first += vertsCount;\n        });\n\n        high.forEach(cHigh => {\n            glContext.drawArrays(glContext.LINE_STRIP, cHigh.first, cHigh.vertsCount);\n        });\n    }\n\n    /**\n     * Send uniforms to the shader\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    protected renderTexture(glContext: WebGL2RenderingContext) {\n        // polygons texture\n        this._uScalarTextureId = glContext.getUniformLocation(this._shaderProgram[1], 'uScalarTex');\n\n        glContext.enable(glContext.BLEND);\n        glContext.blendFunc(glContext.SRC_ALPHA, glContext.ONE_MINUS_SRC_ALPHA);\n\n        glContext.useProgram(this._shaderProgram[1]);\n\n        glContext.activeTexture(glContext.TEXTURE0);\n        glContext.bindTexture(glContext.TEXTURE_2D, this._scalarTexture);\n        glContext.uniform1i(this._uScalarTextureId, 0);\n\n        glContext.drawArrays(glContext.TRIANGLE_STRIP, 0, 4);\n        glContext.disable(glContext.BLEND);\n    }\n\n    /**\n     * Send uniforms to the shader\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    protected renderToTexture(glContext: WebGL2RenderingContext) {\n        // tuniforms and attrib locations\n        this._uModelViewMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uModelViewMatrix');\n        this._uProjectionMatrixId = glContext.getUniformLocation(this._shaderProgram[0], 'uProjectionMatrix');\n        this._uWorldOriginId = glContext.getUniformLocation(this._shaderProgram[0], 'uWorldOrigin');\n        this._positionId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPos');\n        this._polygonId = glContext.getAttribLocation(this._shaderProgram[0], 'vertPolyId');\n        this._scalarId = glContext.getAttribLocation(this._shaderProgram[0], 'vertScalar');\n        this._uColorMapId = glContext.getUniformLocation(this._shaderProgram[0], 'uColorMap');\n\n        // binds the shader program\n        glContext.useProgram(this._shaderProgram[0]);\n\n        // send matrices\n        glContext.uniformMatrix4fv(this._uModelViewMatrixId, false, this._camera.getModelViewMatrix());\n        glContext.uniformMatrix4fv(this._uProjectionMatrixId, false, this._camera.getProjectionMatrix());\n\n        // send world origin\n        const worldOrigin = this._camera.getWorldOrigin();\n        glContext.uniform2f(this._uWorldOriginId, worldOrigin[0], worldOrigin[1]);\n\n        // send the color map\n        glContext.uniform1i(this._uColorMapId, 0);\n\n        // binds the position buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n        glContext.vertexAttribPointer(this._positionId, PolygonLayer.COORDS, glContext.FLOAT, false, 0, 0);\n        glContext.enableVertexAttribArray(this._positionId);\n\n        // binds the polygon id buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPolygonIdBuffer);\n        glContext.vertexAttribPointer(this._polygonId, 1, glContext.FLOAT, false, 0, 0);\n        glContext.enableVertexAttribArray(this._polygonId);\n\n        // binds the scalar buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glScalarBuffer);\n        glContext.vertexAttribPointer(this._scalarId, 1, glContext.FLOAT, false, 0, 0);\n        glContext.enableVertexAttribArray(this._scalarId);\n\n        // Tell WebGL we want to affect texture unit 0\n        glContext.activeTexture(glContext.TEXTURE0);\n        glContext.bindTexture(glContext.TEXTURE_2D, this._colorMapTexture);\n\n        glContext.clearColor(0.0, 0.0, 0.0, 0.0);\n        // tslint:disable-next-line:no-bitwise\n        glContext.clear(glContext.COLOR_BUFFER_BIT | glContext.DEPTH_BUFFER_BIT);\n\n        // Tell WebGL which indices to use to index the vertices\n        glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n        // draw the geometry\n        glContext.drawElements(glContext.TRIANGLES, this._features['index'].length, glContext.UNSIGNED_INT, 0);\n    }\n\n    /**\n     * setup FBO used for edge detection\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    protected setupFBO(glContext: WebGL2RenderingContext) {\n        if (this._fbo == null || this._readFbo == null) {\n            // creates the buffers\n            this._fbo = glContext.createFramebuffer();\n            this._readFbo = glContext.createFramebuffer();\n            this._polygonIdTexture = glContext.createTexture();\n            this._scalarTexture = glContext.createTexture();\n\n            // check the availability of float buffers\n            const ext = glContext.getExtension('EXT_color_buffer_float');\n            if (!ext) {\n                console.error('float buffer extension not supported!!!');\n            }\n        }\n\n        // gets the viewport\n        const viewPort = this._camera.getViewportResolution();\n        if (this._fboWidth !== viewPort[0] || this._fboHeight !== viewPort[1]) {\n            // update FBO size\n            this._fboWidth = viewPort[0];\n            this._fboHeight = viewPort[1];\n\n            // building ID texture\n            glContext.bindTexture(glContext.TEXTURE_2D, this._polygonIdTexture);\n            glContext.texImage2D(\n                glContext.TEXTURE_2D, 0, glContext.RGBA32F,\n                this._fboWidth, this._fboHeight, 0, glContext.RGBA, glContext.FLOAT, null\n            );\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n            // building ID texture\n            glContext.bindTexture(glContext.TEXTURE_2D, this._scalarTexture);\n            glContext.texImage2D(\n                glContext.TEXTURE_2D, 0, glContext.RGBA32F,\n                this._fboWidth, this._fboHeight, 0, glContext.RGBA, glContext.FLOAT, null\n            );\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n            glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n\n            // fbo setup\n            glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._fbo);\n            glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT0, glContext.TEXTURE_2D, this._scalarTexture, 0);\n            glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT1, glContext.TEXTURE_2D, this._polygonIdTexture, 0);\n            glContext.drawBuffers([glContext.COLOR_ATTACHMENT0, glContext.COLOR_ATTACHMENT1]);\n\n            // readfbo setup\n            glContext.bindFramebuffer(glContext.FRAMEBUFFER, this._readFbo);\n            glContext.framebufferTexture2D(glContext.FRAMEBUFFER, glContext.COLOR_ATTACHMENT0, glContext.TEXTURE_2D, this._polygonIdTexture, 0);\n\n            // unbind fbos\n            glContext.bindFramebuffer(glContext.FRAMEBUFFER, null);\n        }\n    }\n\n    /**\n     * Layer VBO creation signature\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    protected createBuffers(glContext: WebGL2RenderingContext) {\n        // Create a buffer for the positions.\n        this._glPositionBuffer = glContext.createBuffer();\n        // Select the positionBuffer as the one to apply buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPositionBuffer);\n        // send data to gpu\n        glContext.bufferData(\n            glContext.ARRAY_BUFFER, new Float32Array(this._features['position']), glContext.STATIC_DRAW\n        );\n\n        // Create a buffer for the positions.\n        this._glPolygonIdBuffer = glContext.createBuffer();\n        // Select the positionBuffer as the one to apply buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glPolygonIdBuffer);\n        // send data to gpu\n        glContext.bufferData(\n            glContext.ARRAY_BUFFER, new Float32Array(this._features['polygonId']), glContext.STATIC_DRAW\n        );\n\n        // Create a buffer for the indices.\n        this._glIndexBuffer = glContext.createBuffer();\n        // Select the index buffer as the one to apply buffer\n        glContext.bindBuffer(glContext.ELEMENT_ARRAY_BUFFER, this._glIndexBuffer);\n        // send data to gpu\n        glContext.bufferData(\n            glContext.ELEMENT_ARRAY_BUFFER, new Uint32Array(this._features['index']), glContext.STATIC_DRAW);\n    }\n\n    /**\n     * Scalar data vbo creation\n     * @param {WebGL2RenderingContext} glContext WebGL context\n     */\n    protected createScalarBuffer(glContext: WebGL2RenderingContext) {\n        // Create a buffer for the colors.\n        if (this._glScalarBuffer === null) {\n            this._glScalarBuffer = glContext.createBuffer();\n        }\n        // Select the color buffer as the one to apply buffer\n        glContext.bindBuffer(glContext.ARRAY_BUFFER, this._glScalarBuffer);\n        // send data to gpu\n        glContext.bufferData(\n            glContext.ARRAY_BUFFER, new Float32Array(this._features['scalar']), glContext.STATIC_DRAW\n        );\n    }\n\n    /**\n   * Color map texture creation\n   * @param {WebGL2RenderingContext} glContext WebGL context\n   * @param {ColorMapType} color Selected color map\n   * @param {boolean} get the reverse color map\n   */\n    protected createColorMapTexture(glContext: WebGL2RenderingContext, color: ColorMapType, reverse: boolean = false) {\n        // gets the color map\n        const colors = ColorMap.getColorMap(color, reverse);\n        // gl color map texture\n        if (this._colorMapTexture === null) {\n            this._colorMapTexture = glContext.createTexture();\n        }\n\n        // send the color map\n        glContext.bindTexture(glContext.TEXTURE_2D, this._colorMapTexture);\n        glContext.texImage2D(\n            glContext.TEXTURE_2D, 0, glContext.RGBA, colors.length / 4, 1, 0,\n            glContext.RGBA, glContext.UNSIGNED_BYTE, new Uint8Array(colors)\n        );\n        glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MIN_FILTER, glContext.NEAREST);\n        glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_MAG_FILTER, glContext.NEAREST);\n        glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_S, glContext.CLAMP_TO_EDGE);\n        glContext.texParameteri(glContext.TEXTURE_2D, glContext.TEXTURE_WRAP_T, glContext.CLAMP_TO_EDGE);\n    }\n}\n","// moved this to independent file keeping the app.module cleaner\nimport { NgModule } from '@angular/core';\n\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatListModule } from '@angular/material/list';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\nconst materialModules = [\n    MatCheckboxModule,\n    MatInputModule,\n    MatSelectModule,\n    MatRadioModule,\n    MatMenuModule,\n    MatToolbarModule,\n    MatListModule,\n    MatGridListModule,\n    MatCardModule,\n    MatTabsModule,\n    MatButtonModule,\n    MatChipsModule,\n    MatIconModule,\n    MatProgressSpinnerModule,\n    MatProgressBarModule,\n    MatDialogModule,\n    MatTooltipModule,\n    MatSnackBarModule,\n    MatSlideToggleModule,\n    MatTableModule,\n    MatPaginatorModule,\n    MatSortModule,\n    MatAutocompleteModule,\n    MatExpansionModule,\n    FormsModule,\n    ReactiveFormsModule\n];\n\n@NgModule({\n    declarations: [\n    ],\n    imports: materialModules,\n    exports: materialModules\n})\nexport class MaterialModule { }","import { Injectable } from '@angular/core';\nimport { environment } from '../../environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n\n  constructor() { }\n\n  \n  loadModes() {\n    return ['value', 'change'];\n  }\n\n  loadLevels() {\n    return ['borough', 'neighborhood', 'block', 'lot'];\n  }\n\n  loadSortBy() {\n    return ['name', 'year'];\n  }\n\n  loadYearStep() {\n    return ['0', '1', '2', '3', '4', '5'];\n  }\n\n  loadPolygons() {\n    return ['neighborhoods', 'community districs'];\n  }\n\n  loadNavigation() {\n    return ['complete', 'skip blocks'];\n  }\n\n  async loadBoroughs() {\n    const url = `${environment.backend}/plutovis/meta.boroughs`;\n    console.log(url);\n\n    // Return a new promise.\n    const response = await fetch(url);\n    return await response.json();\n  }\n\n  async loadYears() {\n    const url = `${environment.backend}/plutovis/meta.years`;\n    console.log(url);\n\n    // Return a new promise.\n    const response = await fetch(url);\n    return  await response.json();\n  }\n\n  async loadAttributes() {\n    const url = `${environment.backend}/plutovis/meta.nattributes`;\n    console.log(url);\n\n    // Return a new promise.\n    const response = await fetch(url);\n  \n    const obj = {};\n    const arr = await response.json();\n\n    arr.forEach(elm => {\n      obj[elm.attribute] = elm;\n      if (elm.categories.length <= 1) {\n        elm.categories = ['NONE'];\n      }\n    });\n\n    return obj;\n  }\n\n  async loadMetrics() {\n    const url = `${environment.backend}/plutovis/meta.metrics`;\n    console.log(url);\n\n    // Return a new promise.\n    const response = await fetch(url);\n    return await response.json();\n  }\n\n  async loadPopsGeometry(borough: string) {\n    const url = `${environment.backend}/plutovis/popslayer`;\n    console.log(url);\n\n    // post parameters\n    const params = { borough };\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n\n    return await response.json();\n  }\n\n  async loadGeometry(level: string, state: any) {\n    if (level === 'borough') {\n      return await this.loadNeighborhoodsGeometry(state.borough, state.polygon);\n    }\n    \n    if (level === 'neighborhood') {\n      if (state.navigation === 'complete') {\n        return await this.loadBlocksGeometry(state.borough, state.polygon, state.neighborhood, state.year);\n      } else {\n        return await this.loadLotsGeometry(state.borough, state.polygon, state.neighborhood, '', state.year);\n      }\n    }\n\n    if (level === 'block') {\n      return await this.loadLotsGeometry(state.borough, state.polygon, state.neighborhood, state.block, state.year);\n    }\n  }\n\n  private async loadNeighborhoodsGeometry(borough: string, polygon: string) {\n    const url = `${environment.backend}/plutovis/geometries.neighborhoods`;\n    console.log(url);\n\n    // post parameters\n    const params = { borough, polygon };\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n  private async loadBlocksGeometry(borough: string, polygon: string, neighborhood: string, year: number) {\n    const url = `${environment.backend}/plutovis/geometries.blocks`;\n    console.log(url);\n\n    // post parameters\n    const params = { borough, polygon, neighborhood, year };\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n  private async loadLotsGeometry(borough: string, polygon: string, neighborhood: string, block: string, year: number) {\n    const url = `${environment.backend}/plutovis/geometries.lots`;\n    console.log(url);\n\n    // post parameters\n    const params = { borough, polygon, neighborhood, block, year };\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n\n  async loadSummary(level: string, state: any) {\n    if (level === 'borough') {\n      return await this.loadNeighborhoodsSummary(state.borough, state.polygon, state.attribute, state.category, state.metric);\n    }\n    \n    if (level === 'neighborhood') {\n      if (state.navigation === 'complete') {\n        return await this.loadBlocksSummary(state.borough, state.polygon, state.neighborhood, state.attribute, state.category, state.metric);\n      } else {\n        return await this.loadLotsSummary(state.borough, state.polygon, state.neighborhood, '', state.attribute, state.category, state.metric);\n      }\n    }\n\n    if (level === 'block') {\n      return await this.loadLotsSummary(state.borough, state.polygon, state.neighborhood, state.block, state.attribute, state.category, state.metric);\n    }\n  }\n\n  private async loadNeighborhoodsSummary(borough: string, polygon: string, attribute: string, category: string, metric: string) {\n    const url = `${environment.backend}/plutovis/summaries.neighborhoods`;\n    console.log(url);\n\n    // post parameters\n    category = category === 'NONE' ? (attribute === 'POPS' ? 'Y' : '') : category;\n    let params = { borough, polygon, attribute, category, metric };\n\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n  private async loadBlocksSummary(borough: string, polygon: string, neighborhood: string, attribute: string, category: string, metric: string) {\n    const url = `${environment.backend}/plutovis/summaries.blocks`;\n    console.log(url);\n\n    // post parameters\n    category = category === 'NONE' ? (attribute === 'POPS' ? 'Y' : '') : category;\n    let params = { borough, neighborhood, polygon, attribute, category, metric };\n\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n  private async loadLotsSummary(borough: string, polygon: string, neighborhood: string, block: string, attribute: string, category: string, metric: string) {\n    const url = `${environment.backend}/plutovis/summaries.lots`;\n    console.log(url);\n\n    // post parameters\n    category = category === 'NONE' ? (attribute === 'POPS' ? 'Y' : '') : category;\n    let params = { borough, neighborhood, polygon, block, attribute, category, metric };\n    \n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n\n  async loadFilter(borough: string, polygon: string, attribute: string, category: string, bins: number = 20) {    \n    const url = `${environment.backend}/plutovis/histogram`;\n    console.log(url);\n\n    // post parameters\n    category = category === 'NONE' ? (attribute === 'POPS' ? 'Y' : '') : category;\n    const params = { borough, polygon, attribute, category, bins };\n\n    console.log(`post data: ${JSON.stringify(params)}`);\n\n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.json();\n  }\n\n  async applyFilter(borough: string, polygon: string, limits: any, filterExp: string) {\n    const url = `${environment.backend}/plutovis/filter`;\n    console.log(url);\n\n    limits.forEach(el => {\n      if (el.attribute === 'LANDUSE' || el.attribute === 'SPDIST1') {\n        delete el.category;\n      }\n    })\n\n    // post parameters\n    const params = { borough, polygon, limits, filterExp };\n    console.log(`post data: ${JSON.stringify(params)}`);\n    \n    // post header\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n\n    // Return a new promise.\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(params),\n    });\n    return await response.text();\n  }\n}\n","import percentile from 'stats-percentile';\nimport * as d3 from 'd3';\n\nimport { Injectable } from '@angular/core';\n\nimport { ApiService } from './api.service';\nimport { EventsService } from './events.service';\nimport { StateService } from './state.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DataService {\n    public geometry = null;\n    public summary = null;\n    public filters = {};\n    public layers = {};\n\n    public meta = {\n        modes: [],\n        years: [],\n        attributes: {},\n        boroughs: [],\n        polygons: [],\n        levels: [],\n        navigation: [],\n        sortBy: [],\n        yearStep: [],\n    };\n\n    constructor(public api: ApiService, public events: EventsService, public state: StateService) {\n        this.subscribeRootEvents();\n        this.subscribeMapEvents();\n        this.subscribeStateEvents();\n        this.subscribeFilterEvents();\n    }\n\n    // --- Root app events subscriptions\n\n    subscribeRootEvents() {\n        this.events.root.initialized.subscribe(this.initializeMeta.bind(this));\n    }\n\n    async initializeMeta() {\n        this.meta.modes = this.api.loadModes();\n        this.meta.years = await this.api.loadYears();\n        this.meta.attributes = await this.api.loadAttributes();\n        this.meta.boroughs = await this.api.loadBoroughs();\n        this.meta.polygons = await this.api.loadPolygons();\n        this.meta.navigation = await this.api.loadNavigation();\n        this.meta.levels = this.api.loadLevels();\n        this.meta.sortBy = this.api.loadSortBy();\n        this.meta.yearStep = this.api.loadYearStep();\n    }\n\n    // --- Map events subscriptions\n\n    subscribeMapEvents() {\n        this.events.map.initialized.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n    }\n\n    // --- State events subscriptions\n\n    subscribeStateEvents() {\n        this.events.state.configBoroughChanged.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n        this.events.state.configBoroughChanged.subscribe(this.loadAllFilters.bind(this));\n\n        this.events.state.configPolygonChanged.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n        this.events.state.configPolygonChanged.subscribe(this.loadAllFilters.bind(this));\n\n        this.events.state.configNavigationChanged.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n        this.events.state.configNavigationChanged.subscribe(this.loadAllFilters.bind(this));\n\n        this.events.state.configModeChanged.subscribe(this.loadFunction.bind(this));\n        this.events.state.configCMapChanged.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n\n        this.events.state.filterParametersChanged.subscribe(this.loadFilter.bind(this));\n\n        this.events.state.geometryParametersChanged.subscribe(this.loadSummaryThenGeometryAndFunction.bind(this));\n        this.events.state.summaryParametersChanged.subscribe(this.loadSummaryThenFunction.bind(this));\n    }\n\n    async loadSummaryThenGeometryAndFunction(isYear: boolean) {\n        await this.applyFilter();\n        await this.loadSummary();\n        await this.loadGeometry();\n        // POPs layer\n        await this.loadPopsGeometry();\n\n        // elements per year\n        const length = this.summary[this.state.activeGeometryParameters.year].length;\n\n        // emits the event\n        if (!isYear) {\n            this.events.data.initializePagination.emit(length);\n            this.events.data.updateVisMatrix.emit();\n        }\n        this.events.data.updateMapGeometryAndFunction.emit();\n    }\n\n    async loadSummaryThenFunction() {\n        await this.applyFilter();\n        await this.loadSummary();\n\n        // elements per year\n        const length = this.summary[this.state.activeGeometryParameters.year].length;\n\n        // emits the event\n        this.events.data.initializePagination.emit(length);\n        this.events.data.updateVisMatrix.emit();\n        this.events.data.updateMapFunction.emit();\n    }\n\n    async loadFunction() {\n        this.events.data.updateMapFunction.emit();\n    }\n\n    async loadPopsGeometry() {\n        // get borough\n        const borough = this.state.activeConfigParameters.borough;\n\n        // gets the geometry\n        this.layers['pops'] = await this.api.loadPopsGeometry(borough);\n    }\n\n    async loadGeometry() {\n        // get borough\n        const borough = this.state.activeConfigParameters;\n        // get parents list\n        const parents = this.state.activeGeometryParameters;\n        // get current parameters\n        const parameters = this.state.activeSummaryParameters;\n\n        // current state\n        let state = {};\n        Object.assign(state, borough);\n        Object.assign(state, parents);\n        Object.assign(state, parameters);\n\n        // current level\n        const level = this.state.activeLevel;\n\n        // gets the geometry\n        this.geometry = await this.api.loadGeometry(level, state);\n        this.geometry.features.sort((a, b) => a.properties.name < b.properties.name ? 1 : -1);\n    }\n\n    async loadSummary() {\n        // get borough\n        const borough = this.state.activeConfigParameters;\n        // get parents list\n        const parents = this.state.activeGeometryParameters;\n        // get current parameters\n        const parameters = this.state.activeSummaryParameters;\n\n        // current state\n        let state = {};\n        Object.assign(state, borough);\n        Object.assign(state, parents);\n        Object.assign(state, parameters);\n        // current level\n        const level = this.state.activeLevel;\n\n        // gets the summary\n        this.summary = await this.api.loadSummary(level, state);\n\n        // year steps\n        const step = +this.state.activeSummaryParameters.yearStep;\n        this.filterYears(step);\n\n        // adds the difference field\n        this.computeDifferences();\n\n        console.log(this.summary);\n    }\n\n\n    filterYears(step: number) {\n        if (!step) { return; }\n        \n        const years = Object.keys(this.summary).filter(d => d !== 'min' && d !== 'max').filter(d => d.split('.')[1] === '1');\n        years.push('2008.1');\n        years.sort();\n\n        const subYears = [];\n        for (let yId = years.length - 1; yId >= 0; yId -= step) {\n            subYears.push(years[yId]);\n        }\n        subYears.reverse();\n\n        const stepSummary = {};\n        for (let yId = 0; yId < subYears.length; yId++) {\n            if (subYears[yId] === '2008.1') {\n                stepSummary[subYears[yId]] = this.summary['2007.1'];\n            }\n            else {\n                stepSummary[subYears[yId]] = this.summary[subYears[yId]];\n            }\n        }\n        stepSummary['min'] = this.summary['min'];\n        stepSummary['max'] = this.summary['max']; \n\n        this.summary = stepSummary;\n    }\n\n    computeDifferences() {\n        this.summary.changeMin = Infinity;\n        this.summary.changeMax = -Infinity;\n\n        const vals = [];\n        const cngs = []; \n\n        // Is Alive : the lot existis in the selected year\n        // Is Valid : the selected attribute is a valid value in the lot\n        // Is Active: the lot fits the filter condition \n\n        const years = Object.keys(this.summary).filter(key => !isNaN(+key));\n\n        for (let yId = 0; yId < years.length; yId++) {\n            const year = years[yId];\n\n            for (let nId = 0; nId < this.summary[year].length; nId++) {\n                if (yId === 0) {\n                    this.summary[year][nId].change = 0;\n                    this.summary[year][nId].changeValid = false;\n                }\n                else {\n                    const prev = years[yId - 1];\n\n                    // all data is ok\n                    if (this.summary[year][nId].isAlive && this.summary[prev][nId].isAlive && this.summary[year][nId].isValid && this.summary[prev][nId].isValid) {\n                        this.summary[year][nId].change = this.summary[year][nId].value - this.summary[prev][nId].value;\n                        this.summary[year][nId].changeValid = true;\n                    }\n                    // current not alive, previous alive and valid\n                    else if (!this.summary[year][nId].isAlive && this.summary[prev][nId].isAlive && this.summary[prev][nId].isValid) {\n                        this.summary[year][nId].change = -this.summary[prev][nId].value;\n                        this.summary[year][nId].changeValid = true;\n                    }\n                    // current alive and valid, previous not alive\n                    else if (this.summary[year][nId].isAlive && !this.summary[prev][nId].isAlive && this.summary[year][nId].isValid) {\n                        this.summary[year][nId].change = this.summary[year][nId].value;\n                        this.summary[year][nId].changeValid = true;\n                    }\n                    // current alive and not valid, previous alive and valid\n                    else if (this.summary[year][nId].isAlive && this.summary[prev][nId].isAlive && !this.summary[year][nId].isValid && this.summary[prev][nId].isValid) {\n                        this.summary[year][nId].change = -this.summary[prev][nId].value;\n                        this.summary[year][nId].changeValid = true;\n                    }\n                    // current alive and valid, previous alive and not valid\n                    else if (this.summary[year][nId].isAlive && this.summary[prev][nId].isAlive && this.summary[year][nId].isValid && !this.summary[prev][nId].isValid) {\n                        this.summary[year][nId].change = this.summary[year][nId].value;\n                        this.summary[year][nId].changeValid = true;\n                    }\n                    else {\n                        this.summary[year][nId].change = 0;\n                        this.summary[year][nId].changeValid = false;\n                    }\n                }\n\n                vals.push(this.summary[year][nId].value);\n                cngs.push(this.summary[year][nId].change);\n            }\n        }\n\n        if (this.state.activeConfigParameters.cmapPercentiles) {\n            this.summary.min  = percentile(vals,  2);\n            this.summary.max  = percentile(vals, 98);\n            this.summary.changeMin = percentile(cngs, 2);\n            this.summary.changeMax = percentile(cngs,98);    \n        }\n        else {\n            this.summary.min  = d3.min(vals);\n            this.summary.max  = d3.max(vals);\n            this.summary.changeMin = d3.min(cngs);\n            this.summary.changeMax = d3.max(cngs);\n        }\n    }\n\n    async subscribeFilterEvents() {\n        this.events.filters.updateSummary.subscribe(this.loadSummaryThenFunction.bind(this));\n    }\n\n    async applyFilter() {\n        const borough   = this.state.activeConfigParameters.borough;\n        const polygon   = this.state.activeConfigParameters.polygon;\n        const filterExp = this.state.activeConfigParameters.filterExp;\n        const filters = Object.keys(this.state.activeFilterParameters).map(key => {\n            const obj = this.state.activeFilterParameters[key];\n\n            if (!obj.range || obj.range.length === 0) {\n                return null;\n            }\n\n            let min = +obj.range[0].split('-')[0];\n            min = isNaN(min) ? obj.range[0] : min;\n\n            let max = +obj.range[obj.range.length - 1].split('-')[1];\n            max = isNaN(max) ? obj.range[obj.range.length - 1] : max;\n\n            return {\n                key: key,\n                attribute: obj.attribute,\n                category: obj.category,\n                min,\n                max\n            }\n        })\n\n        await this.api.applyFilter(borough, polygon, filters.filter(obj => obj !== null), filterExp);\n    }\n\n    async loadFilter(key: string) {\n        const isAlive = Object.keys(this.state.activeFilterParameters).includes(`${key}`);\n\n        if (!isAlive) {\n            delete this.filters[key];\n        }\n        else {\n            const borough = this.state.activeConfigParameters.borough;\n            const polygon = this.state.activeConfigParameters.borough;\n            const params = this.state.activeFilterParameters[key];\n\n            const filter = await this.api.loadFilter(borough, polygon, params.attribute, params.category);\n            this.filters[key] = filter;\n        }\n\n        this.events.data.updateFilters.emit();\n    }\n\n    async loadAllFilters() {\n        const keys = Object.keys(this.state.activeFilterParameters);\n\n        for (let key of keys) {\n            const borough = this.state.activeConfigParameters.borough;\n            const polygon = this.state.activeConfigParameters.borough;\n            const params = this.state.activeFilterParameters[key];\n\n            const filter = await this.api.loadFilter(borough, polygon, params.attribute, params.category)\n            this.filters[key] = filter;\n        }\n\n        this.events.data.updateFilters.emit();\n    }\n}\n","import { Injectable, EventEmitter } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EventsService {\n  // Events fired by the root-app\n  public root = {\n    initialized: new EventEmitter<void>(),\n  }\n\n  public config = {\n    boroughSelectChanged: new EventEmitter<any>(),\n    polygonSelectChanged: new EventEmitter<any>(),\n    navigationSelectChanged: new EventEmitter<any>(),\n    modeSelectChanged: new EventEmitter<any>()\n  }\n\n  // Events fired by mapview\n  public menu = {\n    buttonClicked: new EventEmitter<string>(),\n  }\n  \n  // Events fired by mapview\n  public map = {\n    initialized: new EventEmitter<void>(),\n    polyPicked: new EventEmitter<any>(),\n  }\n\n  // Events fired by the vis window\n  public vis = {\n    yearStepSelectChanged: new EventEmitter<any>(),\n    attributeSelectChanged: new EventEmitter<any>(),\n    metricSelectChanged: new EventEmitter<any>(),\n    categorySelectChanged: new EventEmitter<any>(),\n    modeSelectChanged: new EventEmitter<any>(),\n    sortBySelectChanged: new EventEmitter<any>(),\n    \n    yearLabelClicked: new EventEmitter<any>(),\n    polygonLabelClicked: new EventEmitter<any>(),\n    polygonLabelHovered: new EventEmitter<any>(),\n\n    navButtonClicked: new EventEmitter<any>(),\n    navPageChanged: new EventEmitter<any>(),\n\n    sortIconClicked: new EventEmitter<any>(), \n    lineIconClicked: new EventEmitter<any>()\n  }\n\n  public filters = {\n    updated: new EventEmitter<any>(),\n    brushed: new EventEmitter<any>(),\n    updateSummary: new EventEmitter<void>()\n  }\n\n  // Events fired by the data service\n  public data = {\n    updateFilters: new EventEmitter<void>(),\n\n    updateVisMatrix: new EventEmitter<void>(),\n\n    updateMapFunction: new EventEmitter<void>(),\n    updateMapGeometryAndFunction: new EventEmitter<void>(),\n  \n    initializePagination: new EventEmitter<number>()\n  }\n\n  // events fired by the state service\n  public state = {\n    configBoroughChanged: new EventEmitter<void>(),\n    configPolygonChanged: new EventEmitter<void>(),\n    configNavigationChanged: new EventEmitter<void>(),\n    configModeChanged: new EventEmitter<void>(),\n    configCMapChanged: new EventEmitter<void>(),\n\n    geometryParametersChanged: new EventEmitter<boolean>(),\n    summaryParametersChanged: new EventEmitter<void>(), \n\n    selectedPolygonChanged: new EventEmitter<string>(),\n    activeLayerChanged: new EventEmitter<string>(),\n\n    pageParametersChanged: new EventEmitter<void>(),\n    sortParametersChanged: new EventEmitter<void>(),\n    lineCurvesChanged: new EventEmitter<void>(),\n\n    filterParametersChanged: new EventEmitter<string>()\n  }\n\n  public layers = {\n    activeLayerChanged: new EventEmitter<any>()\n  }\n\n  constructor() { }\n}\n","import { Injectable } from '@angular/core';\nimport { EventsService } from './events.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StateService {\n  matrixActive = null;\n  filterActive = null;\n  configActive = false;\n  legendActive = true;\n\n  layersActive = false;\n  activeLayer = '';\n\n  activeConfigParameters: any = {\n    borough: 'Manhattan',\n    polygon: 'neighborhoods',\n    navigation: 'complete',\n    mode: 'change',\n    filterExp: '',\n    cmapPercentiles: false\n  };\n\n  activeGeometryParameters: any = { \n    neighborhood: undefined,\n    block: undefined,\n    lot: undefined,\n    year: '2017.1'\n  };\n\n  activeSummaryParameters: any = {\n    attribute: 'LOTSALIVE',\n    category: 'NONE',\n    metric: 'COUNT',\n    mode: 'change',\n    yearStep: 0\n  };\n\n  activePageParameters: any = {\n    currentPage: null,\n    totalPages: null,\n    pageSize: null,\n    PAGINATION_SIZE: 35\n  }\n\n  activeSortParameters: any = {\n    sortBy: 'name',\n  }\n\n  activeLineChartCurves = [];\n\n  activeFilterParameters: any = {}\n\n  CURRENT_FILTER_ID = 0;\n\n  selectedPolygon = '';\n\n  constructor(public events: EventsService) {\n    this.subscribeDataEvents();\n    this.subscribeLayersEvents();\n\n    this.subscribeConfigEvents();\n\n    this.subscribeMapEvents();\n    this.subscribeVisEvents();\n    this.subscribeFilterEvents();\n  }\n\n  get activeLevel() {\n    if (\n      this.activeConfigParameters.borough &&\n      this.activeGeometryParameters.neighborhood &&\n      (this.activeGeometryParameters.block || this.activeConfigParameters.navigation === 'skip blocks') &&\n      this.activeGeometryParameters.lot &&\n      this.activeGeometryParameters.year\n    ) { return 'lot' }\n\n    if (\n      this.activeConfigParameters.borough &&\n      this.activeGeometryParameters.neighborhood &&\n      (this.activeGeometryParameters.block && this.activeConfigParameters.navigation === 'complete') &&\n      this.activeGeometryParameters.year\n    ) { return 'block' }\n\n    if (\n      this.activeConfigParameters.borough &&\n      this.activeGeometryParameters.neighborhood &&\n      this.activeGeometryParameters.year\n    ) { return 'neighborhood' }\n\n    if (\n      this.activeConfigParameters.borough\n    ) { return 'borough' }\n\n    return 'invalid';\n  }\n\n  get currentFilterId() {\n    return this.CURRENT_FILTER_ID++;\n  }\n\n  // ---- Map events subscriptions\n\n  subscribeMapEvents() {\n    this.events.map.polyPicked.subscribe(this.updateSelectedPolygon.bind(this));\n  }\n\n  updateSelectedPolygon(state) {\n    this.selectedPolygon = state.name;\n    this.events.state.selectedPolygonChanged.emit(state.origin);\n  }\n\n  // ---- Config events subscription\n\n  subscribeConfigEvents() {\n    this.events.config.boroughSelectChanged.subscribe(this.updateActiveConfigBorough.bind(this));\n    this.events.config.polygonSelectChanged.subscribe(this.updateActiveConfigPolygon.bind(this));\n    this.events.config.navigationSelectChanged.subscribe(this.updateActiveConfigNavigation.bind(this));\n    this.events.config.modeSelectChanged.subscribe(this.updateActiveConfigMode.bind(this));\n  }\n\n  // ---- Vis events subscriptions\n\n  subscribeVisEvents() {\n    // changes on these parameters must trigger an update on the layer geometry / function and on the summary matrix\n    this.events.vis.polygonLabelClicked.subscribe(this.updateActiveGeometryParameters.bind(this));\n    this.events.vis.polygonLabelHovered.subscribe(this.updateSelectedPolygon.bind(this));\n    this.events.vis.yearLabelClicked.subscribe(this.updateActiveGeometryParameters.bind(this));\n    this.events.vis.navButtonClicked.subscribe(this.updateActiveGeometryParameters.bind(this));\n\n    // chages on these parameters must trigger an update on the layer function and on the summary matrix\n    this.events.vis.yearStepSelectChanged.subscribe(this.updateActiveSummaryParameters.bind(this));\n    this.events.vis.attributeSelectChanged.subscribe(this.updateActiveSummaryParameters.bind(this));\n    this.events.vis.categorySelectChanged.subscribe(this.updateActiveSummaryParameters.bind(this));\n    this.events.vis.metricSelectChanged.subscribe(this.updateActiveSummaryParameters.bind(this));\n    this.events.vis.modeSelectChanged.subscribe(this.updateActiveSummaryParameters.bind(this));\n\n    // changes that don't require data reload\n    this.events.vis.sortBySelectChanged.subscribe(this.updateActiveSortParameters.bind(this));\n\n    // changes on these parameters must trigger an summary matrix update\n    this.events.vis.navPageChanged.subscribe(this.updateActivePageParameters.bind(this));\n    this.events.vis.sortIconClicked.subscribe(this.updateActiveSortParameters.bind(this));\n    this.events.vis.lineIconClicked.subscribe(this.updateActiveLineChartCurves.bind(this));\n  }\n\n  updateActiveConfigMode(state) {\n    const previous = this.activeConfigParameters;\n    this.activeConfigParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.configModeChanged.emit();\n  }\n\n  updateActiveConfigBorough(state) {\n    const previous = this.activeConfigParameters;\n    this.activeConfigParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.configBoroughChanged.emit();\n  }\n\n  updateActiveConfigPolygon(state) {\n    const previous = this.activeConfigParameters;\n    this.activeConfigParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.configPolygonChanged.emit();\n  }\n\n  updateActiveConfigNavigation(state) {\n    const previous = this.activeConfigParameters;\n    this.activeConfigParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.configNavigationChanged.emit();\n  }\n\n  updateActiveGeometryParameters(state) {\n    const previous = this.activeGeometryParameters;\n    this.activeGeometryParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.geometryParametersChanged.emit(Object.keys(state).includes('year'));\n  }\n\n  updateActiveSummaryParameters(state) {\n    const previous = this.activeSummaryParameters;\n    this.activeSummaryParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.summaryParametersChanged.emit();\n  }\n\n  updateActivePageParameters(state) {\n    const previous = this.activePageParameters;\n    this.activePageParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.pageParametersChanged.emit();\n  }\n\n  updateActiveSortParameters(state) {\n    const previous = this.activeSortParameters;\n    this.activeSortParameters = Object.assign(previous, state);\n\n    // emits the changes\n    this.events.state.sortParametersChanged.emit();\n  }\n\n  updateActiveLineChartCurves(state) {\n    this.activeLineChartCurves = state;\n\n    // emits the changes\n    this.events.state.lineCurvesChanged.emit();\n  }\n\n\n  subscribeFilterEvents() {\n    this.events.filters.updated.subscribe(this.updateFilterParameters.bind(this));\n    this.events.filters.brushed.subscribe(this.updateFilterBrush.bind(this));\n  }\n\n  updateFilterParameters(state) {\n    const { key } = state;\n       \n    if (state.params === null) {\n      delete this.activeFilterParameters[key];\n    } else {\n      const previous = this.activeFilterParameters[key] || {} ;\n      this.activeFilterParameters[key] = Object.assign(previous, state.params);\n    }\n\n    this.events.state.filterParametersChanged.emit(key);\n  }\n\n  updateFilterBrush(state) {\n    const { key } = state;\n\n    const previous = this.activeFilterParameters[key] || {} ;\n    this.activeFilterParameters[key] = Object.assign(previous, state.params);\n  }\n\n  subscribeDataEvents() {\n    this.events.data.initializePagination.subscribe(this.initializePagination.bind(this))\n  }\n\n  initializePagination(length: number) {\n    let den = 1;\n    while ((length / den) > this.activePageParameters.PAGINATION_SIZE) {\n      den += 1;\n    }\n\n    this.activePageParameters.currentPage = 0;\n    this.activePageParameters.totalPages = den;\n    this.activePageParameters.pageSize = Math.ceil(length / den);\n  }\n\n  subscribeLayersEvents() {\n    this.events.layers.activeLayerChanged.subscribe(this.changeActiveLayer.bind(this));\n  }\n\n  changeActiveLayer(state) {\n    this.layersActive = state.layersActive;\n    this.activeLayer = state.activeLayer;\n\n    this.events.state.activeLayerChanged.emit();\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  backend: 'http://localhost:4200',\n  folder: 'nyc'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}